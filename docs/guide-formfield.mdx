---
id: guide-formfield
title: å¼€å‘ä¸€ä¸ªè¡¨å•æ§ä»¶
---

ä¸Šä¸ªç« èŠ‚æˆ‘ä»¬å­¦ä¼šäº†å¦‚ä½•å¼€å‘ä¸€ä¸ªæµç¨‹æŒ‰é’®ï¼Œæœ¬ç« èŠ‚å°†å­¦ä¹ å¦‚ä½•å¼€å‘è¡¨å•æ§ä»¶ï¼ˆåˆç§°ä¸ºè¡¨å•å­—æ®µï¼‰ã€‚ä¸€ä¸ªè¡¨å•æ§ä»¶è‡³å°‘ç”±ä¸‰ä¸ªç»„ä»¶ç»„æˆï¼š

- **render** â€”â€” è¡¨å•æ§ä»¶åœ¨è¡¨å•ä¸­å±•ç°çš„ç»„ä»¶
- **preview** â€”â€” è¡¨å•æ§ä»¶åœ¨è¡¨å•è®¾è®¡å™¨ä¸­å±•ç°çš„ç»„ä»¶
- **configPanel** â€”â€” è¡¨å•æ§ä»¶åœ¨è¡¨å•è®¾è®¡å™¨çš„å±æ€§é¢æ¿ä¸­å±•ç°çš„ç»„ä»¶

å°†é€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡æœ¬è¾“å…¥æ¡†ï¼Œæ¥ä»‹ç»å¦‚ä½•å®ç°ä¸Šé¢ä»‹ç»çš„ä¸‰ä¸ªç»„ä»¶ï¼Œä»¥åœ¨æ™ºèƒ½è¡¨å•ä¸­å¼€å‘ä¸€ä¸ªè‡ªå®šä¹‰çš„è¡¨å•æ§ä»¶ã€‚

:::info ç¤ºä¾‹æºç 

æœ¬ç« èŠ‚å¾—ç¤ºä¾‹ä»£ç å¯ä»¥åœ¨ [sinoform-plugins-web-component-examples/src/plugins/form-field-custom-text-input](https://gitee.com/sinoui/sinoform-plugins-web-component-examples/tree/master/src/plugins/form-field-custom-text-input) ä¸­æ‰¾åˆ°ã€‚

:::

## ä»‹ç»æ–°çš„æ–‡æœ¬è¾“å…¥æ¡†

æœ¬ç« èŠ‚å¼€å‘çš„æ–‡æœ¬è¾“å…¥æ¡†ï¼Œåœ¨è¡¨å•ä¸­å±•ç¤ºçš„æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![æ•™ç¨‹ä¸­çš„æ–‡æœ¬è¾“å…¥æ¡†æ•ˆæœ](assets/guide-formfield/custom-text-input-in-form.png)

ä¸Šå›¾ä¸­åœ¨è¡¨å•ä¸­å‡ºç°çš„æ–‡æœ¬è¾“å…¥æ¡†ï¼Œæ˜¯é€šè¿‡ `render` ç»„ä»¶æ¸²æŸ“å‡ºæ¥çš„ã€‚

åœ¨è¡¨å•è®¾è®¡å™¨ä¸­å±•ç°çš„æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![æ•™ç¨‹ä¸­çš„æ–‡æœ¬è¾“å…¥æ¡†åœ¨è®¾è®¡å™¨ä¸­çš„æ•ˆæœ](assets/guide-formfield/custom-text-input-in-design.png)

ä¸Šå›¾ä¸­ä¸‰ä¸ªéƒ¨åˆ†æ˜¯é€šè¿‡æ‰©å±•é…ç½®å®šä¹‰å‡ºæ¥çš„ï¼š

1. æ³¨å†Œè¡¨å•æ§ä»¶æ—¶æŒ‡å®šçš„ `title` å†³å®šçš„
2. é€šè¿‡ `preview` ç»„ä»¶æ¸²æŸ“å‡ºæ¥çš„
3. é€šè¿‡ `configPanel` ç»„ä»¶æ¸²æŸ“å‡ºæ¥çš„

åœ¨å¼€å‘è¡¨å•æ§ä»¶è¿‡ç¨‹ä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è®¾è®¡å™¨çš„é¢„è§ˆåŠŸèƒ½æŸ¥çœ‹æ–‡æœ¬è¾“å…¥æ¡†åœ¨è¡¨å•ä¸­çš„å±•ç°æ•ˆæœï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![æ•™ç¨‹ä¸­çš„æ–‡æœ¬è¾“å…¥æ¡†åœ¨è®¾è®¡å™¨é¢„è§ˆè¡¨å•ä¸­çš„pcç«¯æ•ˆæœ](assets/guide-formfield/custom-text-input-in-design-preview.png)

ä¹Ÿå¯ä»¥åœ¨é¢„è§ˆä¸­æŸ¥çœ‹åœ¨ç§»åŠ¨ç«¯çš„å±•ç¤ºæ•ˆæœï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![æ•™ç¨‹ä¸­çš„æ–‡æœ¬è¾“å…¥æ¡†åœ¨è®¾è®¡å™¨é¢„è§ˆè¡¨å•ä¸­çš„ç§»åŠ¨ç«¯æ•ˆæœ](assets/guide-formfield/custom-text-input-in-design-mobile-preview.png)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç…§ä¾‹ä» `Hello, World!` å¼€å§‹ï¼Œç”±æµ…å…¥æ·±åœ°ä»‹ç»å¦‚ä½•å…¥é—¨è¡¨å•æ§ä»¶çš„å¼€å‘ã€‚

## Hello, TextInput!

æœ¬èŠ‚ä»¥æœ€å¿«çš„é€Ÿåº¦ï¼Œå¼€å‘å¥½è‡ªå®šä¹‰æ–‡æœ¬è¾“å…¥æ¡†çš„ä¸‰ä¸ªå¿…è¦ç»„ä»¶ï¼Œå¹¶æ³¨å†Œåˆ°æ™ºèƒ½è¡¨å•ä¸­ä½¿ç”¨ã€‚è®©æˆ‘ä»¬å¼€å§‹å§ã€‚

é¦–å…ˆåˆ›å»ºä¸‰ä¸ªç»„ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

```
ğŸ“¦src
 â”£ ğŸ“‚plugins
 â”ƒ â”— ğŸ“‚form-field-custom-text-input
 â”ƒ â”ƒ â”£ ğŸ“‚render
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“œCustomTextInputRenderer.ts
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“œCustomTextInputRenderer.css
 â”ƒ â”ƒ â”ƒ â”— ğŸ“œindex.ts
 â”ƒ â”ƒ â”£ ğŸ“‚preview
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“œindex.ts
 â”ƒ â”ƒ â”ƒ â”— ğŸ“œCustomTextInputPreview.ts
 â”ƒ â”ƒ â”£ ğŸ“‚config-panel
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“œCustomTextInputConfigPanel.ts
 â”ƒ â”ƒ â”ƒ â”— ğŸ“œindex.ts
 â”— ğŸ“œindex.ts
```

åˆ›å»ºå®Œæˆåï¼Œæˆ‘ä»¬æŒ‰ç…§ä¹‹å‰ç« èŠ‚çš„ç»éªŒï¼Œä¾æ¬¡åˆå§‹å®ç° [render](#åˆå§‹å®ç°-render)ã€[preview](#åˆå§‹å®ç°-preview) å’Œ [config-panel](#åˆå§‹å®ç°-config-panel)ã€‚

### åˆå§‹å®ç° `render`

```typescript title="src/plugins/form-field-custom-text-input/render/CustomTextInputRenderer.ts"
import { SinoFormElement } from "@sinoform/plugin-sinoform-helpers";
import "./CustomTextInputRenderer.css";

/**
 * è‡ªå®šä¹‰æ–‡æœ¬æ¡†åœ¨è¡¨å•ä¸­å±•ç¤ºçš„ç»„ä»¶
 */
export default class CustomTextInputRenderer extends SinoFormElement {
  override render() {
    this.innerHTML = `<input class="custom-text-input" />`;
  }
}
```

```css title="src/plugins/form-field-custom-text-input/render/CustomTextInputRenderer.css"
.custom-text-input {
  display: block;
  line-height: inherit;
  font: inherit;
  color: inherit;
  -webkit-letter-spacing: inherit;
  -moz-letter-spacing: inherit;
  -ms-letter-spacing: inherit;
  letter-spacing: inherit;
  box-sizing: content-box;
  background: none;
  margin: 0px;
  -webkit-tap-highlight-color: transparent;
  min-width: 0px;
  width: 100%;
  flex: 1 1 auto;
  padding: 3.5px 0 4.5px;
  height: 1.5em;
  min-height: 1.5em;
}
```

```typescript title="src/plugins/form-field-custom-text-input/render/index.ts"
import { wrapperWebComponent } from "@sinoform/plugin-sinoform-helpers";
import CustomTextInputRenderer from "./CustomTextInputRenderer";

// åŒ…è£…æˆReactç»„ä»¶å¹¶é»˜è®¤å¯¼å‡º
export default wrapperWebComponent(
  "form-field-custom-input-renderer",
  CustomTextInputRenderer
);
```

### åˆå§‹å®ç° `preview`

```typescript title="src/plugins/form-field-custom-text-input/preview/CustomTextInputPreview.ts"
import { SinoFormElement } from "@sinoform/plugin-sinoform-helpers";

/**
 * è‡ªå®šä¹‰æ–‡æœ¬æ¡†åœ¨è¡¨å•è®¾è®¡å™¨ä¸­é¢„è§ˆç»„ä»¶
 */
export default class CustomTextInputPreview extends SinoFormElement {
  override render() {
    this.innerHTML = "<div>è‡ªå®šä¹‰æ–‡æœ¬æ¡†é¢„è§ˆå›¾</div>";
  }
}
```

```typescript title="src/plugins/form-field-custom-text-input/preview/index.ts"
import { wrapperWebComponent } from "@sinoform/plugin-sinoform-helpers";
import CustomTextInputPreview from "./CustomTextInputPreview";

// å°†web componentsç»„ä»¶å°è£…æˆreactç»„ä»¶
export default wrapperWebComponent(
  "field-custom-text-input-preview",
  CustomTextInputPreview
);
```

### åˆå§‹å®ç° `config-panel`

```typescript title="src/plugins/form-field-custom-text-input/config-panel/CustomTextInputConfigPanel.ts"
import { SinoFormElement } from "@sinoform/plugin-sinoform-helpers";

/**
 * è‡ªå®šä¹‰æ–‡æœ¬æ¡†åœ¨è¡¨å•è®¾è®¡å™¨ä¸­çš„å­—æ®µå±æ€§é¢æ¿ç»„ä»¶
 */
export default class CustomTextInputConfigPanel extends SinoFormElement {
  override render() {
    this.innerHTML = "<div>è‡ªå®šä¹‰æ–‡æœ¬è¾“å…¥æ¡†çš„å­—æ®µå±æ€§é¢æ¿</div>";
  }
}
```

```typescript title="src/plugins/form-field-custom-text-input/config-panel/index.ts"
import { wrapperWebComponent } from "@sinoform/plugin-sinoform-helpers";
import CustomTextInputConfigPanel from "./CustomTextInputConfigPanel";

// å°†web componentsç»„ä»¶å°è£…æˆreactç»„ä»¶
export default wrapperWebComponent(
  "field-custom-text-input-config-panel",
  CustomTextInputConfigPanel
);
```

### æ³¨å†Œè¡¨å•æ§ä»¶

æ‰“å¼€ `src/index.ts` æ–‡ä»¶ï¼Œæ·»åŠ æ³¨å†Œä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```typescript
import AppSetting from "@sinoform/app-setting";
import { FormFieldGroup } from "@sinoform/types";
import EventNote from "@sinoui/icons/EventNote";

// æ³¨å†Œ custom-text-input è¡¨å•æ§ä»¶
AppSetting.formConfig.addField({
  // è¡¨å•æ§ä»¶ç±»å‹ï¼ˆç›¸å½“äºè¡¨å•æ§ä»¶çš„å”¯ä¸€èº«ä»½æ ‡è¯†ï¼Œä¸èƒ½é‡å¤ï¼‰
  type: "custom-text-input",
  // è¡¨å•æ§ä»¶åœ¨è®¾è®¡å™¨æ§ä»¶é¢æ¿ä¸­çš„åç§°
  title: "è‡ªå®šä¹‰å•è¡Œæ–‡æœ¬",
  // è¡¨å•æ§ä»¶åœ¨è®¾è®¡å™¨æ§ä»¶é¢æ¿ä¸­çš„åˆ†ç»„
  group: FormFieldGroup.normal,
  // æŒ‡å®šè¡¨å•æ§ä»¶åœ¨è®¾è®¡å™¨çš„æ§ä»¶é¢æ¿ä¸­çš„æ˜¾ç¤ºå›¾æ ‡
  icon: EventNote,
  render: React.lazy(() => import("./plugins/form-field-input/render")),
  preview: React.lazy(() => import("./plugins/form-field-input/preview")),
  configPanel: React.lazy(
    () => import("./plugins/form-field-input/config-panel")
  ),
});
```

æ³¨å†Œä¹‹åï¼Œå³å¯å¯åŠ¨æ’ä»¶é¡¹ç›®ï¼Œåœ¨æ™ºèƒ½è¡¨å•è®¾è®¡å™¨ä¸­ä½¿ç”¨æ­¤æ’ä»¶ï¼ŒæŸ¥çœ‹è¡¨å•æ§ä»¶çš„åˆå§‹æ•ˆæœã€‚

ç›®å‰æˆ‘ä»¬åªæ˜¯å¼€å‘å‡ºäº†è¡¨å•æ§ä»¶çš„åˆå§‹æ•ˆæœï¼Œä½†æ˜¯è¿˜æœ‰é‡è¦çš„ä¸¤ä»¶äº‹æƒ…éœ€è¦å¤„ç†ï¼Œå³ï¼š

- è¡¨å•æ§ä»¶ä¸è¡¨å•è”åŠ¨ï¼ŒåŒ…æ‹¬å€¼çš„åŒå‘ç»‘å®šã€è¡¨å•æ§ä»¶åªè¯»æ§åˆ¶ã€æ ‡ç­¾ä¸è¾“å…¥æ¡†çš„è”åŠ¨ç­‰
- ç»™è¡¨å•æ§ä»¶æ·»åŠ åˆé€‚çš„å±æ€§é…ç½®é¡¹ï¼Œè¿™æ ·åœ¨ä½¿ç”¨è®¾è®¡å™¨è®¾è®¡è¡¨å•æ—¶ï¼Œå¯ä»¥å®šåˆ¶è¡¨å•æ§ä»¶çš„è¡Œä¸º

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸€ä¸€è®²è§£è¿™äº›å†…å®¹ã€‚

## è¡¨å•æ§ä»¶ä¸è¡¨å•è”åŠ¨

è¡¨å•æ§ä»¶éœ€è¦ä¸è¡¨å•ä¹‹é—´è¿›è¡Œè”åŠ¨ï¼Œæ‰èƒ½åœ¨æ™ºèƒ½è¡¨å•ä¸­å®Œæˆå®ƒçš„åŸºæœ¬åŠŸèƒ½ã€‚æœ¬èŠ‚å°†ä¼šä»‹ç»ä»¥ä¸‹å››ä¸ªæ–¹é¢çš„å†…å®¹ï¼š

- [ç»‘å®š `name` å±æ€§](#ç»‘å®š-name-å±æ€§)
- [å€¼çš„åŒå‘ç»‘å®š](#å€¼çš„åŒå‘ç»‘å®š)
- [è¡¨å•æ§ä»¶åªè¯»æ§åˆ¶](#è¡¨å•æ§ä»¶åªè¯»æ§åˆ¶)
- [æ ‡ç­¾ä¸è¡¨å•æ§ä»¶è”åŠ¨](#æ ‡ç­¾ä¸è¡¨å•æ§ä»¶è”åŠ¨)

æ³¨ï¼šæœ¬èŠ‚æ‰€æœ‰çš„å†…å®¹å‡æ˜¯åœ¨å¢å¼º `CustomTextInputRenderer` ç»„ä»¶çš„ä»£ç ã€‚

### ç»‘å®š `name` å±æ€§

åœ¨æ¸²æŸ“è¡¨å•æ§ä»¶çš„ HTML æ—¶ï¼Œå¯ä»¥ä»å±æ€§å¯¹è±¡ä¸­è·å–åˆ° `name`ï¼Œå¹¶æŒ‡å®šç»™ `input` å…ƒç´ ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```typescript title="src/plugins/form-field-custom-text-input/render/CustomTextInputRenderer.ts" {5}
class CustomTextInputRenderer extends SinoFormElement {
  override render() {
    const { name } = this.props;

    this.innerHTML = `<input class="custom-text-input" name="${name}" />`;
  }
}
```

è¿™é‡Œçš„ `name` æ˜¯æ¥è‡ªè¡¨å•è®¾è®¡å™¨å­—æ®µå±æ€§é…ç½®é¢æ¿çš„**æ ‡è¯†**ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](assets/guide-formfield/custom-text-input-name-setting.png)

å¤‡æ³¨ï¼šåé¢ä¼šè®²åˆ°å¦‚ä½•å®šä¹‰é…ç½®é¢æ¿ã€‚

### åè¯è§£é‡Šï¼šè¡¨å•é¡¹

åœ¨è®²å€¼çš„åŒå‘ç»‘å®šä¹‹å‰ï¼Œå…ˆè§£é‡Šä¸€ä¸ªåè¯ï¼š**è¡¨å•é¡¹**ã€‚åœ¨æ™ºèƒ½è¡¨å•ä¸­ï¼Œå°†è¡¨å•æ§ä»¶æ‹–æ‹½åˆ°è¡¨å•ä¸­ï¼Œå°±å½¢æˆäº†ä¸€ä¸ª**è¡¨å•é¡¹**ã€‚**è¡¨å•é¡¹**æœ€é‡è¦çš„ä¸¤ä¸ªå±æ€§æ˜¯ï¼š

- è¡¨å•æ§ä»¶ç±»å‹ï¼Œå³è¡¨å•é¡¹å¯¹åº”çš„è¡¨å•æ§ä»¶ï¼ˆ`type`ï¼‰
- è¡¨å•é¡¹æ ‡è¯†ï¼Œåœ¨å­—æ®µå±æ€§é¢æ¿ä¸­å®šä¹‰ï¼Œä¹Ÿç§°ä¸ºè¡¨å•é¡¹åç§°ï¼ˆ`name`ï¼‰

ä¸€ä¸ªè¡¨å•é¡¹æœ‰äº†ä»¥ä¸Šä¸¤ä¸ªåŸºæœ¬å±æ€§ï¼Œå°±å¯ä»¥ç”¨æ­£ç¡®çš„è¡¨å•æ§ä»¶åœ¨è¡¨å•ä¸­å±•ç°æ­£ç¡®çš„è¡¨å•å­—æ®µå€¼ã€‚

### å€¼çš„åŒå‘ç»‘å®š

å€¼çš„åŒå‘ç»‘å®šæ˜¯æŒ‡å°†è¡¨å•é¡¹çš„å€¼ä¸è¡¨å•çŠ¶æ€ä¹‹é—´è¿›è¡Œç»‘å®šï¼š

- ç¬¬ä¸€ä¸ªæ–¹å‘ï¼šè¡¨å•çŠ¶æ€ä¸­çš„å€¼å‘ç”Ÿäº†å˜åŒ–ï¼Œéœ€è¦åŒæ­¥åˆ°è¡¨å•é¡¹ï¼Œè®©è¡¨å•é¡¹å¯¹åº”çš„è¡¨å•æ§ä»¶æ˜¾ç¤ºæœ€æ–°çš„è¡¨å•çŠ¶æ€ä¸­çš„å€¼ã€‚ä¾‹å¦‚åœ¨æ‰“å¼€è¯¦æƒ…é¡µæ—¶ï¼ŒåŠ è½½åˆ°è¯¦æƒ…é¡µæ•°æ®ï¼Œè¡¨å•çŠ¶æ€ä¸­å°±æœ‰ä»åç«¯è·å–åˆ°çš„æ‰€æœ‰è¡¨å•é¡¹çš„å€¼ã€‚è¿™æ—¶å°±éœ€è¦è¡¨å•æ§ä»¶å±•ç¤ºæ­£ç¡®çš„æ¥è‡ªåç«¯çš„è¡¨å•é¡¹å€¼ã€‚
- ç¬¬äºŒä¸ªæ–¹å‘ï¼šç”¨æˆ·åœ¨è¡¨å•æ§ä»¶ä¸­è¾“å…¥äº†æ–‡æœ¬ï¼Œæˆ–è€…åšå‡ºäº†é€‰é¡¹é€‰æ‹©ï¼ˆä¾‹å¦‚ä¸‹æ‹‰é€‰æ‹©æ¡†ï¼‰åï¼Œéœ€è¦å°†æ–°çš„å€¼åŒæ­¥ç»™è¡¨å•çŠ¶æ€ã€‚

è¡¨å•çŠ¶æ€ä¸­å­˜å‚¨äº†æ‰€æœ‰è¡¨å•é¡¹çš„å€¼ã€‚è¡¨å•çŠ¶æ€æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç±»ä¼¼ä¸‹é¢çš„ç¤ºä¾‹å¯¹è±¡ï¼š

```json
{
  "field_1": "è¿™æ˜¯ä¸€ä¸ªæ ‡é¢˜",
  "field_2": "é€‰é¡¹ä¸€",
  "field_5": "è¿™æ˜¯ä¸€ä¸ªæ–‡æœ¬"
}
```

ä¸Šé¢çš„ç¤ºä¾‹å¯¹è±¡åŒ…å«äº† `field_1`ã€ `field_2` å’Œ `field_5` è¡¨å•é¡¹çš„å€¼ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¡¨å•é¡¹åç§°ä»è¡¨å•çŠ¶æ€ä¸­è·å–åˆ°è¡¨å•é¡¹çš„å€¼ã€‚

è§£é‡Šè¿™ä¹ˆå¤šï¼Œæ˜¯ä¸ºäº†è®©å¤§å®¶äº†è§£æ™ºèƒ½è¡¨å•å¤„ç†è¡¨å•å€¼çš„åŸºæœ¬è¿‡ç¨‹ã€‚æˆ‘ä»¬æ”¹è¿› `CustomTextInputRenderer` çš„ä»£ç ï¼Œå®ç°å€¼çš„åŒå‘ç»‘å®šï¼š

```typescript title="src/plugins/form-field-custom-text-input/render/CustomTextInputRenderer.ts" {7,13}
import $ from "jQuery";

class CustomTextInputRenderer extends SinoFormElement {
  override render() {
    const { name, value = "" } = this.props;

    this.innerHTML = `<input class="custom-text-input" value="${value}" />`;

    const $input = $("input", this);

    // å€¼çš„åŒå‘ç»‘å®š
    // 1. ç›‘å¬ this.props ä¸­çš„ value å±æ€§å€¼å˜æ›´ï¼ŒåŒæ­¥åˆ° $input ä¸­
    // 2. ç›‘å¬ $input ä¸­çš„ change äº‹ä»¶ï¼Œå°†ç”¨æˆ·è¾“å…¥çš„å€¼é€šè¿‡ this.props.onChange å‘ŠçŸ¥æ™ºèƒ½è¡¨å•
    this.bindFormControl($input);
  }
}
```

### è¡¨å•æ§ä»¶åªè¯»æ§åˆ¶

æ™ºèƒ½è¡¨å•ä¼šç»™è¡¨å•æ§ä»¶çš„`render`ç»„ä»¶ä¼ é€’ `readOnly` å±æ€§ï¼Œå‘ŠçŸ¥è¡¨å•æ§ä»¶å½“å‰æ˜¯åªè¯»çš„è¿˜æ˜¯å¯ç¼–è¾‘çš„ã€‚æˆ‘ä»¬ä¼˜åŒ– `CustomTextInputRenderer` çš„ä»£ç ï¼Œä»¥å®ç°åªè¯»æ§åˆ¶ï¼š

```typescript title="src/plugins/form-field-custom-text-input/render/CustomTextInputRenderer.ts"
import $ from "jQuery";

class CustomTextInputRenderer extends SinoFormElement {
  override render() {
    const { readOnly } = this.props;

    this.innerHTML = `<input class="custom-text-input" ${
      readOnly ? `readonly="readonly"` : ""
    } />`;

    const $input = $("input", this);

    // ç›‘å¬ readOnly å±æ€§å€¼çš„å˜åŒ–ï¼ŒåŒæ­¥è®¾ç½® input å…ƒç´ çš„ readonly
    this.props.watch("readOnly", (readOnly) => {
      if (readOnly) {
        $input.attr("readonly", "readonly");
      } else {
        $input.removeAttr("readonly");
      }
    });
  }
}
```

### æ ‡ç­¾ä¸è¡¨å•æ§ä»¶è”åŠ¨

ä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œæˆ‘ä»¬éœ€è¦å°†è¡¨å•é¡¹ä¸­çš„æ ‡ç­¾ä¸è¡¨å•æ§ä»¶è¿›è¡Œè”åŠ¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```html
<div>
  <label for="userName">ç”¨æˆ·å</label>
  <input id="userName" />
</div>
```

ä¸Šé¢çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œ`label` å…ƒç´ çš„ `for` å±æ€§å’Œ `input` å…ƒç´ çš„ `id` å±æ€§æ˜¯ç›¸åŒçš„ï¼Œå®ƒä»¬ä¹‹é—´å°±ç»‘å®šäº†ï¼Œå½¢æˆè”åŠ¨æ•ˆæœï¼Œä¾‹å¦‚ï¼šå½“ç‚¹å‡» `label` æ ‡ç­¾ï¼Œç»‘å®šçš„ `input` ä¼šè‡ªåŠ¨è·å–åˆ°ç„¦ç‚¹ã€‚

æ™ºèƒ½è¡¨å•ä¼šæ¸²æŸ“å‡ºæ¯ä¸ªè¡¨å•é¡¹çš„æ ‡ç­¾å’Œ `for` å±æ€§å€¼ï¼Œå¹¶ç»™è¡¨å•æ§ä»¶ç»„ä»¶ä¼ é€’ `id` å±æ€§å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦åœ¨å®ç°è¡¨å•æ§ä»¶çš„ `render` ç»„ä»¶æ—¶ï¼Œä» `this.props` ä¸­è·å–åˆ° `id`ï¼Œå¹¶æŒ‡å®šç»™ `input` å…ƒç´ å³å¯ã€‚å¦‚ä¸‹é¢çš„ä»£ç æ‰€ç¤ºï¼š

```typescript title="src/plugins/form-field-custom-text-input/render/CustomTextInputRenderer.ts" {5}
class CustomTextInputRenderer extends SinoFormElement {
  override render() {
    const { id } = this.props;

    this.innerHTML = `<input class="custom-text-input" id="${id}" />`;
  }
}
```

### æ•´åˆåœ¨ä¸€èµ·

ç°åœ¨ï¼Œæˆ‘ä»¬å°†ä¸Šé¢çš„ä»£ç æ•´åˆåœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„ `CustomTextInputRenderer` å®ç°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```typescript title="src/plugins/form-field-custom-text-input/render/CustomTextInputRenderer.ts"
import $ from "jquery";
import { SinoFormElement } from "@sinoform/plugin-sinoform-helpers";
import "./CustomTextInputRenderer.css";

/**
 * è‡ªå®šä¹‰æ–‡æœ¬æ¡†åœ¨è¡¨å•ä¸­å±•ç¤ºçš„ç»„ä»¶
 */
export default class CustomTextInputRenderer extends SinoFormElement {
  override render() {
    const { value = "", readOnly, id, name } = this.props;
    this.innerHTML = `<input class="custom-text-input" name="${name}" id="${id}" value="${value}" ${
      readOnly ? `readonly="readonly"` : ""
    } />`;
    const $input = $("input", this);

    // å€¼çš„åŒå‘ç»‘å®š
    // 1. ç›‘å¬ this.props ä¸­çš„ value å±æ€§å€¼å˜æ›´ï¼ŒåŒæ­¥åˆ° $input ä¸­
    // 2. ç›‘å¬ $input ä¸­çš„ change äº‹ä»¶ï¼Œå°†ç”¨æˆ·è¾“å…¥çš„å€¼é€šè¿‡ this.props.onChange å‘ŠçŸ¥æ™ºèƒ½è¡¨å•
    this.bindFormControl($input);

    // ç›‘å¬ readOnly å±æ€§å€¼å˜æ›´
    this.props.watch("readOnly", (readOnly) => {
      if (readOnly) {
        $input.attr("readonly", "readonly");
      } else {
        $input.removeAttr("readonly");
      }
    });
  }
}
```

è‡³æ­¤ï¼Œæˆ‘ä»¬å¼€å‘å‡ºäº†åŠŸèƒ½å®Œæ•´çš„è¡¨å•æ§ä»¶ï¼Œå¿«åœ¨æ™ºèƒ½è¡¨å•ä¸­æŸ¥çœ‹ä¸€ä¸‹æ•ˆæœå§ã€‚

## å®Œå–„è¡¨å•æ§ä»¶çš„é…ç½®é¢æ¿

æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åœ¨é…ç½®é¢æ¿ä¸­æ·»åŠ ä¸€äº›è¡¨å•æ§ä»¶å¾—é…ç½®é¡¹ã€‚å¯ä»¥ä½¿ç”¨ jQuery å¼€å‘é…ç½®é¢æ¿ç»„ä»¶ï¼Œä½†æ˜¯ç›®å‰æ™ºèƒ½è¡¨å•æ²¡æœ‰å‘å¸ƒç”¨æ¥æ„å»ºé…ç½®é¢æ¿çš„ Web Component ç»„ä»¶ï¼Œå¦‚æœè¦æ±‚æ‚¨é€šè¿‡ jQuery å’Œ CSS å¼€å‘å‡ºä¸€å¥—ä¸æ™ºèƒ½è¡¨å•ä¿æŒé£æ ¼ä¸€è‡´çš„é…ç½®é¢æ¿ï¼Œå·¥ä½œé‡æœ‰ç‚¹å¤§ã€‚æ‰€ä»¥æˆ‘ä»¬ç›®å‰æ¨èæ‚¨ç›´æ¥ä½¿ç”¨æ™ºèƒ½è¡¨å•å°è£…å¥½çš„ React ç»„ä»¶æ¥å¿«é€Ÿå®ç°è¡¨å•æ§ä»¶çš„é…ç½®é¢æ¿ã€‚

æˆ‘ä»¬è°ƒæ•´ `config-panel/index.ts` å’Œ `config-panel/CustomTextInputConfigPanel.ts` ä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼š

```typescript title="src/plugins/form-field-custom-text-input/config-panel/index.ts"
import CustomTextInputConfigPanel from "./CustomTextInputConfigPanel";

export default CustomTextInputConfigPanel;
```

```typescript title="src/plugins/form-field-custom-text-input/config-panel/CustomTextInputConfigPanel.tsx"
import React from "react";
import TextInput from "@sinoui/core/TextInput";
import { FormItem } from "@sinoui/rx-core-form";
import type { FormFieldConfigPanelProps } from "@sinoform/types";

/**
 * å®šä¹‰ custom-text-input é…ç½®é¢æ¿çš„ç»„ä»¶
 */
export default function CustomTextInputConfigPanel({
  inSubform,
}: FormFieldConfigPanelProps) {
  return (
    <>
      <FormItem label="æ ‡é¢˜" name="title" required>
        <TextInput />
      </FormItem>
      <FormItem label="æ ‡è¯†" name="fieldName" required>
        <TextInput />
      </FormItem>
      {!inSubform && (
        <FormItem label="å­—æ®µæè¿°" name="helperText">
          <TextInput multiline />
        </FormItem>
      )}
    </>
  );
}
```

> æ³¨æ„ï¼šæˆ‘ä»¬éœ€è¦å°† `CustomTextInputConfigPanel.ts` æ–‡ä»¶çš„åç¼€æ”¹æˆ `.tsx`ã€‚

:::info æ•¬è¯·æœŸå¾…

åœ¨ä¸ä¹…çš„å°†æ¥ï¼ˆæ•°å‘¨å†…ï¼‰ï¼Œæˆ‘ä»¬ä¼šåœ¨ API æ–‡æ¡£ä¸­è¯´æ˜é…ç½®é¢æ¿ä¸­æœ‰å“ªäº›å¯ç”¨çš„ React ç»„ä»¶ã€‚æ‚¨ä»¥åå¯ä»¥å‚è€ƒ API æ–‡æ¡£ä¸­çš„ç»„ä»¶æ¸…å•ï¼Œå¿«é€Ÿå®šåˆ¶å‡ºæ‚¨éœ€è¦çš„è¡¨å•æ§ä»¶é…ç½®é¢æ¿ã€‚

:::

:::info å°çŸ¥è¯†ç‚¹

å¦‚æœæ‚¨å¯ä»¥é€šè¿‡ `render` ç»„ä»¶çš„ `config` å±æ€§è·å–åˆ°è¡¨å•é¡¹åœ¨è®¾è®¡å™¨ä¸­çš„é…ç½®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```typescript
class CustomTextInputRenderer extends SinoFormElement {
  override render() {
    const { config } = this.props;

    console.log("è¡¨å•é¡¹çš„é…ç½®", config);
  }
}
```

:::

è‡³æ­¤ï¼Œæˆ‘ä»¬å¼€å‘å‡ºäº†ä¸€ä¸ªå®Œæ•´çš„è¡¨å•æ§ä»¶ã€‚æ¥ä¸‹æ¥æ‚¨å¯ä»¥åœ¨æ™ºèƒ½è¡¨å•äº§å“ä¸­è°ƒè¯•è¯¥è¡¨å•æ§ä»¶ã€‚

## åœ¨æ™ºèƒ½è¡¨å•äº§å“ä¸­è°ƒè¯•æ’ä»¶

æ‰“å¼€[ç™»å½•é¡µ](http://121.30.232.162:18880/sso/)ï¼Œä½¿ç”¨è´¦å· `æ™ºèƒ½è¡¨å•ç®¡ç†å‘˜`ï¼ˆå¯†ç æ˜¯ï¼š`1qaz2wsx!`ï¼‰ ç™»å½•ç³»ç»Ÿï¼Œç„¶åé€‰æ‹©è¡¨å•è®¾è®¡å™¨ï¼Œè¿›å…¥æ™ºèƒ½è¡¨å•ç®¡ç†é¡µé¢ã€‚

æ‰“å¼€è¡¨å•`æ¼”ç¤ºè‡ªå®šä¹‰è¡¨å•é¡¹`ï¼Œåœ¨è¡¨å•è®¾è®¡ç•Œé¢å¯ä»¥åœ¨å·¦ä¾§çš„åŸºç¡€å­—æ®µä¸­çœ‹åˆ°æ–°å¢çš„è‡ªå®šä¹‰è¡¨å•é¡¹ï¼Œæ‹–åŠ¨å®ƒåˆ°ä¸­é—´åŒºåŸŸå°±å¯ä»¥å®Œæ•´è‡ªå®šä¹‰è¡¨å•é¡¹çš„æ·»åŠ ã€‚

![è®¾è®¡ç•Œé¢](assets/custominput-in-design.png)

æ‰“å¼€é¢„è§ˆç•Œé¢å°±å¯ä»¥å®æ—¶æµ‹è¯•è‡ªå®šä¹‰è¡¨å•é¡¹çš„åŠŸèƒ½ã€‚

![é¢„è§ˆç•Œé¢](assets/custominput-in-preview.png)

è¿›å…¥äº§å“ç¤ºä¾‹ç³»ç»Ÿï¼Œåœ¨`æ¼”ç¤ºè‡ªå®šä¹‰è¡¨å•é¡¹`çš„è¡¨å•è¯¦æƒ…é¡µä¸­ä¹Ÿå¯ä»¥æµ‹è¯•è‡ªå®šä¹‰è¡¨å•é¡¹ã€‚

![è¯¦æƒ…ç•Œé¢](assets/custominput-in-detail.png)
