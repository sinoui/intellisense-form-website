<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">部署智能表单 | intellisense-form</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://sinoui.github.io/intellisense-form-website/docs/deployment"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="部署智能表单 | intellisense-form"><meta data-react-helmet="true" name="description" content="目前的智能表单版本推荐与 sinomatrix 组合在一起使用，本文将会介绍智能表单的部署架构图，让您了解智能表单的组成部分。然后一一讲解如何部署每个组成部分。"><meta data-react-helmet="true" property="og:description" content="目前的智能表单版本推荐与 sinomatrix 组合在一起使用，本文将会介绍智能表单的部署架构图，让您了解智能表单的组成部分。然后一一讲解如何部署每个组成部分。"><link data-react-helmet="true" rel="icon" href="/intellisense-form-website/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://sinoui.github.io/intellisense-form-website/docs/deployment"><link data-react-helmet="true" rel="alternate" href="https://sinoui.github.io/intellisense-form-website/docs/deployment" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://sinoui.github.io/intellisense-form-website/docs/deployment" hreflang="x-default"><link rel="stylesheet" href="/intellisense-form-website/assets/css/styles.200426ba.css">
<link rel="preload" href="/intellisense-form-website/assets/js/runtime~main.447af4dd.js" as="script">
<link rel="preload" href="/intellisense-form-website/assets/js/main.08a573a6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/intellisense-form-website/"><div class="navbar__logo"><img src="/intellisense-form-website/img/home/logo.png" alt="智能表单" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/intellisense-form-website/img/home/logo.png" alt="智能表单" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">智能表单</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/intellisense-form-website/docs">文档</a></div><div class="navbar__items navbar__items--right"><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">🌜</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">🌞</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/intellisense-form-website/docs/">介绍</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/intellisense-form-website/docs/download">下载安装包</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_2fq0" href="/intellisense-form-website/docs/deployment">部署</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/intellisense-form-website/docs/deployment">部署智能表单</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/intellisense-form-website/docs/nav-in-sino-matrix">在sino-matrix中添加快捷导航</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/intellisense-form-website/docs/deployment-mongodb">安装 mongodb</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/intellisense-form-website/docs/deployment-ksql">部署 ksql</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/intellisense-form-website/docs/deployment-nodejs">安装 nodejs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/intellisense-form-website/docs/deployment-chrome">安装 chrome</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" tabindex="0" href="/intellisense-form-website/docs/dep-k8s/mongo-k8s">在 Kubernetes 中部署</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/intellisense-form-website/docs/config-custom">应用程序配置</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/intellisense-form-website/docs/plugin-index">插件开发</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/intellisense-form-website/docs/custom-css-pc">样式定制</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/intellisense-form-website/docs/sinoform-sdk-event-starter">扩展</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/intellisense-form-website/docs/deployment-faq">常见问题</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/intellisense-form-website/docs/changelog/changelog-v1.18.11">版本变更记录</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/intellisense-form-website/docs/custom-print-template">表单配置教程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/intellisense-form-website/docs/performance-test">性能测试</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/intellisense-form-website/docs/mobile/detail-page">移动端集成</a></div></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>部署智能表单</h1></header><p>目前的智能表单版本推荐与 sinomatrix 组合在一起使用，本文将会介绍智能表单的<a href="#%E9%83%A8%E7%BD%B2%E6%9E%B6%E6%9E%84%E5%9B%BE">部署架构图</a>，让您了解智能表单的组成部分。然后一一讲解如何部署每个组成部分。</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="部署架构图">部署架构图<a class="hash-link" href="#部署架构图" title="Direct link to heading">​</a></h2><p>智能表单的部署架构图如下：</p><p><img alt="智能表单的部署架构图" src="/intellisense-form-website/assets/images/deploy-structure-06cd80a4b48a38334391a7b2df13e449.jpg"></p><p>下面逐个解释每个区块的用途。</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="业务系统">业务系统<a class="hash-link" href="#业务系统" title="Direct link to heading">​</a></h3><p><code>业务系统</code> 是项目组已有的业务平台，如正在运营的 OA 项目。智能表单发布的表单是需要有一个宿主平台来展现表单页面的。根据集成方式不同，集成方案也不同。可以联系智能表单小组成员，商讨集成方案。（集成方案不影响部署方式）</p><blockquote><p>注意：智能表单也可以不依赖 <code>业务系统</code> 独立使用。但是这部分文档还没有整理出来，敬请期待。</p></blockquote><h3 class="anchor anchorWithStickyNavbar_31ik" id="业务数据库">业务数据库<a class="hash-link" href="#业务数据库" title="Direct link to heading">​</a></h3><p><code>业务数据库</code> 是项目组业务系统使用的关系型数据库。<code>智能表单</code>需要连接此数据库，将用户填写的表单数据存储在业务数据库中。</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="sino-matrix-集群">sino-matrix 集群<a class="hash-link" href="#sino-matrix-集群" title="Direct link to heading">​</a></h3><p>智能表单依赖的 sino-matrix 平台的服务有：</p><ul><li>统一授权</li><li>统一授权接口服务</li><li>单点登录</li><li>工作流设计器</li><li>工作流引擎</li><li>工作流平台适配服务</li></ul><h3 class="anchor anchorWithStickyNavbar_31ik" id="nginx">Nginx<a class="hash-link" href="#nginx" title="Direct link to heading">​</a></h3><p>Nginx 主要承担两个职责：</p><ul><li>职责一：作为智能表单前端代码的静态 Web 服务器</li><li>职责二：作为路由转发的反向代理服务器</li></ul><p>之所以有职责二，是因为业务系统和智能表单如果是同一个域（即访问的地址和端口号一致），那么在业务系统中集成智能表单页面将会比较简单，不用考虑浏览器跨域的要求。</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="智能表单jar">智能表单.jar<a class="hash-link" href="#智能表单jar" title="Direct link to heading">​</a></h3><p>智能表单后端部署 jar 包。</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="mongodb">MongoDB<a class="hash-link" href="#mongodb" title="Direct link to heading">​</a></h3><p>智能表单采用 MongoDB 存储表单配置数据、权限配置数据、意见数据、附件数据等。</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="总结">总结<a class="hash-link" href="#总结" title="Direct link to heading">​</a></h3><p>智能表单中的每一个区块都可以在同一台服务器部署或者分散到多台服务器部署。请您根据自身情况选择合适的部署模型即可。</p><p>智能表单也可以独立于 sino-matrix 平台单独运行，但是需要您实现很多扩展接口，来对接以下功能：</p><ul><li>单点登录</li><li>导航资源管理与授权</li><li>流程流转</li><li>应用的业务角色管理</li><li>查看部门人员组织机构信息</li></ul><p>后续会专门开辟一个系列的文章，讲解如何实现这些扩展接口，实现与非 sino-matrix 平台进行集成。</p><p>接下来将会一一讲解智能表单每个组成部分的安装和部署。</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="第一步环境准备">第一步：环境准备<a class="hash-link" href="#第一步环境准备" title="Direct link to heading">​</a></h2><p>请事先安装好以下软件：</p><ul><li>Java 8+</li><li>Nginx</li><li>Mongodb 3.0+ <a href="/intellisense-form-website/docs/deployment-mongodb">mongodb 安装步骤</a></li><li>nodejs <a href="/intellisense-form-website/docs/deployment-nodejs">nodejs 安装步骤</a></li><li>sino-matrix 1.6.37+<ul><li><a href="http://sinomatrix.gitee.io/sino-matrix-website/docs/deploy/prod/home" target="_blank" rel="noopener noreferrer">sino-matrix 部署手册</a></li><li><a href="http://47.93.34.153:10080/sino-matrix/sino-matrix/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer">sino-matrix 版本变更记录（从这里可以找到 sinomatrix 部署包）</a> 注意：访问此地址时可能会出现 ERR_UNSAFE_PORT 的情况，请参看<a href="https://blog.csdn.net/kjcxmx/article/details/118122483" target="_blank" rel="noopener noreferrer">这篇帖子</a>配置一下浏览器。</li></ul></li></ul><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>注意</h5></div><div class="admonition-content"><p>在准备好 SinoMatrix 环境后，需要在 SinoMatrix 数据库中执行以下 sql，切记在部署生产环境时不要忘记此步骤：</p><div class="codeBlockContainer_K1bP language-sql theme-code-block"><div class="codeBlockContent_hGly sql"><pre tabindex="0" class="prism-code language-sql codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> sinoepuias</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 设置业务角色不受限部门级别</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">update</span><span class="token plain"> sys_sub_rd_info </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> CREATE_FLOWROLE_TYPE </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;0&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> SUB_ID </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;67250&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 设置关闭表单发布审核</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">update</span><span class="token plain"> sys_config_info </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> PROPVAL</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;0&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> PROPID</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;sinoepFormAudit&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="第二步下载智能表单部署资源">第二步：下载智能表单部署资源<a class="hash-link" href="#第二步下载智能表单部署资源" title="Direct link to heading">​</a></h2><p>我们需要下载智能表单资源，并解压缩到服务器的任意目录中（如果是 Linux 服务器，需要注意文件访问权限）。例如，将文件放入 <code>/apps/sino-intellisense-form</code> 目录中。经过下载和解压缩，最终会形成下面的文件结构：</p><div class="codeBlockContainer_node_modules-@docusaurus-theme-classic-lib-next-theme-CodeBlock-styles-module"><div class="codeBlockContent_node_modules-@docusaurus-theme-classic-lib-next-theme-CodeBlock-styles-module"><pre class="prism-code language-undefined codeBlock_node_modules-@docusaurus-theme-classic-lib-next-theme-CodeBlock-styles-module thin-scrollbar" style="color:rgb(57, 58, 52);background-color:rgb(246, 248, 250)"><code class="codeBlockLines_node_modules-@docusaurus-theme-classic-lib-next-theme-CodeBlock-styles-module"><div><div class="file-tree-node" style="padding-left:0"><div class="file-tree-node-title">/apps/sino-intellisense-form<span style="color:rgb(153, 153, 136);font-size:14px;padding-left:1em;font-style:italic"></span></div><div class="file-tree-node-children"><div class="file-tree-node" style="padding-left:0"><div class="file-tree-node-title">|____ <strong style="font-size:16px">frontend</strong><span style="color:rgb(153, 153, 136);font-size:14px;padding-left:1em;font-style:italic">智能表单前端文件夹，包含的子目录和文件都是从<a href="#步骤二：下载智能表单前端发布包">前端压缩包</a>中解压出来的</span></div><div class="file-tree-node-children"><div class="file-tree-node" style="padding-left:24px"><div class="file-tree-node-title">|____ <!-- -->intellisense-form<span style="color:rgb(153, 153, 136);font-size:14px;padding-left:1em;font-style:italic"></span></div></div><div class="file-tree-node" style="padding-left:24px"><div class="file-tree-node-title">|____ <!-- -->intellisense-form-manager<span style="color:rgb(153, 153, 136);font-size:14px;padding-left:1em;font-style:italic"></span></div></div><div class="file-tree-node" style="padding-left:24px"><div class="file-tree-node-title">|____ <!-- -->intellisense-form-mobile<span style="color:rgb(153, 153, 136);font-size:14px;padding-left:1em;font-style:italic"></span></div></div></div></div><div class="file-tree-node" style="padding-left:0"><div class="file-tree-node-title">|____ <strong style="font-size:16px">backend</strong><span style="color:rgb(153, 153, 136);font-size:14px;padding-left:1em;font-style:italic">智能表单后端文件夹</span></div><div class="file-tree-node-children"><div class="file-tree-node" style="padding-left:24px"><div class="file-tree-node-title">|____ <strong style="font-size:16px"></strong><span style="color:rgb(153, 153, 136);font-size:14px;padding-left:1em;font-style:italic">需要<a href="#步骤三：下载智能表单后端发布包">下载</a></span></div></div><div class="file-tree-node" style="padding-left:24px"><div class="file-tree-node-title">|____ <strong style="font-size:16px">config</strong><span style="color:rgb(153, 153, 136);font-size:14px;padding-left:1em;font-style:italic"><a href="#步骤一：配置智能表单后端">后端配置</a>，可以通过工具生成</span></div><div class="file-tree-node-children"><div class="file-tree-node" style="padding-left:24px"><div class="file-tree-node-title">|____ <!-- -->application.yml<span style="color:rgb(153, 153, 136);font-size:14px;padding-left:1em;font-style:italic"></span></div></div><div class="file-tree-node" style="padding-left:24px"><div class="file-tree-node-title">|____ <!-- -->application-dev.yml<span style="color:rgb(153, 153, 136);font-size:14px;padding-left:1em;font-style:italic"></span></div></div><div class="file-tree-node" style="padding-left:24px"><div class="file-tree-node-title">|____ <!-- -->application-test.yml<span style="color:rgb(153, 153, 136);font-size:14px;padding-left:1em;font-style:italic"></span></div></div><div class="file-tree-node" style="padding-left:24px"><div class="file-tree-node-title">|____ <!-- -->application-prod.yml<span style="color:rgb(153, 153, 136);font-size:14px;padding-left:1em;font-style:italic"></span></div></div></div></div></div></div><div class="file-tree-node" style="padding-left:0"><div class="file-tree-node-title">|____ <strong style="font-size:16px">dynamic-font-server</strong><span style="color:rgb(153, 153, 136);font-size:14px;padding-left:1em;font-style:italic">智能表单字体服务文件夹。此服务是可选的，如果需要在 IE 11 中支持表单打印的pdf导出功能，需要部署字体服务<a href="#步骤四：下载字体服务发布包">下载</a></span></div></div></div></div></div></code></pre></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="步骤一创建目录">步骤一：创建目录<a class="hash-link" href="#步骤一创建目录" title="Direct link to heading">​</a></h3><p>需要手动创建以下目录</p><div class="codeBlockContainer_K1bP language-bash theme-code-block"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 创建前端文件夹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> -p /apps/sino-intellisense-form/frontend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 创建后端文件夹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> -p /apps/sino-intellisense-form/backend/config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 创建字体服务文件夹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> -p /apps/sino-intellisense-form/dynamic-font-server</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="步骤二下载智能表单前端发布包">步骤二：下载智能表单前端发布包<a class="hash-link" href="#步骤二下载智能表单前端发布包" title="Direct link to heading">​</a></h3><p>下载并解压缩<a>智能表单前端发布包</a>，如下所示：</p><div class="codeBlockContainer_K1bP language-bash theme-code-block"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 下载智能表单前端发布包</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 解压缩智能表单前端发布包</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">unzip</span><span class="token plain">  -d /apps/sino-intellisense-form/frontend</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="步骤三下载智能表单后端发布包">步骤三：下载智能表单后端发布包<a class="hash-link" href="#步骤三下载智能表单后端发布包" title="Direct link to heading">​</a></h3><p>下载并解压缩<a>智能表单后端发布包</a>，如下所示：</p><div class="codeBlockContainer_K1bP language-bash theme-code-block"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 下载智能表单后端发布包</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 将发布包移入 backend 目录中</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mv</span><span class="token plain">  /apps/sino-intellisense-form/backend</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="步骤四下载字体服务发布包">步骤四：下载字体服务发布包<a class="hash-link" href="#步骤四下载字体服务发布包" title="Direct link to heading">​</a></h3><p>下载并解压缩<a>字体服务发布包</a>，如下所示：</p><div class="codeBlockContainer_K1bP language-bash theme-code-block"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 下载智能表单字体服务包</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 解压缩智能表单字体服务包</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">unzip</span><span class="token plain">  -d /apps/sino-intellisense-form</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 解压后node_modules中的文件只有读写权限，需要提升文件的执行权限</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> /apps/sino-intellisense-form/dynamic-font-server </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> -R </span><span class="token number" style="color:#36acaa">777</span><span class="token plain"> node_modules</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>提示</h5></div><div class="admonition-content"><p>字体服务升级，解压服务包后执行提升文件执行权限的时候，注意脚本的执行路径是在<code>/apps/sino-intellisense-form/dynamic-font-server</code>下。</p></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="步骤五安装libreoffice">步骤五：安装LibreOffice<a class="hash-link" href="#步骤五安装libreoffice" title="Direct link to heading">​</a></h3><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</h5></div><div class="admonition-content"><p>若不需要附件在线预览功能，则可以跳过此步骤。</p></div></div><p>安装LibreOffice并开启在线预览功能：<a href="/intellisense-form-website/docs/config-file-online-preview">附件在线预览功能</a></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="第三步部署智能表单前端">第三步：部署智能表单前端<a class="hash-link" href="#第三步部署智能表单前端" title="Direct link to heading">​</a></h2><p>在前一章节，我们已经下载了前端发布包，现在我们需要配置 nginx，让 nginx 做两件事情，即：</p><ul><li>控制前端资源的访问</li><li>路由分发</li></ul><p>这两件事情通过以下 nginx 的配置即可完成：</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">必要的配置</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">参考的完整配置</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP language-nginx theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">nginx.conf</div><div class="codeBlockContent_hGly nginx"><pre tabindex="0" class="prism-code language-nginx codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">http {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # 配置业务系统服务（以实际业务为准）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  upstream main_web_app {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 127.0.0.1:8080;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # 配置智能表单后端服务（服务端口号以部署后端时的配置为基准）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  upstream sinoform_web_app {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 127.0.0.1:8085;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  server {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listen 80;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 解决文件上传大小限制</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client_max_body_size 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 指定智能表单静态资源的根路径</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    root /apps/sino-intellisense-form/frontend;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 默认请求转交给主应用处理</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location / {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      proxy_set_header Host $host;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      proxy_set_header X-Forwarded-Host $http_host;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      proxy_set_header X-Forwarded-Port $server_port;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      proxy_set_header X-Forwarded-Proto $scheme;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      proxy_set_header X-Real-IP $remote_addr;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      proxy_pass http://main_web_app;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 智能表单后端请求转交给智能表单后端服务处理</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location /apis/intellisense-form/ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      proxy_set_header Host $host;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      proxy_set_header X-Forwarded-Host $http_host;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      proxy_set_header X-Forwarded-Port $server_port;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      proxy_set_header X-Forwarded-Proto $scheme;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      proxy_set_header X-Real-IP $remote_addr;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      proxy_pass http://sinoform_web_app;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # 禁用 API 的浏览器缓存，以解决 IE11 怪异的 AJAX 缓存问题</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      proxy_hide_header Cache-Control;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      add_header Cache-Control no-store;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 配置主题入口文件不做缓存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location ~ .*/remote-entry.js$ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      add_header Cache-Control no-store;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 智能表单PC端应用（支持 history 模式，即单页面应用）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location /intellisense-form {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      index index.html index.htm;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      try_files $uri $uri/ /intellisense-form/index.html;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      add_header Cache-Control no-store;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 智能表单移动端应用（支持 history 模式，即单页面应用）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location /intellisense-form-mobile {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      index index.html index.htm;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      try_files $uri $uri/ /intellisense-form-mobile/index.html;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      add_header Cache-Control no-store;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 智能表单管理应用（支持 history 模式，即单页面应用）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location /intellisense-form-manager {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      index index.html index.htm;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      try_files $uri $uri/ /intellisense-form-manager/index.html;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      add_header Cache-Control no-store;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 缓存智能表单静态资源</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location ~ /intellisense-form.*\.(wasm|gif|jpg|jpeg|png|bmp|swf|js|css|md|pdf|ttf|ttc|eot|woff2|woff|svg)$ {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      expires 365d;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP language-nginx theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">nginx.conf</div><div class="codeBlockContent_hGly nginx"><pre tabindex="0" class="prism-code language-nginx codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain"># nginx 启动时使用的用户</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">user root;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 工作进程数，在生产环境中建议配置为 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">worker_processes 4;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">events {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # 单个工作进程可以允许同时建立外部连接的数量</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  worker_connections 10000;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  include       mime.types;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_type  application/octet-stream;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # 优化静态资源的访问性能</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sendfile        on;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # 启用 gzip 压缩，注意需要在安装 nginx 时启用 gzip 模块</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gzip  on;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gzip_buffers 16 8k;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gzip_comp_level 6;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gzip_http_version 1.1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gzip_min_length 256;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gzip_proxied any;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gzip_vary on;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gzip_types</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      text/xml application/xml application/atom+xml application/rss+xml application/xhtml+xml image/svg+xml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      text/javascript application/javascript application/x-javascript</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      text/x-json application/json application/x-web-app-manifest+json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      text/css text/plain text/x-component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      font/opentype application/x-font-ttf application/vnd.ms-fontobject</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      image/x-icon;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gzip_disable &quot;MSIE [1-6]\.&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # 配置业务系统服务（以实际业务为准）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  upstream main_web_app {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 127.0.0.1:8080;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # 配置智能表单后端服务（服务端口号以部署后端时的配置为基准）</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">  upstream sinoform_web_app {</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    server 127.0.0.1:8085;</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  server {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 启用 80 端口</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listen 80;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server_name localhost;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 解决文件上传大小限制</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client_max_body_size 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 指定智能表单静态资源的根路径</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    root /apps/sino-intellisense-form/frontend;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 默认请求转交给主应用处理</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location / {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      proxy_set_header Host $host;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      proxy_set_header X-Forwarded-Host $http_host;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      proxy_set_header X-Forwarded-Port $server_port;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      proxy_set_header X-Forwarded-Proto $scheme;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      proxy_set_header X-Real-IP $remote_addr;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      proxy_pass http://main_web_app;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 智能表单后端请求转交给智能表单后端服务处理</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    location /apis/intellisense-form/ {</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">      proxy_set_header Host $host;</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">      proxy_set_header X-Forwarded-Host $http_host;</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">      proxy_set_header X-Forwarded-Port $server_port;</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">      proxy_set_header X-Forwarded-Proto $scheme;</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">      proxy_set_header X-Real-IP $remote_addr;</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">      proxy_pass http://sinoform_web_app;</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">      # 禁用 API 的浏览器缓存，以解决 IE11 怪异的 AJAX 缓存问题</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">      proxy_hide_header Cache-Control;</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">      add_header Cache-Control no-store;</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 配置主题入口文件不做缓存</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    location ~ .*/remote-entry.js$ {</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">      add_header Cache-Control no-store;</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 智能表单PC端应用（支持 history 模式，即单页面应用）</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    location /intellisense-form {</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">      index index.html index.htm;</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">      try_files $uri $uri/ /intellisense-form/index.html;</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">      add_header Cache-Control no-store;</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 智能表单移动端应用（支持 history 模式，即单页面应用）</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    location /intellisense-form-mobile {</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">      index index.html index.htm;</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">      try_files $uri $uri/ /intellisense-form-mobile/index.html;</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">      add_header Cache-Control no-store;</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 智能表单管理应用（支持 history 模式，即单页面应用）</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    location /intellisense-form-manager {</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">      index index.html index.htm;</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">      try_files $uri $uri/ /intellisense-form-manager/index.html;</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">      add_header Cache-Control no-store;</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 缓存智能表单静态资源</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    location ~ /intellisense-form.*\.(wasm|gif|jpg|jpeg|png|bmp|swf|js|css|md|pdf|ttf|ttc|eot|woff2|woff|svg)$ {</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">      expires 365d;</span><br></span><span class="token-line docusaurus-highlight-code-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>上面提供了两份 nginx 配置。如果您是 nginx 高手，非常熟悉 nginx 配置，那么看“必要的配置”即可；如果您没有接触过 nginx，那么可以直接使用“参考的完整配置”，并启动 nginx。</p><p>调整完配置后，别忘了告诉 nginx 重新加载配置：</p><div class="codeBlockContainer_K1bP language-bash theme-code-block"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">nginx -s reload</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="第四步部署智能表单后端">第四步：部署智能表单后端<a class="hash-link" href="#第四步部署智能表单后端" title="Direct link to heading">​</a></h2><p>在部署智能表单后端前，先需要编写配置文件，然后通过 <code>java</code> 命令行启动后端项目。</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="步骤一配置智能表单后端">步骤一：配置智能表单后端<a class="hash-link" href="#步骤一配置智能表单后端" title="Direct link to heading">​</a></h3><p>通过下面的工具，生成智能表单后端配置：</p><p>将生成的 <code>config.zip</code> 文件解压到 <code>/apps/sino-intellisense-form/backend/config</code> 目录中：</p><div class="codeBlockContainer_K1bP language-bash theme-code-block"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">unzip</span><span class="token plain"> config.zip -d /apps/sino-intellisense-form/backend/config</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p>如果想更细致地配置智能表单，请移步 <a href="/intellisense-form-website/docs/config-custom">项目组自定义配置</a>，查看详细的配置说明。</p></blockquote><h3 class="anchor anchorWithStickyNavbar_31ik" id="步骤二启动智能表单">步骤二：启动智能表单<a class="hash-link" href="#步骤二启动智能表单" title="Direct link to heading">​</a></h3><p>进入 <code>/apps/sino-intellisense-form/backend</code>，运行智能表单 jar 包即可：</p><div class="codeBlockContainer_K1bP language-bash theme-code-block"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> /apps/sino-intellisense-form/backend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">nohup</span><span class="token plain"> java -Dspring.profiles.active</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">test -jar  </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> intellisenseform.log </span><span class="token operator" style="color:#393A34">&amp;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>启动大约需要 15 秒，15 秒后请访问 <a href="http://localhost:8085/actuator/info" target="_blank" rel="noopener noreferrer">http://localhost:8085/actuator/info</a> 地址，如果出现类似下面的信息，说明启动成功：</p><div class="codeBlockContainer_K1bP language-json theme-code-block"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;build&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;artifact&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;intellisenseform-bff&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;intellisenseform-bff&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2021-08-27T09:54:03.631Z&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;version&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1.11.2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;group&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;com.sinosoft&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>然后访问健康状态接口 <a href="http://localhost:8085/actuator/health" target="_blank" rel="noopener noreferrer">http://localhost:8085/actuator/health</a>，验证数据库的连通性。如果出现类似下面的信息，说明数据库连通没问题：</p><div class="codeBlockContainer_K1bP language-json theme-code-block"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;status&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;UP&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>在部分旧版本的麒麟操作系统中，通过 <code>nohup</code> 在后台启动智能表单时，可能找不到 <code>config</code> 目录下的配置文件。如果出现这样的问题，请通过类似下面的命令行启动：</p><div class="codeBlockContainer_K1bP language-bash theme-code-block"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">nohup</span><span class="token plain"> java -Dspring.config.location</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">classpath:/ </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -Dspring.config.location</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">file:/apps/sino-intellisense-form/backend/config/ </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -Dspring.profiles.active</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">test </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -jar sino-intellisense-form-v1.12.0.jar </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> intellisenseform.log </span><span class="token operator" style="color:#393A34">&amp;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>如果您有更好的方式解决此问题，请您不吝赐教。</p><p>请注意，先采用标准的方式启动，失败后再尝试上面的命令行。</p></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="第五步部署字体服务">第五步：部署字体服务<a class="hash-link" href="#第五步部署字体服务" title="Direct link to heading">​</a></h2><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</h5></div><div class="admonition-content"><p>字体服务不是必须安装的，只有在以下情况下我们才需要部署字体服务：</p><ol><li>需要使用表单打印的 pdf 导出功能</li><li>需要支持 IE 11 浏览器</li><li>下载表单打印 pdf 文件缓存，需要加速</li></ol></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="步骤一下载并安装-chrome">步骤一：下载并安装 chrome<a class="hash-link" href="#步骤一下载并安装-chrome" title="Direct link to heading">​</a></h3><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</h5></div><div class="admonition-content"><p>如果在 windows 操作系统中部署智能表单，则可以跳过此步骤。</p></div></div><p>具体安装步骤参见 <a href="/intellisense-form-website/docs/deployment-chrome">安装 Chrome</a>。</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="步骤二安装字体">步骤二：安装字体<a class="hash-link" href="#步骤二安装字体" title="Direct link to heading">​</a></h3><p>pdf 导出需要用到一些字体，请安装以下字体：</p><ul><li>仿宋<!-- -->_<!-- -->GB2312</li><li>宋体</li><li>楷体</li><li>黑体</li></ul><p>将字体文件放入服务器的 <code>/usr/share/fonts</code> 目录中，然后执行以下命令：</p><div class="codeBlockContainer_K1bP language-bash theme-code-block"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">fc-cache</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="步骤三修改-nginx-配置">步骤三：修改 Nginx 配置<a class="hash-link" href="#步骤三修改-nginx-配置" title="Direct link to heading">​</a></h3><p>在第三步中提到的 nginx 配置文件中添加关于字体服务的配置，具体内容如下：</p><div class="codeBlockContainer_K1bP language-nginx theme-code-block"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_eoMF">nginx.conf</div><div class="codeBlockContent_hGly nginx"><pre tabindex="0" class="prism-code language-nginx codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # 配置字体服务</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  upstream dynamic_font_server {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server 127.0.0.1:8088;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  #字体请求转交字体服务处理</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  location /apis/intellisense-form/dynamic-font {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy_set_header Host $host;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy_set_header X-Forwarded-Host $http_host;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy_set_header X-Forwarded-Port $server_port;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy_set_header X-Forwarded-Proto $scheme;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy_set_header X-Real-IP $remote_addr;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy_pass http://dynamic_font_server;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>调整完配置后，执行以下命令使 nginx 重新加载配置：</p><div class="codeBlockContainer_K1bP language-bash theme-code-block"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">nginx -s reload</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="步骤四启动字体服务">步骤四：启动字体服务<a class="hash-link" href="#步骤四启动字体服务" title="Direct link to heading">​</a></h3><p>进入 <code>/apps/sino-intellisense-form/dynamic-font-server</code>文件夹，执行以下启动命令：</p><div class="codeBlockContainer_K1bP language-bash theme-code-block"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">cd</span><span class="token plain"> /apps/sino-intellinse-form/dynamic-font-server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 启动字体服务</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> run server-start</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>可以执行以下命令查看服务是否成功启动：</p><div class="codeBlockContainer_K1bP language-shell theme-code-block"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> -ef </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">node</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>重新启动服务的命令如下：</p><div class="codeBlockContainer_K1bP language-bash theme-code-block"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token builtin class-name">cd</span><span class="token plain"> /apps/sino-intellinse-form/dynamic-font-server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 重新启动字体服务</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> run server-restart</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="第六步在您的业务系统中嵌入智能表单页面">第六步：在您的业务系统中嵌入智能表单页面<a class="hash-link" href="#第六步在您的业务系统中嵌入智能表单页面" title="Direct link to heading">​</a></h2><p>敬请期待，稍后介绍。</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="大功告成">大功告成<a class="hash-link" href="#大功告成" title="Direct link to heading">​</a></h2><p>恭喜您已成功部署智能表单，大功告成。请您使用智能表单吧。</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/intellisense-form-website/docs/download"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">下载安装包</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/intellisense-form-website/docs/nav-in-sino-matrix"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">在sino-matrix中添加快捷导航</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#部署架构图" class="table-of-contents__link toc-highlight">部署架构图</a><ul><li><a href="#业务系统" class="table-of-contents__link toc-highlight">业务系统</a></li><li><a href="#业务数据库" class="table-of-contents__link toc-highlight">业务数据库</a></li><li><a href="#sino-matrix-集群" class="table-of-contents__link toc-highlight">sino-matrix 集群</a></li><li><a href="#nginx" class="table-of-contents__link toc-highlight">Nginx</a></li><li><a href="#智能表单jar" class="table-of-contents__link toc-highlight">智能表单.jar</a></li><li><a href="#mongodb" class="table-of-contents__link toc-highlight">MongoDB</a></li><li><a href="#总结" class="table-of-contents__link toc-highlight">总结</a></li></ul></li><li><a href="#第一步环境准备" class="table-of-contents__link toc-highlight">第一步：环境准备</a></li><li><a href="#第二步下载智能表单部署资源" class="table-of-contents__link toc-highlight">第二步：下载智能表单部署资源</a><ul><li><a href="#步骤一创建目录" class="table-of-contents__link toc-highlight">步骤一：创建目录</a></li><li><a href="#步骤二下载智能表单前端发布包" class="table-of-contents__link toc-highlight">步骤二：下载智能表单前端发布包</a></li><li><a href="#步骤三下载智能表单后端发布包" class="table-of-contents__link toc-highlight">步骤三：下载智能表单后端发布包</a></li><li><a href="#步骤四下载字体服务发布包" class="table-of-contents__link toc-highlight">步骤四：下载字体服务发布包</a></li><li><a href="#步骤五安装libreoffice" class="table-of-contents__link toc-highlight">步骤五：安装LibreOffice</a></li></ul></li><li><a href="#第三步部署智能表单前端" class="table-of-contents__link toc-highlight">第三步：部署智能表单前端</a></li><li><a href="#第四步部署智能表单后端" class="table-of-contents__link toc-highlight">第四步：部署智能表单后端</a><ul><li><a href="#步骤一配置智能表单后端" class="table-of-contents__link toc-highlight">步骤一：配置智能表单后端</a></li><li><a href="#步骤二启动智能表单" class="table-of-contents__link toc-highlight">步骤二：启动智能表单</a></li></ul></li><li><a href="#第五步部署字体服务" class="table-of-contents__link toc-highlight">第五步：部署字体服务</a><ul><li><a href="#步骤一下载并安装-chrome" class="table-of-contents__link toc-highlight">步骤一：下载并安装 chrome</a></li><li><a href="#步骤二安装字体" class="table-of-contents__link toc-highlight">步骤二：安装字体</a></li><li><a href="#步骤三修改-nginx-配置" class="table-of-contents__link toc-highlight">步骤三：修改 Nginx 配置</a></li><li><a href="#步骤四启动字体服务" class="table-of-contents__link toc-highlight">步骤四：启动字体服务</a></li></ul></li><li><a href="#第六步在您的业务系统中嵌入智能表单页面" class="table-of-contents__link toc-highlight">第六步：在您的业务系统中嵌入智能表单页面</a></li><li><a href="#大功告成" class="table-of-contents__link toc-highlight">大功告成</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/intellisense-form-website/assets/js/runtime~main.447af4dd.js"></script>
<script src="/intellisense-form-website/assets/js/main.08a573a6.js"></script>
</body>
</html>