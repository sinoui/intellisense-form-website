"use strict";(self.webpackChunkintellisense_form_docs=self.webpackChunkintellisense_form_docs||[]).push([[5887],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return f}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),c=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=c(e.components);return r.createElement(p.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,p=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),u=c(n),f=a,g=u["".concat(p,".").concat(f)]||u[f]||m[f]||l;return n?r.createElement(g,i(i({ref:t},s),{},{components:n})):r.createElement(g,i({ref:t},s))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,i=new Array(l);i[0]=u;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:a,i[1]=o;for(var c=2;c<l;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},82660:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(67294),a=function(e){var t=e.version,n=e.type,a="font"===n?"dynamic-font-server-v"+t+".zip":"sino-intellisense-form-v"+t+"."+("backend"===n?"jar":"zip"),l="http://sino-intellisense-form.oss-cn-beijing.aliyuncs.com/v"+t+"/"+a;return r.createElement("a",{href:l},a)},l=function(e){var t=e.font,n=e.frontend,l=e.backend,i=e.version;return r.createElement("table",null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"发布包名称"),r.createElement("th",null,"下载链接"))),r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,"前端包",i===n?"（新版本）":""),r.createElement("td",null,r.createElement(a,{type:"frontend",version:n}))),r.createElement("tr",null,r.createElement("td",null,"后端包",i===l?"（新版本）":""),r.createElement("td",null,r.createElement(a,{type:"backend",version:l}))),t&&r.createElement("tr",null,r.createElement("td",null,"字体服务",i===t?"（新版本）":""),r.createElement("td",null,r.createElement(a,{type:"font",version:t})))))}},90262:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return p},contentTitle:function(){return c},metadata:function(){return s},toc:function(){return m},default:function(){return f}});var r=n(87462),a=n(63366),l=(n(67294),n(3905)),i=n(82660),o=["components"],p={id:"changelog-v1.13.0",title:"v1.13.0"},c=void 0,s={unversionedId:"changelog/changelog-v1.13.0",id:"changelog/changelog-v1.13.0",title:"v1.13.0",description:"1. 发布情况",source:"@site/docs/changelog/changelog-v1.13.0.mdx",sourceDirName:"changelog",slug:"/changelog/changelog-v1.13.0",permalink:"/intellisense-form-website/docs/changelog/changelog-v1.13.0",tags:[],version:"current",frontMatter:{id:"changelog-v1.13.0",title:"v1.13.0"},sidebar:"someSidebar",previous:{title:"v1.13.1",permalink:"/intellisense-form-website/docs/changelog/changelog-v1.13.1"},next:{title:"v1.13.0-beta.1",permalink:"/intellisense-form-website/docs/changelog/changelog-v1.13.0-beta.1"}},m=[{value:"1. 发布情况",id:"1-发布情况",children:[],level:2},{value:"2. 平滑升级",id:"2-平滑升级",children:[],level:2},{value:"3. sinomatrix 依赖变更",id:"3-sinomatrix-依赖变更",children:[],level:2},{value:"4. 主要特性",id:"4-主要特性",children:[{value:"4.1 打印输出",id:"41-打印输出",children:[],level:3}],level:2}],u={toc:m};function f(e){var t=e.components,p=(0,a.Z)(e,o);return(0,l.kt)("wrapper",(0,r.Z)({},u,p,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"1-发布情况"},"1. 发布情况"),(0,l.kt)("p",null,"发布日期：2022.1.10"),(0,l.kt)(i.Z,{version:"1.13.0",frontend:"1.13.0",backend:"1.13.0",font:"1.13.0",mdxType:"BundleList"}),(0,l.kt)("h2",{id:"2-平滑升级"},"2. 平滑升级"),(0,l.kt)("p",null,"可以从任何版本平滑升级到 v1.13.0。"),(0,l.kt)("p",null,"由于 1.13.0 版本打印输出功能需要加载字体文件，所以建议改进 Nginx 缓存策略，如下所示："),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-diff",metastring:'title="nginx.conf文件变更"',title:'"nginx.conf文件变更"'},"  # 缓存智能表单静态资源\n-  location ~ /intellisense-form.*\\.(gif|jpg|jpeg|png|bmp|swf|js|css|md|pdf)$ {\n+  location ~ /intellisense-form.*\\.(gif|jpg|jpeg|png|bmp|swf|js|css|md|pdf|ttf|ttc|eot|woff2|woff|svg)$ {\n    expires 365d;\n  }\n")),(0,l.kt)("p",null,"变更之后的 ",(0,l.kt)("inlineCode",{parentName:"p"},"nginx.conf")," 的静态资源缓存配置如下："),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx"},"  # 缓存智能表单静态资源\n  location ~ /intellisense-form.*\\.(gif|jpg|jpeg|png|bmp|swf|js|css|md|pdf|ttf|ttc|eot|woff2|woff|svg)$ {\n    expires 365d;\n  }\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},(0,l.kt)("em",{parentName:"strong"},"智能表单监听表单值变化（插件支持）的方式从 1.13.0 版本开始有了全新的方式，不再兼容以前的版本，项目中有涉及到此特性的部分需要做对应的调整。")),"具体方式如下："),(0,l.kt)("p",null,"值关联："),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'import AppSetting from "@sinoform/app-setting";\n\nAppSetting.listenFormChange(\n  "612df55ac9327f1383eb4bbb", // 指定此监听对某个表单可用\n  (prevValue, nextValue) => {\n    // 如果产品单价或者数量值发生变化，则重新计算\n    if (\n      nextValue.price !== prevValue.price ||\n      nextValue.count !== prevValue.count\n    ) {\n      nextValue.total = nextValue.price * nextValue.count;\n    }\n  }\n);\n')),(0,l.kt)("p",null,"异步值关联："),(0,l.kt)("p",null,"我们在实际应用中，有些值的计算需要从后端获取。 比如一个绩效考核表单，我们需要监听人员姓名(userName)的变化，然后从后端读取员工编号(workerId)的值， 此时我们可以使用 listenFormChangeAsync 来监听并处理异步值关联。具体代码如下："),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'import AppSetting from "@sinoform/app-setting";\n\nAppSetting.listenFormChangeAsync(\n  "612df55ac9327f1383eb4bbb",\n  async (prevValue, nextValue) => {\n    // 如果userName发生变化，则重新获取workerId的值\n    if (nextValue.userName !== prevValue.userName) {\n      nextValue.workerId = await getWorkIdByUserName(nextValue.userName);\n    }\n  }\n);\n')),(0,l.kt)("h2",{id:"3-sinomatrix-依赖变更"},"3. sinomatrix 依赖变更"),(0,l.kt)("p",null,"因 sinomatrix 缺陷影响了智能表单之前版本（v1.12.0 版本之前的版本）提供的功能，sinomatrix 已经修复，所以需要同步升级 sinomatrix 到 ",(0,l.kt)("a",{parentName:"p",href:"http://47.93.34.153:10080/sino-matrix/sino-matrix/blob/master/CHANGELOG.md"},"1.6.37")," 。（注意：访问此地址时可能会出现 ERR_UNSAFE_PORT 的情况，请参看",(0,l.kt)("a",{parentName:"p",href:"https://blog.csdn.net/kjcxmx/article/details/118122483"},"这篇帖子"),"配置一下浏览器。）"),(0,l.kt)("h2",{id:"4-主要特性"},"4. 主要特性"),(0,l.kt)("p",null,"v1.13.0 版本主要针对打印输出功能进行完善和提升。"),(0,l.kt)("h3",{id:"41-打印输出"},"4.1 打印输出"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"在线定制打印模板：支持使用默认模板\n直接使用默认模板打印，按照页面显示布局直接输出内容。\n",(0,l.kt)("img",{alt:"默认模板输出",src:n(47379).Z}))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"在线定制打印模板：支持设置字体、字号、字重、下划线、删除线、斜体等文本样式\n可以使用工具条上的按钮设置文本样式。\n",(0,l.kt)("img",{alt:"字体样式",src:n(70434).Z})),(0,l.kt)("p",{parentName:"li"},"输出效果如下："),(0,l.kt)("p",{parentName:"li"},(0,l.kt)("img",{alt:"自定义文本样式",src:n(15609).Z}))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"在线定制打印模板：支持设置单元格背景色")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"在线定制打印模板：支持合并单元格")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"在线定制打印模板：支持设置边框线、边框线样式和粗细支持调整\n自定义模板默认没有边框。支持设置表格边框线，支持实线、虚线不同样式，支持设置边框线颜色。\n",(0,l.kt)("img",{alt:"设置边框",src:n(32330).Z}))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"在线定制打印模板：支持设置单元格内部文本对齐方式\n智能表单在线自定义打印模板单元格内文本对齐方式默认为：水平方向左对齐，垂直方向居中对齐。可以使用工具条相关按钮改变文本对齐方式。")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"在线定制打印模板：支持自定义打印配置\n在设置打印模板时，还可以自定义打印配置，比如：页面尺寸、打印方向、页边距等；还可以自定义内容配置，比如：是否显示默认标题、行高是否自适应等。\n",(0,l.kt)("img",{alt:"打印设置",src:n(1655).Z}))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"完善打印分页方式（保证文字不被切分）")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"更完善的打印预览\n打印预览支持页面缩放。")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"支持显示页码打印\n打印预览时，可以设置显示页码，页码显示方式及显示位置也可自定义。\n",(0,l.kt)("img",{alt:"设置页码",src:n(59779).Z})),(0,l.kt)("p",{parentName:"li"},"显示效果："),(0,l.kt)("p",{parentName:"li"},(0,l.kt)("img",{alt:"显示页码",src:n(78496).Z}))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"支持带水印打印\n打印预览支持显示水印，设置水印支持",(0,l.kt)("inlineCode",{parentName:"p"},"用户名"),"、",(0,l.kt)("inlineCode",{parentName:"p"},"日期"),"、",(0,l.kt)("inlineCode",{parentName:"p"},"部门"),"、",(0,l.kt)("inlineCode",{parentName:"p"},"机构"),"的任意组合。\n",(0,l.kt)("img",{alt:"设置水印",src:n(13811).Z})))))}f.isMDXComponent=!0},32330:function(e,t,n){t.Z=n.p+"assets/images/border-setting-705540967717b185d7f33bee263fec92.png"},47379:function(e,t,n){t.Z=n.p+"assets/images/default-template-out-908ad375c54ba58207d2f54f71b9f312.png"},15609:function(e,t,n){t.Z=n.p+"assets/images/font-style-template-out-d332dd36a314d7c5be1bb2097d7cf4f9.png"},70434:function(e,t,n){t.Z=n.p+"assets/images/font-style-template-68b6dbd880a7ed75f56ee42e952fe9b8.png"},78496:function(e,t,n){t.Z=n.p+"assets/images/page-number-setting-out-5d2b62d0bf8bdd3ed2cdb933d754ea63.png"},59779:function(e,t,n){t.Z=n.p+"assets/images/page-number-setting-149ec415baefb99ed1c9b7740bcb8d83.png"},1655:function(e,t,n){t.Z=n.p+"assets/images/print-setting-327527c855b6e9eecac642d6a860fe5c.png"},13811:function(e,t,n){t.Z=n.p+"assets/images/watermark-setting-64c468360be37a3e5a782f50f106578e.png"}}]);