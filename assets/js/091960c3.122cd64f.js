"use strict";(self.webpackChunkintellisense_form_docs=self.webpackChunkintellisense_form_docs||[]).push([[8530],{96715:function(t,e,a){a.d(e,{Z:function(){return c}});var l=a(67294),n=a(48002),r=a(55171),i=a.n(r),u=a(58206),s={base00:"rgb(246, 248, 250)",base01:"rgb(245, 245, 245)",base02:"rgb(235, 235, 235)",base03:"#93a1a1",base04:"rgba(0, 0, 0, 0.3)",base05:"#586e75",base06:"#073642",base07:"rgb(54, 172, 170)",base08:"#d33682",base09:"rgb(227, 17, 108)",base0A:"#dc322f",base0B:"#859900",base0C:"#6c71c4",base0D:"#586e75",base0E:"#2aa198",base0F:"rgb(54, 172, 170)"},d={base00:"rgb(246, 248, 250)",base01:"rgb(245, 245, 245)",base02:"rgb(235, 235, 235)",base03:"#93a1a1",base04:"rgba(0, 0, 0, 0.3)",base05:"#586e75",base06:"#073642",base07:"rgb(248, 248, 242)",base08:"#d33682",base09:"rgb(255, 121, 198)",base0A:"#dc322f",base0B:"#859900",base0C:"#6c71c4",base0D:"#586e75",base0E:"#2aa198",base0F:"rgb(248, 248, 242)"},p=a(87462),o=a(57596),m=a(23746),k=function(t){var e=t.language,a=t.code,n=t.children,r=(0,l.useState)(!1),i=r[0],u=r[1];(0,l.useEffect)((function(){u(!0)}),[]);var s=(0,o.Z)();return l.createElement(m.ZP,(0,p.Z)({},m.lG,{theme:s,language:e,code:a,key:String(i)}),n)},c=function(t){var e=t.src,a=t.title,r=t.shouldCollapse,p=t.enableClipboardNode,o=void 0!==p&&p,m=(0,n.Z)().isDarkTheme?d:s,c=JSON.stringify(e),b=(0,l.useState)(!1),N=b[0],g=b[1];return l.createElement("div",{className:"sinoui-json-viewer"},a&&l.createElement(k,{language:"json",code:c},(function(t){var n=t.style;return l.createElement(l.Fragment,null,l.createElement("div",{style:n,className:"sinoui-json-viewer__title"},a),l.createElement(i(),{style:n,src:e,theme:m,displayObjectSize:!1,displayDataTypes:!1,indentWidth:2,shouldCollapse:r,name:!1,enableClipboard:o}))})),l.createElement("button",{className:"sinoui-json-viewer__copy-button clean-btn",onClick:function(){(0,u.Z)(c),g(!0),setTimeout((function(){g(!1)}),2e3)}},N?"已拷贝":"拷贝"))}},18434:function(t,e,a){a.d(e,{Z:function(){return r}});var l=a(67294),n=a(51048),r=function(t){if(!(0,n.Z)())return null;var e=a(96715).Z;return l.createElement(e,t)}},27267:function(t,e,a){a.r(e),a.d(e,{frontMatter:function(){return s},contentTitle:function(){return d},metadata:function(){return p},toc:function(){return o},default:function(){return k}});var l=a(87462),n=a(63366),r=(a(67294),a(3905)),i=a(18434),u=["components"],s={id:"config-app-roles",title:"应用角色配置"},d=void 0,p={unversionedId:"config-app-roles",id:"config-app-roles",title:"应用角色配置",description:"表单应用可以开启应用角色功能。应用角色功能需要有角色管理和授权服务与之对接。默认与 sinomatrix 统一授权系统中的角色管理和授权服务集成。第三方系统集成应完成下列接口的定制。",source:"@site/docs/config-app-roles.mdx",sourceDirName:".",slug:"/config-app-roles",permalink:"/intellisense-form-website/docs/config-app-roles",tags:[],version:"current",frontMatter:{id:"config-app-roles",title:"应用角色配置"}},o=[{value:"查询用户在指定岗位下的业务角色接口",id:"查询用户在指定岗位下的业务角色接口",children:[],level:2},{value:"授权业务角色接口",id:"授权业务角色接口",children:[],level:2},{value:"取消授权业务角色接口",id:"取消授权业务角色接口",children:[],level:2}],m={toc:o};function k(t){var e=t.components,a=(0,n.Z)(t,u);return(0,r.kt)("wrapper",(0,l.Z)({},m,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"表单应用可以开启应用角色功能。应用角色功能需要有角色管理和授权服务与之对接。默认与 sinomatrix 统一授权系统中的角色管理和授权服务集成。第三方系统集成应完成下列接口的定制。"),(0,r.kt)("h2",{id:"查询用户在指定岗位下的业务角色接口"},"查询用户在指定岗位下的业务角色接口"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"支持版本：1.13.7")),(0,r.kt)("p",null,"接口如下："),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-http"},"POST http://<统一授权服务地址>/uias/resource/getFlowRoles?para=<JSON数据>\n")),(0,r.kt)("p",null,"其中 ",(0,r.kt)("inlineCode",{parentName:"p"},"para")," 请求参数是一个 JSON 对象字符串，形如："),(0,r.kt)(i.Z,{title:"para 请求参数值示例",src:{userId:"4028d19468ef07680168ef3c8ac10001",deptId:"18043",subId:"67250"},mdxType:"JSONViewer"}),(0,r.kt)("p",null,"JSON 对象中的属性说明如下："),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"属性名"),(0,r.kt)("th",{parentName:"tr",align:null},"说明"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"userId"),(0,r.kt)("td",{parentName:"tr",align:null},"用户 id")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"deptId"),(0,r.kt)("td",{parentName:"tr",align:null},"部门 id")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"subId"),(0,r.kt)("td",{parentName:"tr",align:null},"子系统 id")))),(0,r.kt)("p",null,"返回的响应如下："),(0,r.kt)(i.Z,{title:"成功的响应",src:{status:"1",rolesInfo:[{rolesId:"role1",rolesName:"角色1"},{rolesId:"role2",rolesName:"角色2"}]},mdxType:"JSONViewer"}),(0,r.kt)(i.Z,{title:"失败的响应",src:{status:"-1",msg:"获取角色失败"},mdxType:"JSONViewer"}),(0,r.kt)("p",null,"第三方服务接口配置项："),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="application.yml"',title:'"application.yml"'},"urls:\n  get-flow-roles-by-user-id-and-dept-id-url: /custom-get-flow-roles-by-user-id-and-dept-id\n")),(0,r.kt)("h2",{id:"授权业务角色接口"},"授权业务角色接口"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"支持版本： 1.13.7")),(0,r.kt)("p",null,"接口如下："),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-http"},"GET http://<统一授权地址>/uias/resource/saveFroleUserList?uid=<用户id>&deptId=<部门id>&subId=<子系统id>&froleid=<业务角色id>&auther=<操作人id>\n")),(0,r.kt)("p",null,"请求参数说明："),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"请求参数名称"),(0,r.kt)("th",{parentName:"tr",align:null},"说明"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"uid"),(0,r.kt)("td",{parentName:"tr",align:null},"用户 id。被授权人的用户编号。")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"deptId"),(0,r.kt)("td",{parentName:"tr",align:null},"部门 id。被授权人的部门编号。")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"subId"),(0,r.kt)("td",{parentName:"tr",align:null},"子系统 id。")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"froleid"),(0,r.kt)("td",{parentName:"tr",align:null},"业务角色 id")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"auther"),(0,r.kt)("td",{parentName:"tr",align:null},"操作授权的人员 id")))),(0,r.kt)("p",null,"响应数据如下："),(0,r.kt)(i.Z,{title:"成功的响应",src:{status:"1"},mdxType:"JSONViewer"}),(0,r.kt)(i.Z,{title:"失败的响应",src:{status:"-1",msg:"角色授权失败"},mdxType:"JSONViewer"}),(0,r.kt)("p",null,"第三方服务接口配置项："),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="application.yml"',title:'"application.yml"'},"urls:\n  auth-user-role-url: /custom-auth-user-role-url\n")),(0,r.kt)("h2",{id:"取消授权业务角色接口"},"取消授权业务角色接口"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"支持版本： 1.13.7")),(0,r.kt)("p",null,"接口如下："),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-http"},"GET http://<统一授权服务地址>/uias/resource/deleteFTypeUser?uid=<用户id>&deptId=<部门id>&subId=<子系统id>&froleid=<业务角色id>&auther=<操作人id>\n")),(0,r.kt)("p",null,"请求参数说明："),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"请求参数名称"),(0,r.kt)("th",{parentName:"tr",align:null},"说明"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"uid"),(0,r.kt)("td",{parentName:"tr",align:null},"用户 id。被授权人的用户编号。")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"deptId"),(0,r.kt)("td",{parentName:"tr",align:null},"部门 id。被授权人的部门编号。")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"subId"),(0,r.kt)("td",{parentName:"tr",align:null},"子系统 id。")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"froleid"),(0,r.kt)("td",{parentName:"tr",align:null},"业务角色 id")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"auther"),(0,r.kt)("td",{parentName:"tr",align:null},"操作授权的人员 id")))),(0,r.kt)("p",null,"响应数据如下："),(0,r.kt)(i.Z,{title:"成功的响应",src:{status:"1"},mdxType:"JSONViewer"}),(0,r.kt)(i.Z,{title:"失败的响应",src:{status:"-1",msg:"取消角色授权失败"},mdxType:"JSONViewer"}),(0,r.kt)("p",null,"第三方服务接口配置项："),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="application.yml"',title:'"application.yml"'},"urls:\n  un-auth-user-role-url: /custom-un-auth-user-role-url\n")))}k.isMDXComponent=!0}}]);