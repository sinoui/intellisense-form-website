"use strict";(self.webpackChunkintellisense_form_docs=self.webpackChunkintellisense_form_docs||[]).push([[6592],{3905:function(e,a,t){t.d(a,{Zo:function(){return p},kt:function(){return d}});var o=t(67294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function n(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);a&&(o=o.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,o)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?n(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function c(e,a){if(null==e)return{};var t,o,r=function(e,a){if(null==e)return{};var t,o,r={},n=Object.keys(e);for(o=0;o<n.length;o++)t=n[o],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)t=n[o],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=o.createContext({}),s=function(e){var a=o.useContext(l),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},p=function(e){var a=s(e.components);return o.createElement(l.Provider,{value:a},e.children)},v={inlineCode:"code",wrapper:function(e){var a=e.children;return o.createElement(o.Fragment,{},a)}},m=o.forwardRef((function(e,a){var t=e.components,r=e.mdxType,n=e.originalType,l=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),m=s(t),d=r,u=m["".concat(l,".").concat(d)]||m[d]||v[d]||n;return t?o.createElement(u,i(i({ref:a},p),{},{components:t})):o.createElement(u,i({ref:a},p))}));function d(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var n=t.length,i=new Array(n);i[0]=m;var c={};for(var l in a)hasOwnProperty.call(a,l)&&(c[l]=a[l]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var s=2;s<n;s++)i[s]=t[s];return o.createElement.apply(null,i)}return o.createElement.apply(null,t)}m.displayName="MDXCreateElement"},15497:function(e,a,t){t.r(a),t.d(a,{frontMatter:function(){return c},contentTitle:function(){return l},metadata:function(){return s},toc:function(){return p},default:function(){return m}});var o=t(87462),r=t(63366),n=(t(67294),t(3905)),i=["components"],c={id:"feature-faq",title:"功能常见问题"},l=void 0,s={unversionedId:"feature-faq",id:"feature-faq",title:"功能常见问题",description:"1. 表单发布失败",source:"@site/docs/feature-faq.md",sourceDirName:".",slug:"/feature-faq",permalink:"/intellisense-form-website/docs/feature-faq",tags:[],version:"current",frontMatter:{id:"feature-faq",title:"功能常见问题"},sidebar:"someSidebar",previous:{title:"部署常见问题",permalink:"/intellisense-form-website/docs/deployment-faq"},next:{title:"工单",permalink:"/intellisense-form-website/docs/issue"}},p=[{value:"1. 表单发布失败",id:"1-表单发布失败",children:[{value:"1.0. 通用解决方案",id:"10-通用解决方案",children:[],level:3},{value:"1.1. 表单发布失败，后端报资源同步异常。",id:"11-表单发布失败后端报资源同步异常",children:[{value:"出现此问题的版本",id:"出现此问题的版本",children:[],level:4},{value:"出现场景",id:"出现场景",children:[],level:4},{value:"问题现象",id:"问题现象",children:[],level:4},{value:"解决方案",id:"解决方案",children:[],level:4}],level:3},{value:"1.2. 表单发布失败，sino-matrix-uias 服务报字段长度不够的异常",id:"12-表单发布失败sino-matrix-uias-服务报字段长度不够的异常",children:[{value:"出现此问题的版本",id:"出现此问题的版本-1",children:[],level:4},{value:"出现场景",id:"出现场景-1",children:[],level:4},{value:"问题现象",id:"问题现象-1",children:[],level:4},{value:"解决方案",id:"解决方案-1",children:[],level:4}],level:3}],level:2},{value:"2. 下一办理人较多情况，工作流流转失败",id:"2-下一办理人较多情况工作流流转失败",children:[{value:"问题描述",id:"问题描述",children:[],level:3},{value:"报错信息",id:"报错信息",children:[],level:3},{value:"解决方案",id:"解决方案-2",children:[],level:3}],level:2},{value:"3. 访问应用系统时，控制台报无法解析的错误",id:"3-访问应用系统时控制台报无法解析的错误",children:[{value:"问题描述",id:"问题描述-1",children:[],level:3},{value:"报错信息",id:"报错信息-1",children:[],level:3},{value:"排查方式",id:"排查方式",children:[],level:3}],level:2}],v={toc:p};function m(e){var a=e.components,c=(0,r.Z)(e,i);return(0,n.kt)("wrapper",(0,o.Z)({},v,c,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"1-表单发布失败"},"1. 表单发布失败"),(0,n.kt)("h3",{id:"10-通用解决方案"},"1.0. 通用解决方案"),(0,n.kt)("p",null,"如果您遇到表单发布失败的情况，可以先查看一下 FAQ 中记录的现象和解决方案。如果没有类似的，可以联系智能表单工作组成员（在微信群“智能表单技术交流”中沟通或者直接与个人联系均可）解决问题。在联系智能表单工作组成员时，请先按照下面的步骤收集一下日志："),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"收集智能表单后台的日志"),(0,n.kt)("li",{parentName:"ul"},"收集 sino-matrix-uias 的日志")),(0,n.kt)("h3",{id:"11-表单发布失败后端报资源同步异常"},"1.1. 表单发布失败，后端报资源同步异常。"),(0,n.kt)("h4",{id:"出现此问题的版本"},"出现此问题的版本"),(0,n.kt)("p",null,"从 1.11.0 版本开始有此问题。"),(0,n.kt)("h4",{id:"出现场景"},"出现场景"),(0,n.kt)("p",null,"智能表单在与新搭建的 sino-matrix 平台使用时，如果 sinomatrix 的系统管理中没有添加任何资源，必出现此问题。"),(0,n.kt)("h4",{id:"问题现象"},"问题现象"),(0,n.kt)("p",null,"点击表单发布失败，查看智能表单的后台日志，出现类似下面的异常日志："),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'2021-09-22 22:59:06.011  INFO 76403 --- [io-18087-exec-3] c.s.resource.manager.ResourceManager     : 保存资源，\n返回值:<html><head><title>Apache Tomcat/7.0.73 - Error report</title><style>\x3c!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color : black;}A.name {color : black;}HR {color : #525D76;}--\x3e</style> </head><body><h1>HTTP Status 500 - java.lang.RuntimeException: org.springframework.transaction.UnexpectedRollbackException: Transaction rolled back because it has been marked as rollback-only</h1><HR size="1" noshade="noshade"><p><b>type</b> Exception report</p><p><b>message</b> <u>java.lang.RuntimeException: org.springframework.transaction.UnexpectedRollbackException: Transaction rolled back because it has been marked as rollback-only</u></p><p><b>description</b> <u>The server encountered an internal error that prevented it from fulfilling this request.</u></p><p><b>exception</b> <pre>org.jboss.resteasy.spi.UnhandledException: java.lang.RuntimeException: org.springframework.transaction.UnexpectedRollbackException: Transaction rolled back because it has been marked as rollback-only\norg.springframework.transaction.UnexpectedRollbackException: Transaction rolled back because it has been marked as rollback-only\n        at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:724)\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:485)\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:291)\n        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:208)\n        at com.sun.proxy.$Proxy55.saveResource(Unknown Source)\n')),(0,n.kt)("p",null,"上面的日志表示调用创建资源接口错误。再查看一下 uias 服务的异常日志，如果出现类似下面的日志，那么可以断定是此问题："),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash",metastring:"{2}","{2}":!0},"2021-09-22 23:01:00 [ ERROR ] - method:com.sinosoft.authorization.module.system.resource.dao.SysResourceDAOImpl.save(SysResourceDAOImpl.java:65)  save failed\norg.springframework.dao.DataIntegrityViolationException: not-null property references a null or transient value: com.sinosoft.authorization.module.system.resource.po.SysResource.sysRtypeSub; nested exception is org.hibernate.PropertyValueException: not-null property references a null or transient value: com.sinosoft.authorization.module.system.resource.po.SysResource.sysRtypeSub\n        at org.springframework.orm.hibernate4.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:184)\n        at org.springframework.orm.hibernate4.HibernateTemplate.doExecute(HibernateTemplate.java:344)\n        ... 300 more\n")),(0,n.kt)("p",null,"最重要的是第二行日志，表示 ",(0,n.kt)("inlineCode",{parentName:"p"},"sysRtypeSub")," 字段为空。这个字段是表示资源类型，是从相关联的资源（如父资源、临近资源）中获取到的。所以，当没有找到相关资源时，此字段就会为空。"),(0,n.kt)("h4",{id:"解决方案"},"解决方案"),(0,n.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,n.kt)("div",{parentName:"div",className:"admonition-heading"},(0,n.kt)("h5",{parentName:"div"},(0,n.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,n.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,n.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,n.kt)("div",{parentName:"div",className:"admonition-content"},(0,n.kt)("p",{parentName:"div"},"在后期版本中会修复此问题。在问题修复之前，请按照文档进行操作。"))),(0,n.kt)("p",null,"需要在系统管理中为自己的应用（即与智能表单集成的应用）创建一个顶级资源，如下图所示："),(0,n.kt)("p",null,(0,n.kt)("img",{src:t(97119).Z})),(0,n.kt)("h3",{id:"12-表单发布失败sino-matrix-uias-服务报字段长度不够的异常"},"1.2. 表单发布失败，sino-matrix-uias 服务报字段长度不够的异常"),(0,n.kt)("h4",{id:"出现此问题的版本-1"},"出现此问题的版本"),(0,n.kt)("p",null,"从 1.11.0 版本开始有此问题。"),(0,n.kt)("h4",{id:"出现场景-1"},"出现场景"),(0,n.kt)("p",null,"从低版本的 sino-matrix 升级到 1.6.30+ 版本的 sino-matrix-uias 之后，如果没有执行升级 SQL，则会出现此问题。"),(0,n.kt)("h4",{id:"问题现象-1"},"问题现象"),(0,n.kt)("p",null,"点击表单发布失败，查看智能表单后台日志，出现类似下面的异常日志："),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'2021-09-22 22:59:06.011  INFO 76403 --- [io-18087-exec-3] c.s.resource.manager.ResourceManager     : 保存资源，\n返回值:<html><head><title>Apache Tomcat/7.0.73 - Error report</title><style>\x3c!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color : black;}A.name {color : black;}HR {color : #525D76;}--\x3e</style> </head><body><h1>HTTP Status 500 - java.lang.RuntimeException: org.springframework.transaction.UnexpectedRollbackException: Transaction rolled back because it has been marked as rollback-only</h1><HR size="1" noshade="noshade"><p><b>type</b> Exception report</p><p><b>message</b> <u>java.lang.RuntimeException: org.springframework.transaction.UnexpectedRollbackException: Transaction rolled back because it has been marked as rollback-only</u></p><p><b>description</b> <u>The server encountered an internal error that prevented it from fulfilling this request.</u></p><p><b>exception</b> <pre>org.jboss.resteasy.spi.UnhandledException: java.lang.RuntimeException: org.springframework.transaction.UnexpectedRollbackException: Transaction rolled back because it has been marked as rollback-only\norg.springframework.transaction.UnexpectedRollbackException: Transaction rolled back because it has been marked as rollback-only\n        at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:724)\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:485)\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:291)\n        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:208)\n        at com.sun.proxy.$Proxy55.saveResource(Unknown Source)\n')),(0,n.kt)("p",null,"上面的日志表示调用创建资源接口错误。再查看一下 sino-matrix-uias 服务的异常日志，如果出现类似下面的日志，那么可以断定是此问题："),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash",metastring:"{2,6}","{2,6}":!0},"2021-10-19 14:37:54 [ WARN ] - method:org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions(SqlExceptionHelper.java:145)  SQL Error: 1406, SQLState: 22001\n2021-10-19 14:37:54 [ ERROR ] - method:org.hibernate.engine.jdbc.spi.SqlExceptionHelper.logExceptions(SqlExceptionHelper.java:147)  Data truncation: Data too long for column 'WORKID' at row 1\n2021-10-19 14:37:54 [ ERROR ] - method:org.hibernate.engine.jdbc.batch.internal.BatchingBatch.performExecution(BatchingBatch.java:119)  HHH000315: Exception executing batch [could not perform addBatch]\n2021-10-19 14:37:54 [ ERROR ] - method:com.sinosoft.authorization.util.tools.FromProcessUtil.saveModFromByProcess(FromProcessUtil.java:91)  org.springframework.dao.DataIntegrityViolationException: could not perform addBatch; SQL [insert into SYS_ROLE_SYST (SUB_ID, RESOURCE_ID, RLSY_NO, RLSY_NM, ORDER_NO, SUPER_RLSY_ID, MEMO, AUTHER, STATUS, TIME, SYS_DEF, ROLE_TYPE, TREE_ID, MODIFIY_TIME, MODIFIER, FLAG, DATA_SCOPE, WORKID, RLSY_ID) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]; nested exception is org.hibernate.exception.DataException: could not perform addBatch\n2021-10-19 14:37:54 [ ERROR ] - method:com.sinosoft.sinoep.api.auditlog.service.impl.SysAuditLogServiceImpl.logProcessSave(SysAuditLogServiceImpl.java:162)  接口执行异常\norg.springframework.dao.DataIntegrityViolationException: could not perform addBatch; SQL [insert into SYS_ROLE_SYST (SUB_ID, RESOURCE_ID, RLSY_NO, RLSY_NM, ORDER_NO, SUPER_RLSY_ID, MEMO, AUTHER, STATUS, TIME, SYS_DEF, ROLE_TYPE, TREE_ID, MODIFIY_TIME, MODIFIER, FLAG, DATA_SCOPE, WORKID, RLSY_ID) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]; nested exception is org.hibernate.exception.DataException: could not perform addBatch\n        at org.springframework.orm.hibernate4.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:167)\n        at org.springframework.orm.hibernate4.HibernateTemplate.doExecute(HibernateTemplate.java:344)\n        at org.springframework.orm.hibernate4.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:309)\n        at org.springframework.orm.hibernate4.HibernateTemplate.find(HibernateTemplate.java:865)\n        at com.sinosoft.authorization.module.system.resource.dao.SysResourceDAOImpl.getSysResourceByWorkId(SysResourceDAOImpl.java:1084)\n        at com.sinosoft.authorization.module.system.resource.service.SysResourceServiceImpl.getSysResourceByWorkId(SysResourceServiceImpl.java:941)\n        at com.sinosoft.authorization.module.system.resource.service.SysResourceServiceImpl$$FastClassBySpringCGLIB$$8e07c941.invoke(<generated>)\n        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:720)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\n        at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)\n        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n        at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:655)\n        at com.sinosoft.authorization.module.system.resource.service.SysResourceServiceImpl$$EnhancerBySpringCGLIB$$8f0a27c0.getSysResourceByWorkId(<generated>)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:302)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\n        at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)\n        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:208)\n        at com.sun.proxy.$Proxy86.getSysResourceByWorkId(Unknown Source)\n        at com.sinosoft.authorization.util.tools.FromProcessUtil.saveResRlsyCtrl(FromProcessUtil.java:1210)\n        at com.sinosoft.authorization.util.tools.FromProcessUtil.saveRlsyResAuthCtrl(FromProcessUtil.java:1190)\n        at com.sinosoft.authorization.util.tools.FromProcessUtil.saveRlsyResAuth(FromProcessUtil.java:1144)\n        at com.sinosoft.authorization.util.tools.FromProcessUtil.saveFromByProcess(FromProcessUtil.java:1058)\n        at com.sinosoft.authorization.util.tools.FromProcessUtil.saveModFromByProcess(FromProcessUtil.java:84)\n        at com.sinosoft.sinoep.api.auditlog.dao.impl.SysAuditLogDaoImpl.logProcessSave(SysAuditLogDaoImpl.java:144)\n        at com.sinosoft.sinoep.api.auditlog.service.impl.SysAuditLogServiceImpl.logProcessSave(SysAuditLogServiceImpl.java:148)\n        at com.sinosoft.sinoep.api.auditlog.service.impl.SysAuditLogServiceImpl$$FastClassBySpringCGLIB$$835830af.invoke(<generated>)\n        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\n        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:720)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\n        at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)\n        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n        at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)\n        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n        at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:655)\n        at com.sinosoft.sinoep.api.auditlog.service.impl.SysAuditLogServiceImpl$$EnhancerBySpringCGLIB$$2e394fab.logProcessSave(<generated>)\n        at sun.reflect.GeneratedMethodAccessor855.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:302)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\n        at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)\n        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)\n        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:208)\n        at com.sun.proxy.$Proxy80.logProcessSave(Unknown Source)\n        at com.alibaba.dubbo.common.bytecode.Wrapper13.invokeMethod(Wrapper13.java)\n        at com.alibaba.dubbo.rpc.proxy.javassist.JavassistProxyFactory$1.doInvoke(JavassistProxyFactory.java:46)\n        at com.alibaba.dubbo.rpc.proxy.AbstractProxyInvoker.invoke(AbstractProxyInvoker.java:72)\n        at com.alibaba.dubbo.rpc.protocol.InvokerWrapper.invoke(InvokerWrapper.java:53)\n        at com.alibaba.dubbo.rpc.filter.ExceptionFilter.invoke(ExceptionFilter.java:64)\n        at com.alibaba.dubbo.rpc.protocol.ProtocolFilterWrapper$1.invoke(ProtocolFilterWrapper.java:91)\n        at com.alibaba.dubbo.monitor.support.MonitorFilter.invoke(MonitorFilter.java:75)\n        at com.alibaba.dubbo.rpc.protocol.ProtocolFilterWrapper$1.invoke(ProtocolFilterWrapper.java:91)\n        at com.alibaba.dubbo.rpc.filter.TimeoutFilter.invoke(TimeoutFilter.java:42)\n        at com.alibaba.dubbo.rpc.protocol.ProtocolFilterWrapper$1.invoke(ProtocolFilterWrapper.java:91)\n        at com.alibaba.dubbo.rpc.protocol.dubbo.filter.TraceFilter.invoke(TraceFilter.java:78)\n        at com.alibaba.dubbo.rpc.protocol.ProtocolFilterWrapper$1.invoke(ProtocolFilterWrapper.java:91)\n        at com.alibaba.dubbo.rpc.filter.ContextFilter.invoke(ContextFilter.java:70)\n        at com.alibaba.dubbo.rpc.protocol.ProtocolFilterWrapper$1.invoke(ProtocolFilterWrapper.java:91)\n        at com.alibaba.dubbo.rpc.filter.GenericFilter.invoke(GenericFilter.java:132)\n        at com.alibaba.dubbo.rpc.protocol.ProtocolFilterWrapper$1.invoke(ProtocolFilterWrapper.java:91)\n        at com.alibaba.dubbo.rpc.filter.ClassLoaderFilter.invoke(ClassLoaderFilter.java:38)\n        at com.alibaba.dubbo.rpc.protocol.ProtocolFilterWrapper$1.invoke(ProtocolFilterWrapper.java:91)\n        at com.alibaba.dubbo.rpc.filter.EchoFilter.invoke(EchoFilter.java:38)\n        at com.alibaba.dubbo.rpc.protocol.ProtocolFilterWrapper$1.invoke(ProtocolFilterWrapper.java:91)\n        at com.alibaba.dubbo.rpc.proxy.InvokerInvocationHandler.invoke(InvokerInvocationHandler.java:52)\n        at com.alibaba.dubbo.common.bytecode.proxy12.logProcessSave(proxy12.java)\n        at sun.reflect.GeneratedMethodAccessor855.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:137)\n        at org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:288)\n        at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:242)\n        at org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:229)\n        at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:356)\n        at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:179)\n        at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:220)\n        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:56)\n        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:51)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\n        at com.alibaba.dubbo.rpc.protocol.rest.DubboHttpServer$RestHandler.handle(DubboHttpServer.java:86)\n        at com.alibaba.dubbo.remoting.http.servlet.DispatcherServlet.service(DispatcherServlet.java:64)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\n        at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:123)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:121)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\n        at com.sinosoft.filter.CrossOriginControl.doFilter(CrossOriginControl.java:38)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\n        at org.springframework.orm.hibernate4.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:151)\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:110)\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:492)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:165)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104)\n        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:1025)\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:452)\n        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1201)\n        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:654)\n        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:317)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n        at java.lang.Thread.run(Thread.java:748)\nCaused by: org.hibernate.exception.DataException: could not perform addBatch\n        at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:135)\n        at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)\n        at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)\n        at org.hibernate.engine.jdbc.batch.internal.BatchingBatch.performExecution(BatchingBatch.java:114)\n        at org.hibernate.engine.jdbc.batch.internal.BatchingBatch.doExecuteBatch(BatchingBatch.java:101)\n        at org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl.execute(AbstractBatchImpl.java:149)\n        at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.executeBatch(JdbcCoordinatorImpl.java:198)\n        at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:372)\n        at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:286)\n        at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:339)\n        at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:62)\n        at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1205)\n        at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1262)\n        at org.hibernate.internal.QueryImpl.list(QueryImpl.java:101)\n        at org.springframework.orm.hibernate4.HibernateTemplate$29.doInHibernate(HibernateTemplate.java:875)\n        at org.springframework.orm.hibernate4.HibernateTemplate$29.doInHibernate(HibernateTemplate.java:865)\n        at org.springframework.orm.hibernate4.HibernateTemplate.doExecute(HibernateTemplate.java:341)\n        ... 136 more\nCaused by: java.sql.BatchUpdateException: Data truncation: Data too long for column 'WORKID' at row 1\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n        at com.mysql.cj.util.Util.handleNewInstance(Util.java:210)\n        at com.mysql.cj.util.Util.getInstance(Util.java:185)\n        at com.mysql.cj.util.Util.getInstance(Util.java:192)\n        at com.mysql.cj.jdbc.exceptions.SQLError.createBatchUpdateException(SQLError.java:218)\n        at com.mysql.cj.jdbc.ClientPreparedStatement.executeBatchSerially(ClientPreparedStatement.java:864)\n        at com.mysql.cj.jdbc.ClientPreparedStatement.executeBatchInternal(ClientPreparedStatement.java:453)\n        at com.mysql.cj.jdbc.StatementImpl.executeBatch(StatementImpl.java:839)\n        at com.alibaba.druid.pool.DruidPooledPreparedStatement.executeBatch(DruidPooledPreparedStatement.java:566)\n        at org.hibernate.engine.jdbc.batch.internal.BatchingBatch.performExecution(BatchingBatch.java:110)\n        ... 149 more\nCaused by: com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: Data too long for column 'WORKID' at row 1\n        at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:104)\n        at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:960)\n        at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1116)\n        at com.mysql.cj.jdbc.ClientPreparedStatement.executeBatchSerially(ClientPreparedStatement.java:843)\n        ... 153 more\n")),(0,n.kt)("p",null,"从上面的日志中可以分析得到失败的原因是 ",(0,n.kt)("inlineCode",{parentName:"p"},"SYS_ROLE_SYST")," 表的 ",(0,n.kt)("inlineCode",{parentName:"p"},"WORKID")," 字段长度不够。"),(0,n.kt)("h4",{id:"解决方案-1"},"解决方案"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"在 ",(0,n.kt)("a",{parentName:"p",href:"http://47.93.34.153:10080/sino-matrix/sino-matrix/blob/master/CHANGELOG.md#v1630-20210826"},"sino-matrix 变更记录"),"中已经补充了此解决方案的 SQL 语句。")),(0,n.kt)("p",null,"打开 ",(0,n.kt)("inlineCode",{parentName:"p"},"uias")," 数据库，执行以下语句，扩大 ",(0,n.kt)("inlineCode",{parentName:"p"},"SYS_ROLE_SYST.WORKID")," 字段的长度："),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"-- 扩大 SYS_ROLE_SYST.WORKID 字段的长度为 100\n-- oracle\n-- mysql\nalter table SYS_ROLE_SYST\n    modify WORKID varchar(100) null;\n")),(0,n.kt)("h2",{id:"2-下一办理人较多情况工作流流转失败"},"2. 下一办理人较多情况，工作流流转失败"),(0,n.kt)("h3",{id:"问题描述"},"问题描述"),(0,n.kt)("p",null,"当下一流程指定的办理人较多时，发送流程提示",(0,n.kt)("inlineCode",{parentName:"p"},"流程提交失败"),"。"),(0,n.kt)("h3",{id:"报错信息"},"报错信息"),(0,n.kt)("p",null,"智能表单后端日志中的报错信息如下："),(0,n.kt)("p",null,(0,n.kt)("img",{src:t(75586).Z})),(0,n.kt)("h3",{id:"解决方案-2"},"解决方案"),(0,n.kt)("p",null,"找到工作流服务 workflow 的 tomcat，修改 tomcat 的 server.xml 配置文件，在工作流端口对应的 Connector 标签添加属性配置 ",(0,n.kt)("inlineCode",{parentName:"p"},'maxHttpHeaderSize="102400"'),"，例如："),(0,n.kt)("p",null,(0,n.kt)("img",{src:t(1552).Z})),(0,n.kt)("p",null,"修改完配置后，重启工作流服务的 tomcat。"),(0,n.kt)("h2",{id:"3-访问应用系统时控制台报无法解析的错误"},"3. 访问应用系统时，控制台报无法解析的错误"),(0,n.kt)("h3",{id:"问题描述-1"},"问题描述"),(0,n.kt)("p",null,"访问智能表单系统时，页面一直加载不出来，F12 控制台报错。"),(0,n.kt)("h3",{id:"报错信息-1"},"报错信息"),(0,n.kt)("p",null,"控制台输出错误如下："),(0,n.kt)("p",null,(0,n.kt)("img",{src:t(40126).Z})),(0,n.kt)("h3",{id:"排查方式"},"排查方式"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"验证一下控制台报的两个找不到的文件是否真的找不到；"),(0,n.kt)("li",{parentName:"ol"},"验证这台电脑的浏览器是否不支持 ... 语法； 可分别在浏览器控制台执行下面两段代码：")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ts"},"x = [1, 2];\ny = [...x, 3];\n// 和\nt = { x: 1 };\nz = { ...t, y: 2 };\n")),(0,n.kt)("ol",{start:3},(0,n.kt)("li",{parentName:"ol"},"如果第 2 条成立，验证一下插件包中是否包含 ..."),(0,n.kt)("li",{parentName:"ol"},"如果第 3 条成立，则改进一下插件项目的 webpack 配置。")))}m.isMDXComponent=!0},40126:function(e,a,t){a.Z=t.p+"assets/images/form-app-error-fef9fbbdcd29b5484992f7b3dc314e09.png"},97119:function(e,a,t){a.Z=t.p+"assets/images/init-resource-06743a68ae51cb225c2114d71b7f75c4.png"},75586:function(e,a,t){a.Z=t.p+"assets/images/to-flow-error-1-5811a22c2a8bc8675c1b9ef54c04f45a.png"},1552:function(e,a,t){a.Z=t.p+"assets/images/to-flow-error-2-ba8c38104f896bec1b17d5623147e9f3.png"}}]);