"use strict";(self.webpackChunkintellisense_form_docs=self.webpackChunkintellisense_form_docs||[]).push([[1007],{98448:function(e,n,t){var a=t(67294);n.Z=function(e){var n=e.children,t=e.hidden,r=e.className;return a.createElement("div",{role:"tabpanel",hidden:t,className:r},n)}},97225:function(e,n,t){t.d(n,{Z:function(){return c}});var a=t(87462),r=t(67294),i=t(51048),l=t(22713);var o=function(){var e=(0,r.useContext)(l.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},s=t(35242),d=t(86010),p="tabItem_1uMI";function m(e){var n,t,i,l=e.lazy,m=e.block,c=e.defaultValue,u=e.values,f=e.groupId,h=e.className,v=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),k=null!=u?u:v.map((function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes}})),g=(0,s.lx)(k,(function(e,n){return e.value===n.value}));if(g.length>0)throw new Error('Docusaurus error: Duplicate values "'+g.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var x=null===c?c:null!=(n=null!=c?c:null==(t=v.find((function(e){return e.props.default})))?void 0:t.props.value)?n:null==(i=v[0])?void 0:i.props.value;if(null!==x&&!k.some((function(e){return e.value===x})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+x+'" but none of its children has the corresponding value. Available values are: '+k.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var _=o(),N=_.tabGroupChoices,y=_.setTabGroupChoices,b=(0,r.useState)(x),w=b[0],E=b[1],C=[],$=(0,s.o5)().blockElementScrollPositionUntilNextRender;if(null!=f){var Z=N[f];null!=Z&&Z!==w&&k.some((function(e){return e.value===Z}))&&E(Z)}var j=function(e){var n=e.currentTarget,t=C.indexOf(n),a=k[t].value;a!==w&&($(n),E(a),null!=f&&y(f,a))},z=function(e){var n,t=null;switch(e.key){case"ArrowRight":var a=C.indexOf(e.currentTarget)+1;t=C[a]||C[0];break;case"ArrowLeft":var r=C.indexOf(e.currentTarget)-1;t=C[r]||C[C.length-1]}null==(n=t)||n.focus()};return r.createElement("div",{className:"tabs-container"},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,d.Z)("tabs",{"tabs--block":m},h)},k.map((function(e){var n=e.value,t=e.label,i=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:w===n?0:-1,"aria-selected":w===n,key:n,ref:function(e){return C.push(e)},onKeyDown:z,onFocus:j,onClick:j},i,{className:(0,d.Z)("tabs__item",p,null==i?void 0:i.className,{"tabs__item--active":w===n})}),null!=t?t:n)}))),l?(0,r.cloneElement)(v.filter((function(e){return e.props.value===w}))[0],{className:"margin-vert--md"}):r.createElement("div",{className:"margin-vert--md"},v.map((function(e,n){return(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==w})}))))}function c(e){var n=(0,i.Z)();return r.createElement(m,(0,a.Z)({key:String(n)},e))}},6486:function(e,n,t){t.d(n,{Z:function(){return i}});var a=t(67294),r=t(51048),i=function(e){var n=(0,a.lazy)(e);return function(e){return(0,r.Z)()?a.createElement(a.Suspense,{fallback:null},a.createElement(n,e)):null}}((function(){return Promise.all([t.e(532),t.e(4043),t.e(4063),t.e(283),t.e(1199),t.e(6471)]).then(t.bind(t,46471))}))},89407:function(e,n,t){t.d(n,{jT:function(){return a},Fx:function(){return r},Xc:function(){return i},wq:function(){return l},Pm:function(){return o}});var a=[{imgUrl:"/img/home/feat-drag.png",title:"拖拽制作表单",content:"通过简单的拖拽，就能够制作各式各样的业务表单。"},{imgUrl:"/img/home/feat-flow.png",title:"流程设计",content:"在线设计业务流程，可视化的方式梳理并展现企业核心业务的流程。"},{imgUrl:"/img/home/feat-code.png",title:"无代码编程",content:"制作一款应用，不需要编写一行代码。将应用制作的能力交给客户自己。"},{imgUrl:"/img/home/feat-data.png",title:"数据可视化分析",content:"在线定制仪表盘，以图表的方式展现应用数据，辅助您的业务分析与决策。"},{imgUrl:"/img/home/feat-plugin.png",title:"插件",content:"智能表单独有的插件机制，通过各种各样的插件，可以与其他产品组合使用，如wps、书生排版、盖章、手写签名。"},{imgUrl:"/img/home/feat-api.png",title:"开放API",content:"智能表单开放大量API，与企业内部现有系统均可继承使用。"},{imgUrl:"/img/home/feat-theme.png",title:"主题定制",content:"智能表单内置多套主题，并可以根据用户风格定制主题，让您告别五花八门的UI体验。"},{imgUrl:"/img/home/feat-mobile.png",title:"移动优先",content:"智能表单发布的应用支持PC、Pad和手机三端使用。一次设计，三端使用。"},{imgUrl:"/img/home/feat-cloud.png",title:"云支持",content:"智能表单采用的是云原生微服务架构研发的，即可裸机部署，又可以在Kubernetes云上部署。"},{imgUrl:"/img/home/feat-gch.png",title:"国产化适配",content:"智能表单支持在国产化浏览器中使用，并可在国产化操作系统中部署。"},{imgUrl:"/img/home/feat-gxn.png",title:"高性能",content:"智能表单能够支撑单应用100万数据的快速响应。通过定制的专业服务，能达到单应用1000+万数据的快速响应。"},{imgUrl:"/img/home/feat-template.png",title:"应用模板",content:"智能表单包含大量应用模板，您可以快速开始一个相似应用的搭建。"}],r="LTAI5t9P53pvZFxKehSQ6WKA",i="PvPMsVvMU6qgr6LYh4SqKP0cqn2MUy",l="oss-cn-beijing",o="sino-intellisense-form"},53565:function(e,n,t){var a=t(67294),r=t(21764);n.Z=function(e){var n=e.children,t=e.type,i=e.isAlpha,l=(0,r.Z)(t,i);return a.createElement("a",{href:null==l?void 0:l.url},n,l?"(v"+l.version+")":"")}},1778:function(e,n,t){var a=t(67294),r=t(77446),i=t(21764);n.Z=function(e){var n,t,l,o,s,d,p=e.type,m=(0,i.Z)(p),c="frontend"===p?("\n        # 下载智能表单前端发布包\n        wget "+(null!=(n=null==m?void 0:m.url)?n:"")+"\n        # 解压缩智能表单前端发布包\n        unzip "+(null!=(t=null==m?void 0:m.name)?t:"")+" -d /apps/sino-intellisense-form/frontend\n        ").trim().replace(/^ +/gm,""):"font"===p?("\n        # 下载智能表单字体服务包\n        wget "+(null!=(l=null==m?void 0:m.url)?l:"")+"\n        # 解压缩智能表单字体服务包\n        unzip "+(null!=(o=null==m?void 0:m.name)?o:"")+" -d /apps/sino-intellisense-form\n        # 解压后node_modules中的文件只有读写权限，需要提升文件的执行权限\n        cd /apps/sino-intellisense-form/dynamic-font-server && chmod -R 777 node_modules\n        ").trim().replace(/^ +/gm,""):("\n        # 下载智能表单后端发布包\n        wget "+(null!=(s=null==m?void 0:m.url)?s:"")+"\n        # 将发布包移入 backend 目录中\n        mv "+(null!=(d=null==m?void 0:m.name)?d:"")+" /apps/sino-intellisense-form/backend\n        ").trim().replace(/^ +/gm,"");return a.createElement(r.Z,{className:"language-bash"},c)}},49788:function(e,n,t){t.d(n,{Z:function(){return c}});var a=t(74165),r=t(15861),i=t(81249),l=t(15650);function o(e){return(e.name.endsWith(".zip")||e.name.endsWith(".tar.gz"))&&-1===e.name.indexOf("dynamic-font-server")}function s(e){return e.name.endsWith(".jar")}function d(e){return-1!==e.name.indexOf("dynamic-font-server")}function p(e){var n=e[0];if(null==n)return n;var t=n.version;return e.forEach((function(e){var a=e.version;-1===(0,i.compare)(t,a)&&(n=e,t=a)})),n}function m(e){return p(e.filter((function(e){return e.isAlpha})))}function c(e){return u.apply(this,arguments)}function u(){return(u=(0,r.Z)((0,a.Z)().mark((function e(n){var t,r,c,u,f,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=!1),e.next=3,(0,l.Z)();case 3:return t=e.sent,r=t.filter((function(e){var n=e.version;return!!n&&(0,i.valid)(n)})).filter((function(e){return n||!e.isAlpha})),u=(c=function(e){var t,a=r.filter(e);return n&&null!=(t=m(a))?t:p(a)})(o),f=c(s),h=c(d),e.abrupt("return",{backend:f,frontend:u,font:h});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},15650:function(e,n,t){t.d(n,{Z:function(){return u}});var a=t(74165),r=t(15861),i=t(81249),l=t(89407);var o=function(e){var n={};return function(){var t,a=null!=(t=arguments.length<=0?void 0:arguments[0])?t:"$$$",r=n[a];if(r)return r;var i=e.apply(void 0,arguments);return n[a]=i,i.catch((function(e){throw delete n[a],e})),setTimeout((function(){delete n[a]}),3e5),i}},s=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.e(6448).then(t.t.bind(t,56448,23));case 2:return n=e.sent,r=n.default,e.abrupt("return",new r({region:l.wq,accessKeyId:l.Fx,accessKeySecret:l.Xc,bucket:l.Pm}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(e){return e.name.split("/")[0].substring(1)},p=function(e){return e.name.split("/")[1]},m="undefined"!=typeof window,c=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var n,t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,s();case 4:return n=e.sent,e.next=7,n.list({"max-keys":1e3},{});case 7:return t=e.sent,r=t.objects,e.abrupt("return",r.map((function(e){return{version:d(e),name:p(e),url:e.url,isAlpha:null!=(0,i.prerelease)(d(e))}})).filter((function(e){return(0,i.valid)(e.version)})));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=o(c)},21764:function(e,n,t){var a=t(74165),r=t(15861),i=t(67294),l=t(49788);n.Z=function(e,n){var t=(0,i.useState)(),o=t[0],s=t[1];return(0,i.useEffect)((function(){var t=!1,i=function(){var i=(0,r.Z)((0,a.Z)().mark((function r(){var i;return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,l.Z)(n);case 2:if(i=a.sent,!t){a.next=5;break}return a.abrupt("return");case 5:s(i[e]);case 6:case"end":return a.stop()}}),r)})));return function(){return i.apply(this,arguments)}}();return i(),function(){t=!0}}),[]),o}},15707:function(e,n,t){t.r(n),t.d(n,{contentTitle:function(){return w},default:function(){return Z},frontMatter:function(){return b},metadata:function(){return E},toc:function(){return C}});var a=t(87462),r=t(63366),i=t(67294),l=t(3905),o=t(53565),s=t(1778),d=t(97225),p=t(98448),m=t(6486),c=t(77446),u=t(21764),f=function(){var e,n=(0,u.Z)("backend"),t=("\n  cd /apps/sino-intellisense-form/backend\n  nohup java -Dspring.profiles.active=test -jar "+(null!=(e=null==n?void 0:n.name)?e:"")+" > intellisenseform.log &\n  ").trim().replace(/^ +/gm,"");return i.createElement(c.Z,{className:"language-bash"},t)},h=t(48002),v=function(e){var n=e.children;return i.createElement("div",null,n)},k={description:{color:"rgb(153, 153, 136)",fontSize:14,paddingLeft:"1em",fontStyle:"italic"}},g=function(e){var n=e.children,t=e.title,a=e.description,r=e.level,l=void 0===r?0:r,o=i.Children.toArray(n).filter(Boolean).filter(i.isValidElement).map((function(e){return i.cloneElement(e,{level:l+1})})),s=l>1?24:0;return i.createElement("div",{className:"file-tree-node",style:{paddingLeft:s}},i.createElement("div",{className:"file-tree-node-title"},l>0?"|____ ":"",t,i.createElement("span",{style:k.description},a)),n&&i.createElement("div",{className:"file-tree-node-children"},o))},x={light:{codeblock:{color:"rgb(57, 58, 52)",backgroundColor:"rgb(246, 248, 250)"}},dark:{codeblock:{color:"rgb(248, 248, 242)",backgroundColor:"rgb(40, 42, 54)"}},strong:{fontSize:16}},_=function(){var e=(0,h.Z)().isDarkTheme,n=x[e?"dark":"light"],t=(0,u.Z)("backend");return i.createElement("div",{className:"codeBlockContainer_node_modules-@docusaurus-theme-classic-lib-next-theme-CodeBlock-styles-module"},i.createElement("div",{className:"codeBlockContent_node_modules-@docusaurus-theme-classic-lib-next-theme-CodeBlock-styles-module"},i.createElement("pre",{className:"prism-code language-undefined codeBlock_node_modules-@docusaurus-theme-classic-lib-next-theme-CodeBlock-styles-module thin-scrollbar",style:n.codeblock},i.createElement("code",{className:"codeBlockLines_node_modules-@docusaurus-theme-classic-lib-next-theme-CodeBlock-styles-module"},i.createElement(v,null,i.createElement(g,{title:"/apps/sino-intellisense-form"},i.createElement(g,{title:i.createElement("strong",{style:x.strong},"frontend"),description:i.createElement(i.Fragment,null,"智能表单前端文件夹，包含的子目录和文件都是从",i.createElement("a",{href:"#步骤二：下载智能表单前端发布包"},"前端压缩包"),"中解压出来的")},i.createElement(g,{title:"intellisense-form"}),i.createElement(g,{title:"intellisense-form-manager"}),i.createElement(g,{title:"intellisense-form-mobile"})),i.createElement(g,{title:i.createElement("strong",{style:x.strong},"backend"),description:"智能表单后端文件夹"},i.createElement(g,{title:i.createElement("strong",{style:x.strong},null==t?void 0:t.name),description:i.createElement(i.Fragment,null,"需要",i.createElement("a",{href:"#步骤三：下载智能表单后端发布包"},"下载"))}),i.createElement(g,{title:i.createElement("strong",{style:x.strong},"config"),description:i.createElement(i.Fragment,null,i.createElement("a",{href:"#步骤一：配置智能表单后端"},"后端配置"),"，可以通过工具生成")},i.createElement(g,{title:"application.yml"}),i.createElement(g,{title:"application-dev.yml"}),i.createElement(g,{title:"application-test.yml"}),i.createElement(g,{title:"application-prod.yml"}))),i.createElement(g,{title:i.createElement("strong",{style:x.strong},"dynamic-font-server"),description:i.createElement(i.Fragment,null,"智能表单字体服务文件夹。此服务是可选的，如果需要在 IE 11 中支持表单打印的pdf导出功能，需要部署字体服务",i.createElement("a",{href:"#步骤四：下载字体服务发布包"},"下载"))})))))))},N=function(){var e,n=(0,u.Z)("backend"),t="nohup java -Dspring.config.location=classpath:/ \\\n  -Dspring.config.location=file:/apps/sino-intellisense-form/backend/config/ \\\n  -Dspring.profiles.active=test \\\n  -jar "+(null!=(e=null==n?void 0:n.name)?e:"sino-intellisense-form-v1.12.0.jar")+" \\\n  > intellisenseform.log &";return i.createElement(c.Z,{className:"language-bash"},t)},y=["components"],b={id:"deployment",title:"部署智能表单"},w=void 0,E={unversionedId:"deployment",id:"deployment",title:"部署智能表单",description:"目前的智能表单版本推荐与 sinomatrix 组合在一起使用，本文将会介绍智能表单的部署架构图，让您了解智能表单的组成部分。然后一一讲解如何部署每个组成部分。",source:"@site/docs/deployment.mdx",sourceDirName:".",slug:"/deployment",permalink:"/intellisense-form-website/docs/deployment",tags:[],version:"current",frontMatter:{id:"deployment",title:"部署智能表单"},sidebar:"someSidebar",previous:{title:"下载安装包",permalink:"/intellisense-form-website/docs/download"},next:{title:"在sino-matrix中添加快捷导航",permalink:"/intellisense-form-website/docs/nav-in-sino-matrix"}},C=[{value:"部署架构图",id:"部署架构图",children:[{value:"业务系统",id:"业务系统",children:[],level:3},{value:"业务数据库",id:"业务数据库",children:[],level:3},{value:"sino-matrix 集群",id:"sino-matrix-集群",children:[],level:3},{value:"Nginx",id:"nginx",children:[],level:3},{value:"智能表单.jar",id:"智能表单jar",children:[],level:3},{value:"MongoDB",id:"mongodb",children:[],level:3},{value:"总结",id:"总结",children:[],level:3}],level:2},{value:"第一步：环境准备",id:"第一步环境准备",children:[],level:2},{value:"第二步：下载智能表单部署资源",id:"第二步下载智能表单部署资源",children:[{value:"步骤一：创建目录",id:"步骤一创建目录",children:[],level:3},{value:"步骤二：下载智能表单前端发布包",id:"步骤二下载智能表单前端发布包",children:[],level:3},{value:"步骤三：下载智能表单后端发布包",id:"步骤三下载智能表单后端发布包",children:[],level:3},{value:"步骤四：下载字体服务发布包",id:"步骤四下载字体服务发布包",children:[],level:3},{value:"步骤五：安装LibreOffice",id:"步骤五安装libreoffice",children:[],level:3}],level:2},{value:"第三步：部署智能表单前端",id:"第三步部署智能表单前端",children:[],level:2},{value:"第四步：部署智能表单后端",id:"第四步部署智能表单后端",children:[{value:"步骤一：配置智能表单后端",id:"步骤一配置智能表单后端",children:[],level:3},{value:"步骤二：启动智能表单",id:"步骤二启动智能表单",children:[],level:3}],level:2},{value:"第五步：部署字体服务",id:"第五步部署字体服务",children:[{value:"步骤一：下载并安装 chrome",id:"步骤一下载并安装-chrome",children:[],level:3},{value:"步骤二：安装字体",id:"步骤二安装字体",children:[],level:3},{value:"步骤三：修改 Nginx 配置",id:"步骤三修改-nginx-配置",children:[],level:3},{value:"步骤四：启动字体服务",id:"步骤四启动字体服务",children:[],level:3}],level:2},{value:"第六步：在您的业务系统中嵌入智能表单页面",id:"第六步在您的业务系统中嵌入智能表单页面",children:[],level:2},{value:"大功告成",id:"大功告成",children:[],level:2}],$={toc:C};function Z(e){var n=e.components,i=(0,r.Z)(e,y);return(0,l.kt)("wrapper",(0,a.Z)({},$,i,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"目前的智能表单版本推荐与 sinomatrix 组合在一起使用，本文将会介绍智能表单的",(0,l.kt)("a",{parentName:"p",href:"#%E9%83%A8%E7%BD%B2%E6%9E%B6%E6%9E%84%E5%9B%BE"},"部署架构图"),"，让您了解智能表单的组成部分。然后一一讲解如何部署每个组成部分。"),(0,l.kt)("h2",{id:"部署架构图"},"部署架构图"),(0,l.kt)("p",null,"智能表单的部署架构图如下："),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"智能表单的部署架构图",src:t(3610).Z})),(0,l.kt)("p",null,"下面逐个解释每个区块的用途。"),(0,l.kt)("h3",{id:"业务系统"},"业务系统"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"业务系统")," 是项目组已有的业务平台，如正在运营的 OA 项目。智能表单发布的表单是需要有一个宿主平台来展现表单页面的。根据集成方式不同，集成方案也不同。可以联系智能表单小组成员，商讨集成方案。（集成方案不影响部署方式）"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"注意：智能表单也可以不依赖 ",(0,l.kt)("inlineCode",{parentName:"p"},"业务系统")," 独立使用。但是这部分文档还没有整理出来，敬请期待。")),(0,l.kt)("h3",{id:"业务数据库"},"业务数据库"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"业务数据库")," 是项目组业务系统使用的关系型数据库。",(0,l.kt)("inlineCode",{parentName:"p"},"智能表单"),"需要连接此数据库，将用户填写的表单数据存储在业务数据库中。"),(0,l.kt)("h3",{id:"sino-matrix-集群"},"sino-matrix 集群"),(0,l.kt)("p",null,"智能表单依赖的 sino-matrix 平台的服务有："),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"统一授权"),(0,l.kt)("li",{parentName:"ul"},"统一授权接口服务"),(0,l.kt)("li",{parentName:"ul"},"单点登录"),(0,l.kt)("li",{parentName:"ul"},"工作流设计器"),(0,l.kt)("li",{parentName:"ul"},"工作流引擎"),(0,l.kt)("li",{parentName:"ul"},"工作流平台适配服务")),(0,l.kt)("h3",{id:"nginx"},"Nginx"),(0,l.kt)("p",null,"Nginx 主要承担两个职责："),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"职责一：作为智能表单前端代码的静态 Web 服务器"),(0,l.kt)("li",{parentName:"ul"},"职责二：作为路由转发的反向代理服务器")),(0,l.kt)("p",null,"之所以有职责二，是因为业务系统和智能表单如果是同一个域（即访问的地址和端口号一致），那么在业务系统中集成智能表单页面将会比较简单，不用考虑浏览器跨域的要求。"),(0,l.kt)("h3",{id:"智能表单jar"},"智能表单.jar"),(0,l.kt)("p",null,"智能表单后端部署 jar 包。"),(0,l.kt)("h3",{id:"mongodb"},"MongoDB"),(0,l.kt)("p",null,"智能表单采用 MongoDB 存储表单配置数据、权限配置数据、意见数据、附件数据等。"),(0,l.kt)("h3",{id:"总结"},"总结"),(0,l.kt)("p",null,"智能表单中的每一个区块都可以在同一台服务器部署或者分散到多台服务器部署。请您根据自身情况选择合适的部署模型即可。"),(0,l.kt)("p",null,"智能表单也可以独立于 sino-matrix 平台单独运行，但是需要您实现很多扩展接口，来对接以下功能："),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"单点登录"),(0,l.kt)("li",{parentName:"ul"},"导航资源管理与授权"),(0,l.kt)("li",{parentName:"ul"},"流程流转"),(0,l.kt)("li",{parentName:"ul"},"应用的业务角色管理"),(0,l.kt)("li",{parentName:"ul"},"查看部门人员组织机构信息")),(0,l.kt)("p",null,"后续会专门开辟一个系列的文章，讲解如何实现这些扩展接口，实现与非 sino-matrix 平台进行集成。"),(0,l.kt)("p",null,"接下来将会一一讲解智能表单每个组成部分的安装和部署。"),(0,l.kt)("h2",{id:"第一步环境准备"},"第一步：环境准备"),(0,l.kt)("p",null,"请事先安装好以下软件："),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Java 8+"),(0,l.kt)("li",{parentName:"ul"},"Nginx"),(0,l.kt)("li",{parentName:"ul"},"Mongodb 3.0+ ",(0,l.kt)("a",{parentName:"li",href:"/intellisense-form-website/docs/deployment-mongodb"},"mongodb 安装步骤")),(0,l.kt)("li",{parentName:"ul"},"nodejs ",(0,l.kt)("a",{parentName:"li",href:"/intellisense-form-website/docs/deployment-nodejs"},"nodejs 安装步骤")),(0,l.kt)("li",{parentName:"ul"},"sino-matrix 1.6.37+",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"http://sinomatrix.gitee.io/sino-matrix-website/docs/deploy/prod/home"},"sino-matrix 部署手册")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"http://47.93.34.153:10080/sino-matrix/sino-matrix/blob/master/CHANGELOG.md"},"sino-matrix 版本变更记录（从这里可以找到 sinomatrix 部署包）")," 注意：访问此地址时可能会出现 ERR_UNSAFE_PORT 的情况，请参看",(0,l.kt)("a",{parentName:"li",href:"https://blog.csdn.net/kjcxmx/article/details/118122483"},"这篇帖子"),"配置一下浏览器。")))),(0,l.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"注意")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"在准备好 SinoMatrix 环境后，需要在 SinoMatrix 数据库中执行以下 sql，切记在部署生产环境时不要忘记此步骤："),(0,l.kt)("pre",{parentName:"div"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"use sinoepuias;\n# 设置业务角色不受限部门级别\nupdate sys_sub_rd_info set CREATE_FLOWROLE_TYPE = '0' where SUB_ID = '67250';\n# 设置关闭表单发布审核\nupdate sys_config_info set PROPVAL='0' where PROPID='sinoepFormAudit';\n")))),(0,l.kt)("h2",{id:"第二步下载智能表单部署资源"},"第二步：下载智能表单部署资源"),(0,l.kt)("p",null,"我们需要下载智能表单资源，并解压缩到服务器的任意目录中（如果是 Linux 服务器，需要注意文件访问权限）。例如，将文件放入 ",(0,l.kt)("inlineCode",{parentName:"p"},"/apps/sino-intellisense-form")," 目录中。经过下载和解压缩，最终会形成下面的文件结构："),(0,l.kt)(_,{mdxType:"DeploymentFileStructure"}),(0,l.kt)("h3",{id:"步骤一创建目录"},"步骤一：创建目录"),(0,l.kt)("p",null,"需要手动创建以下目录"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# 创建前端文件夹\n$ mkdir -p /apps/sino-intellisense-form/frontend\n# 创建后端文件夹\n$ mkdir -p /apps/sino-intellisense-form/backend/config\n# 创建字体服务文件夹\n$ mkdir -p /apps/sino-intellisense-form/dynamic-font-server\n")),(0,l.kt)("h3",{id:"步骤二下载智能表单前端发布包"},"步骤二：下载智能表单前端发布包"),(0,l.kt)("p",null,"下载并解压缩",(0,l.kt)(o.Z,{type:"frontend",mdxType:"BundleLink"},"智能表单前端发布包"),"，如下所示："),(0,l.kt)(s.Z,{type:"frontend",mdxType:"DownloadBundleShell"}),(0,l.kt)("h3",{id:"步骤三下载智能表单后端发布包"},"步骤三：下载智能表单后端发布包"),(0,l.kt)("p",null,"下载并解压缩",(0,l.kt)(o.Z,{type:"backend",mdxType:"BundleLink"},"智能表单后端发布包"),"，如下所示："),(0,l.kt)(s.Z,{type:"backend",mdxType:"DownloadBundleShell"}),(0,l.kt)("h3",{id:"步骤四下载字体服务发布包"},"步骤四：下载字体服务发布包"),(0,l.kt)("p",null,"下载并解压缩",(0,l.kt)(o.Z,{type:"font",mdxType:"BundleLink"},"字体服务发布包"),"，如下所示："),(0,l.kt)(s.Z,{type:"font",mdxType:"DownloadBundleShell"}),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"提示")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"字体服务升级，解压服务包后执行提升文件执行权限的时候，注意脚本的执行路径是在",(0,l.kt)("inlineCode",{parentName:"p"},"/apps/sino-intellisense-form/dynamic-font-server"),"下。"))),(0,l.kt)("h3",{id:"步骤五安装libreoffice"},"步骤五：安装LibreOffice"),(0,l.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"提示")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"若不需要附件在线预览功能，则可以跳过此步骤。"))),(0,l.kt)("p",null,"安装LibreOffice并开启在线预览功能：",(0,l.kt)("a",{parentName:"p",href:"/intellisense-form-website/docs/config-file-online-preview"},"附件在线预览功能")),(0,l.kt)("h2",{id:"第三步部署智能表单前端"},"第三步：部署智能表单前端"),(0,l.kt)("p",null,"在前一章节，我们已经下载了前端发布包，现在我们需要配置 nginx，让 nginx 做两件事情，即："),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"控制前端资源的访问"),(0,l.kt)("li",{parentName:"ul"},"路由分发")),(0,l.kt)("p",null,"这两件事情通过以下 nginx 的配置即可完成："),(0,l.kt)(d.Z,{defaultValue:"1",values:[{label:"必要的配置",value:"1"},{label:"参考的完整配置",value:"2"}],mdxType:"Tabs"},(0,l.kt)(p.Z,{value:"1",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx",metastring:'title="nginx.conf"',title:'"nginx.conf"'},"http {\n  # 配置业务系统服务（以实际业务为准）\n  upstream main_web_app {\n    server 127.0.0.1:8080;\n  }\n\n  # 配置智能表单后端服务（服务端口号以部署后端时的配置为基准）\n  upstream sinoform_web_app {\n    server 127.0.0.1:8085;\n  }\n\n  server {\n    listen 80;\n\n    # 解决文件上传大小限制\n    client_max_body_size 0;\n\n    # 指定智能表单静态资源的根路径\n    root /apps/sino-intellisense-form/frontend;\n\n    # 默认请求转交给主应用处理\n    location / {\n      proxy_set_header Host $host;\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n      proxy_set_header X-Forwarded-Host $http_host;\n      proxy_set_header X-Forwarded-Port $server_port;\n      proxy_set_header X-Forwarded-Proto $scheme;\n      proxy_set_header X-Real-IP $remote_addr;\n      proxy_pass http://main_web_app;\n    }\n\n    # 智能表单后端请求转交给智能表单后端服务处理\n    location /apis/intellisense-form/ {\n      proxy_set_header Host $host;\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n      proxy_set_header X-Forwarded-Host $http_host;\n      proxy_set_header X-Forwarded-Port $server_port;\n      proxy_set_header X-Forwarded-Proto $scheme;\n      proxy_set_header X-Real-IP $remote_addr;\n      proxy_pass http://sinoform_web_app;\n\n      # 禁用 API 的浏览器缓存，以解决 IE11 怪异的 AJAX 缓存问题\n      proxy_hide_header Cache-Control;\n      add_header Cache-Control no-store;\n    }\n\n    # 配置主题入口文件不做缓存\n    location ~ .*/remote-entry.js$ {\n      add_header Cache-Control no-store;\n    }\n\n    # 智能表单PC端应用（支持 history 模式，即单页面应用）\n    location /intellisense-form {\n      index index.html index.htm;\n      try_files $uri $uri/ /intellisense-form/index.html;\n      add_header Cache-Control no-store;\n    }\n\n    # 智能表单移动端应用（支持 history 模式，即单页面应用）\n    location /intellisense-form-mobile {\n      index index.html index.htm;\n      try_files $uri $uri/ /intellisense-form-mobile/index.html;\n      add_header Cache-Control no-store;\n    }\n\n    # 智能表单管理应用（支持 history 模式，即单页面应用）\n    location /intellisense-form-manager {\n      index index.html index.htm;\n      try_files $uri $uri/ /intellisense-form-manager/index.html;\n      add_header Cache-Control no-store;\n    }\n\n    # 缓存智能表单静态资源\n    location ~ /intellisense-form.*\\.(wasm|gif|jpg|jpeg|png|bmp|swf|js|css|md|pdf|ttf|ttc|eot|woff2|woff|svg)$ {\n      expires 365d;\n    }\n  }\n}\n"))),(0,l.kt)(p.Z,{value:"2",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx",metastring:'title="nginx.conf" {45-47,58,72-84,87-89,92-96,99-103,106-110,113-115}',title:'"nginx.conf"',"{45-47,58,72-84,87-89,92-96,99-103,106-110,113-115}":!0},'# nginx 启动时使用的用户\nuser root;\n# 工作进程数，在生产环境中建议配置为 4\nworker_processes 4;\n\nevents {\n  # 单个工作进程可以允许同时建立外部连接的数量\n  worker_connections 10000;\n}\n\nhttp {\n  include       mime.types;\n  default_type  application/octet-stream;\n\n  log_format  main  \'$remote_addr - $remote_user [$time_local] "$request" \'\n                    \'$status $body_bytes_sent "$http_referer" \'\n                    \'"$http_user_agent" "$http_x_forwarded_for"\';\n\n  # 优化静态资源的访问性能\n  sendfile        on;\n\n  # 启用 gzip 压缩，注意需要在安装 nginx 时启用 gzip 模块\n  gzip  on;\n  gzip_buffers 16 8k;\n  gzip_comp_level 6;\n  gzip_http_version 1.1;\n  gzip_min_length 256;\n  gzip_proxied any;\n  gzip_vary on;\n  gzip_types\n      text/xml application/xml application/atom+xml application/rss+xml application/xhtml+xml image/svg+xml\n      text/javascript application/javascript application/x-javascript\n      text/x-json application/json application/x-web-app-manifest+json\n      text/css text/plain text/x-component\n      font/opentype application/x-font-ttf application/vnd.ms-fontobject\n      image/x-icon;\n  gzip_disable "MSIE [1-6]\\.";\n\n  # 配置业务系统服务（以实际业务为准）\n  upstream main_web_app {\n    server 127.0.0.1:8080;\n  }\n\n  # 配置智能表单后端服务（服务端口号以部署后端时的配置为基准）\n  upstream sinoform_web_app {\n    server 127.0.0.1:8085;\n  }\n\n  server {\n    # 启用 80 端口\n    listen 80;\n    server_name localhost;\n\n    # 解决文件上传大小限制\n    client_max_body_size 0;\n\n    # 指定智能表单静态资源的根路径\n    root /apps/sino-intellisense-form/frontend;\n\n    # 默认请求转交给主应用处理\n    location / {\n      proxy_set_header Host $host;\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n      proxy_set_header X-Forwarded-Host $http_host;\n      proxy_set_header X-Forwarded-Port $server_port;\n      proxy_set_header X-Forwarded-Proto $scheme;\n      proxy_set_header X-Real-IP $remote_addr;\n      proxy_pass http://main_web_app;\n    }\n\n    # 智能表单后端请求转交给智能表单后端服务处理\n    location /apis/intellisense-form/ {\n      proxy_set_header Host $host;\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n      proxy_set_header X-Forwarded-Host $http_host;\n      proxy_set_header X-Forwarded-Port $server_port;\n      proxy_set_header X-Forwarded-Proto $scheme;\n      proxy_set_header X-Real-IP $remote_addr;\n      proxy_pass http://sinoform_web_app;\n\n      # 禁用 API 的浏览器缓存，以解决 IE11 怪异的 AJAX 缓存问题\n      proxy_hide_header Cache-Control;\n      add_header Cache-Control no-store;\n    }\n\n    # 配置主题入口文件不做缓存\n    location ~ .*/remote-entry.js$ {\n      add_header Cache-Control no-store;\n    }\n\n    # 智能表单PC端应用（支持 history 模式，即单页面应用）\n    location /intellisense-form {\n      index index.html index.htm;\n      try_files $uri $uri/ /intellisense-form/index.html;\n      add_header Cache-Control no-store;\n    }\n\n    # 智能表单移动端应用（支持 history 模式，即单页面应用）\n    location /intellisense-form-mobile {\n      index index.html index.htm;\n      try_files $uri $uri/ /intellisense-form-mobile/index.html;\n      add_header Cache-Control no-store;\n    }\n\n    # 智能表单管理应用（支持 history 模式，即单页面应用）\n    location /intellisense-form-manager {\n      index index.html index.htm;\n      try_files $uri $uri/ /intellisense-form-manager/index.html;\n      add_header Cache-Control no-store;\n    }\n\n    # 缓存智能表单静态资源\n    location ~ /intellisense-form.*\\.(wasm|gif|jpg|jpeg|png|bmp|swf|js|css|md|pdf|ttf|ttc|eot|woff2|woff|svg)$ {\n      expires 365d;\n    }\n  }\n}\n')))),(0,l.kt)("p",null,"上面提供了两份 nginx 配置。如果您是 nginx 高手，非常熟悉 nginx 配置，那么看“必要的配置”即可；如果您没有接触过 nginx，那么可以直接使用“参考的完整配置”，并启动 nginx。"),(0,l.kt)("p",null,"调整完配置后，别忘了告诉 nginx 重新加载配置："),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"nginx -s reload\n")),(0,l.kt)("h2",{id:"第四步部署智能表单后端"},"第四步：部署智能表单后端"),(0,l.kt)("p",null,"在部署智能表单后端前，先需要编写配置文件，然后通过 ",(0,l.kt)("inlineCode",{parentName:"p"},"java")," 命令行启动后端项目。"),(0,l.kt)("h3",{id:"步骤一配置智能表单后端"},"步骤一：配置智能表单后端"),(0,l.kt)("p",null,"通过下面的工具，生成智能表单后端配置："),(0,l.kt)(m.Z,{mdxType:"ConfigTools"}),(0,l.kt)("p",null,"将生成的 ",(0,l.kt)("inlineCode",{parentName:"p"},"config.zip")," 文件解压到 ",(0,l.kt)("inlineCode",{parentName:"p"},"/apps/sino-intellisense-form/backend/config")," 目录中："),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"unzip config.zip -d /apps/sino-intellisense-form/backend/config\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"如果想更细致地配置智能表单，请移步 ",(0,l.kt)("a",{parentName:"p",href:"/intellisense-form-website/docs/config-custom"},"项目组自定义配置"),"，查看详细的配置说明。")),(0,l.kt)("h3",{id:"步骤二启动智能表单"},"步骤二：启动智能表单"),(0,l.kt)("p",null,"进入 ",(0,l.kt)("inlineCode",{parentName:"p"},"/apps/sino-intellisense-form/backend"),"，运行智能表单 jar 包即可："),(0,l.kt)(f,{mdxType:"StartBackendShell"}),(0,l.kt)("p",null,"启动大约需要 15 秒，15 秒后请访问 ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:8085/actuator/info"},"http://localhost:8085/actuator/info")," 地址，如果出现类似下面的信息，说明启动成功："),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "build": {\n    "artifact": "intellisenseform-bff",\n    "name": "intellisenseform-bff",\n    "time": "2021-08-27T09:54:03.631Z",\n    "version": "1.11.2",\n    "group": "com.sinosoft"\n  }\n}\n')),(0,l.kt)("p",null,"然后访问健康状态接口 ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:8085/actuator/health"},"http://localhost:8085/actuator/health"),"，验证数据库的连通性。如果出现类似下面的信息，说明数据库连通没问题："),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "status": "UP"\n}\n')),(0,l.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"在部分旧版本的麒麟操作系统中，通过 ",(0,l.kt)("inlineCode",{parentName:"p"},"nohup")," 在后台启动智能表单时，可能找不到 ",(0,l.kt)("inlineCode",{parentName:"p"},"config")," 目录下的配置文件。如果出现这样的问题，请通过类似下面的命令行启动："),(0,l.kt)(N,{mdxType:"RunBackendInKylin"}),(0,l.kt)("p",{parentName:"div"},"如果您有更好的方式解决此问题，请您不吝赐教。"),(0,l.kt)("p",{parentName:"div"},"请注意，先采用标准的方式启动，失败后再尝试上面的命令行。"))),(0,l.kt)("h2",{id:"第五步部署字体服务"},"第五步：部署字体服务"),(0,l.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"提示")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"字体服务不是必须安装的，只有在以下情况下我们才需要部署字体服务："),(0,l.kt)("ol",{parentName:"div"},(0,l.kt)("li",{parentName:"ol"},"需要使用表单打印的 pdf 导出功能"),(0,l.kt)("li",{parentName:"ol"},"需要支持 IE 11 浏览器"),(0,l.kt)("li",{parentName:"ol"},"下载表单打印 pdf 文件缓存，需要加速")))),(0,l.kt)("h3",{id:"步骤一下载并安装-chrome"},"步骤一：下载并安装 chrome"),(0,l.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"提示")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"如果在 windows 操作系统中部署智能表单，则可以跳过此步骤。"))),(0,l.kt)("p",null,"具体安装步骤参见 ",(0,l.kt)("a",{parentName:"p",href:"/intellisense-form-website/docs/deployment-chrome"},"安装 Chrome"),"。"),(0,l.kt)("h3",{id:"步骤二安装字体"},"步骤二：安装字体"),(0,l.kt)("p",null,"pdf 导出需要用到一些字体，请安装以下字体："),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"仿宋","_","GB2312"),(0,l.kt)("li",{parentName:"ul"},"宋体"),(0,l.kt)("li",{parentName:"ul"},"楷体"),(0,l.kt)("li",{parentName:"ul"},"黑体")),(0,l.kt)("p",null,"将字体文件放入服务器的 ",(0,l.kt)("inlineCode",{parentName:"p"},"/usr/share/fonts")," 目录中，然后执行以下命令："),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"fc-cache\n")),(0,l.kt)("h3",{id:"步骤三修改-nginx-配置"},"步骤三：修改 Nginx 配置"),(0,l.kt)("p",null,"在第三步中提到的 nginx 配置文件中添加关于字体服务的配置，具体内容如下："),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-nginx",metastring:'title="nginx.conf"',title:'"nginx.conf"'},"\n  # 配置字体服务\n  upstream dynamic_font_server {\n    server 127.0.0.1:8088;\n  }\n\n  #字体请求转交字体服务处理\n\n  location /apis/intellisense-form/dynamic-font {\n    proxy_set_header Host $host;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header X-Forwarded-Host $http_host;\n    proxy_set_header X-Forwarded-Port $server_port;\n    proxy_set_header X-Forwarded-Proto $scheme;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_pass http://dynamic_font_server;\n  }\n")),(0,l.kt)("p",null,"调整完配置后，执行以下命令使 nginx 重新加载配置："),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"nginx -s reload\n")),(0,l.kt)("h3",{id:"步骤四启动字体服务"},"步骤四：启动字体服务"),(0,l.kt)("p",null,"进入 ",(0,l.kt)("inlineCode",{parentName:"p"},"/apps/sino-intellisense-form/dynamic-font-server"),"文件夹，执行以下启动命令："),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ cd /apps/sino-intellinse-form/dynamic-font-server\n\n# 启动字体服务\n$ npm run server-start\n")),(0,l.kt)("p",null,"可以执行以下命令查看服务是否成功启动："),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"ps -ef | grep node\n")),(0,l.kt)("p",null,"重新启动服务的命令如下："),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ cd /apps/sino-intellinse-form/dynamic-font-server\n# 重新启动字体服务\n$ npm run server-restart\n")),(0,l.kt)("h2",{id:"第六步在您的业务系统中嵌入智能表单页面"},"第六步：在您的业务系统中嵌入智能表单页面"),(0,l.kt)("p",null,"敬请期待，稍后介绍。"),(0,l.kt)("h2",{id:"大功告成"},"大功告成"),(0,l.kt)("p",null,"恭喜您已成功部署智能表单，大功告成。请您使用智能表单吧。"))}Z.isMDXComponent=!0},3610:function(e,n,t){n.Z=t.p+"assets/images/deploy-structure-06cd80a4b48a38334391a7b2df13e449.jpg"}}]);