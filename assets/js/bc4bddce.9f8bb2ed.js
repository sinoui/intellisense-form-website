"use strict";(self.webpackChunkintellisense_form_docs=self.webpackChunkintellisense_form_docs||[]).push([[3941],{3905:function(e,n,t){t.d(n,{Zo:function(){return m},kt:function(){return f}});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var d=r.createContext({}),u=function(e){var n=r.useContext(d),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},m=function(e){var n=u(e.components);return r.createElement(d.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},s=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,d=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),s=u(t),f=a,c=s["".concat(d,".").concat(f)]||s[f]||p[f]||i;return t?r.createElement(c,l(l({ref:n},m),{},{components:t})):r.createElement(c,l({ref:n},m))}));function f(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,l=new Array(i);l[0]=s;var o={};for(var d in n)hasOwnProperty.call(n,d)&&(o[d]=n[d]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var u=2;u<i;u++)l[u]=t[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}s.displayName="MDXCreateElement"},63211:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return o},contentTitle:function(){return d},metadata:function(){return u},toc:function(){return m},default:function(){return s}});var r=t(87462),a=t(63366),i=(t(67294),t(3905)),l=["components"],o={id:"guide-draft-page-with-modal",title:"以弹窗的形式打开起草页"},d=void 0,u={unversionedId:"guide-draft-page-with-modal",id:"guide-draft-page-with-modal",title:"以弹窗的形式打开起草页",description:"支持版本：v1.15.0",source:"@site/docs/guide-draft-page-with-modal.mdx",sourceDirName:".",slug:"/guide-draft-page-with-modal",permalink:"/intellisense-form-website/docs/guide-draft-page-with-modal",tags:[],version:"current",frontMatter:{id:"guide-draft-page-with-modal",title:"以弹窗的形式打开起草页"},sidebar:"someSidebar",previous:{title:"自定义工作流发送可选人员",permalink:"/intellisense-form-website/docs/plugin-custom-flow-candidates"},next:{title:"i18n定制",permalink:"/intellisense-form-website/docs/guide-i18n"}},m=[{value:"使用场景",id:"使用场景",children:[],level:2},{value:"showDraftForm 方法解析",id:"showdraftform-方法解析",children:[],level:2}],p={toc:m};function s(e){var n=e.components,t=(0,a.Z)(e,l);return(0,i.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"支持版本：v1.15.0")),(0,i.kt)("p",null,"智能表单支持从一个表单中，通过弹窗的方式打开另一个表单的起草页面起草数据。"),(0,i.kt)("h2",{id:"使用场景"},"使用场景"),(0,i.kt)("p",null,"业务场景：有一个审批流程，在流程流转到某个节点时，点击信息反馈按钮，需要弹出信息反馈单的起草页面，填写数据后生成一条信息反馈数据。"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"信息反馈按钮组件开发")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/plugins/show-modal-draft-page/XxfkButton.tsx"',title:'"src/plugins/show-modal-draft-page/XxfkButton.tsx"'},'import React from "react";\nimport Button from "@sinoui/core/Button";\nimport { showDraftForm } from "@sinoform/helper-form-dialog";\nimport { useDetailPage } from "@sinoform/app-core";\n\n// 信息反馈表单id\nconst xxfkFormId = "form-id";\n\nexport default function XxfkButton() {\n  const detailPage = useDetailPage();\n\n  const handleClick = () => {\n    const formValues = detailPage?.formState?.values ?? {};\n    const id = detailPage.formData.formDesign.id;\n    const defaultFormValues = {\n      field_9: formValues.deptName, // 反馈单位\n      field_10: formValues.userName, // 反馈人\n      field_11: formValues.field_14, // 标题\n      field_12: formValues.field_6, // 洲别\n      country_planning_id: id, //绑定对应审批表单\n    };\n\n    showDraftForm(xxfkFormId, undefined, defaultFormValues, {\n      title: "信息反馈",\n      saveButtonTitle: "提交反馈",\n      saveSuccessMsg: "提交信息反馈成功",\n      saveFailureMsg: "提交信息反馈失败",\n      permission: [\n        {\n          name: "field_9",\n          readOnly: true,\n        },\n        {\n          name: "field_7",\n          readOnly: true,\n          hidden: true,\n        },\n        {\n          name: "field_10",\n          readOnly: true,\n        },\n        {\n          name: "field_11",\n          readOnly: true,\n        },\n        {\n          name: "field_12",\n          readOnly: true,\n        },\n        {\n          name: "field_24",\n          readOnly: true,\n        },\n        { name: "field_15", hidden: true },\n        { name: "field_16", hidden: true },\n        { name: "field_17", hidden: true },\n        { name: "field_23", hidden: true },\n      ],\n    });\n  };\n\n  return (\n    <Button style={{ margin: "8px" }} raised onClick={handleClick}>\n      信息反馈\n    </Button>\n  );\n}\n')),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"按钮注册到详情页")),(0,i.kt)("p",null,"按钮开发完成之后，需要将其注册至详情页，注册方法可参考",(0,i.kt)("a",{parentName:"p",href:"./guide-button-in-detail-page"},"详情页注册按钮"),"。"),(0,i.kt)("h2",{id:"showdraftform-方法解析"},"showDraftForm 方法解析"),(0,i.kt)("p",null,"以弹窗方式打开起草页面的主要方法就是",(0,i.kt)("inlineCode",{parentName:"p"},"showDraftForm"),"，此方法接收 4 个参数："),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"formId")," —— 表单设计 id，必填参数"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"dataId")," —— 表单数据 id，可选参数"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"defaultFormValues")," —— 表单默认值，可选参数"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"options")," —— 配置数据，可选参数，主要包含以下属性",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"title")," —— 弹窗标题，默认为",(0,i.kt)("inlineCode",{parentName:"li"},"新建")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"saveButtonTitle")," —— 保存按钮的标题，默认为",(0,i.kt)("inlineCode",{parentName:"li"},"保存")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"cancelButtonTitle")," —— 取消按钮的标题，默认为",(0,i.kt)("inlineCode",{parentName:"li"},"取消")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"saveSuccessMsg")," —— 保存成功的提示语"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"saveFailureMsg")," —— 保存失败的提示语"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"readOnly")," —— 是否以只读的方式打开页面"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"permission")," —— 自定义打开表单的权限"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"dialogStyle")," —— 弹窗的样式")))))}s.isMDXComponent=!0}}]);