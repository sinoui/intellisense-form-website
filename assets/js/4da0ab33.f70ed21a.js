"use strict";(self.webpackChunkintellisense_form_docs=self.webpackChunkintellisense_form_docs||[]).push([[5476],{3905:function(e,n,t){t.d(n,{Zo:function(){return k},kt:function(){return d}});var l=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);n&&(l=l.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,l)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,l,a=function(e,n){if(null==e)return{};var t,l,a={},i=Object.keys(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)t=i[l],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var u=l.createContext({}),o=function(e){var n=l.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},k=function(e){var n=o(e.components);return l.createElement(u.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return l.createElement(l.Fragment,{},n)}},c=l.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,u=e.parentName,k=p(e,["components","mdxType","originalType","parentName"]),c=o(t),d=a,s=c["".concat(u,".").concat(d)]||c[d]||m[d]||i;return t?l.createElement(s,r(r({ref:n},k),{},{components:t})):l.createElement(s,r({ref:n},k))}));function d(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,r=new Array(i);r[0]=c;var p={};for(var u in n)hasOwnProperty.call(n,u)&&(p[u]=n[u]);p.originalType=e,p.mdxType="string"==typeof e?e:a,r[1]=p;for(var o=2;o<i;o++)r[o]=t[o];return l.createElement.apply(null,r)}return l.createElement.apply(null,t)}c.displayName="MDXCreateElement"},58565:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return p},contentTitle:function(){return u},metadata:function(){return o},toc:function(){return k},default:function(){return c}});var l=t(87462),a=t(63366),i=(t(67294),t(3905)),r=["components"],p={id:"expression-rules",title:"公式规则"},u=void 0,o={unversionedId:"expression-rules",id:"expression-rules",title:"公式规则",description:"表单使用过程中，有几处场景可以支持公式去控制一些特殊处理。比如：流程流转控制公式、公式控制表单项的可见性和可编辑性。以上需要使用公式的场景，在配置公式时，均需遵循以下规则。",source:"@site/docs/expression-rules.mdx",sourceDirName:".",slug:"/expression-rules",permalink:"/intellisense-form-website/docs/expression-rules",tags:[],version:"current",frontMatter:{id:"expression-rules",title:"公式规则"},sidebar:"someSidebar",previous:{title:"应用图标定制",permalink:"/intellisense-form-website/docs/custom-icon-for-app"},next:{title:"插值表达式",permalink:"/intellisense-form-website/docs/interpolation-expression"}},k=[{value:"控制条件范围",id:"控制条件范围",children:[],level:2},{value:"快速用法",id:"快速用法",children:[],level:2},{value:"<span id='控制公式语法'>控制公式语法</span>",id:"控制公式语法",children:[{value:"比较关系运算符",id:"比较关系运算符",children:[],level:3},{value:"in 数组包含",id:"in-数组包含",children:[{value:"<code>like</code> 字符串匹配",id:"like-字符串匹配",children:[],level:4}],level:3},{value:"逻辑关系运算符",id:"逻辑关系运算符",children:[],level:3},{value:"使用小括号<code>(</code>、<code>)</code>定义表达式的优先级",id:"使用小括号定义表达式的优先级",children:[],level:3},{value:"字面量",id:"字面量",children:[],level:3},{value:"设置表单项作为控制项",id:"设置表单项作为控制项",children:[],level:3},{value:"设置子表单项作为控制项",id:"设置子表单项作为控制项",children:[],level:3}],level:2}],m={toc:k};function c(e){var n=e.components,t=(0,a.Z)(e,r);return(0,i.kt)("wrapper",(0,l.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"表单使用过程中，有几处场景可以支持公式去控制一些特殊处理。比如：流程流转控制公式、公式控制表单项的可见性和可编辑性。以上需要使用公式的场景，在配置公式时，均需遵循以下规则。"),(0,i.kt)("h2",{id:"控制条件范围"},"控制条件范围"),(0,i.kt)("p",null,"以下事项可作为控制条件："),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"表单中的所有",(0,i.kt)("inlineCode",{parentName:"li"},"表单项"),"，",(0,i.kt)("inlineCode",{parentName:"li"},"子表单项")),(0,i.kt)("li",{parentName:"ul"},"填报人"),(0,i.kt)("li",{parentName:"ul"},"填报人单位"),(0,i.kt)("li",{parentName:"ul"},"填报时间"),(0,i.kt)("li",{parentName:"ul"},"流程发起人"),(0,i.kt)("li",{parentName:"ul"},"流程发起人单位"),(0,i.kt)("li",{parentName:"ul"},"流程发送时间"),(0,i.kt)("li",{parentName:"ul"},"已途经节点"),(0,i.kt)("li",{parentName:"ul"},"填报人角色")),(0,i.kt)("h2",{id:"快速用法"},"快速用法"),(0,i.kt)("p",null,"控制公式的语法借鉴 JavaScript 表达式语法，形如："),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'流程发起人 in ["张三", "李四"] && 填报人 like "张%"\n')),(0,i.kt)("p",null,"示例公式的语义是： 流程发起人是 ",(0,i.kt)("inlineCode",{parentName:"p"},"张三")," 或者 ",(0,i.kt)("inlineCode",{parentName:"p"},"李四"),"，并且填报人姓张。"),(0,i.kt)("h2",{id:"控制公式语法"},(0,i.kt)("span",{id:"控制公式语法"},"控制公式语法")),(0,i.kt)("p",null,"控制公式语法在遵循 JavaScript 表达式语法子集的基础上扩展了关系运算符 ",(0,i.kt)("inlineCode",{parentName:"p"},"in")," 和 ",(0,i.kt)("inlineCode",{parentName:"p"},"like"),"。"),(0,i.kt)("h3",{id:"比较关系运算符"},"比较关系运算符"),(0,i.kt)("p",null,"支持以下关系运算符："),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"like")," - 字符串匹配（字符串包含）"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"in")," - 数组包含"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},">")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},">=")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"<=")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"==")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"!="))),(0,i.kt)("h3",{id:"in-数组包含"},"in 数组包含"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"value in [1, 2, 3];\n")),(0,i.kt)("p",null,"value 可以是数字、字符串、数组、也可以是对象："),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"value = 1"),"时，公式返回 ",(0,i.kt)("inlineCode",{parentName:"li"},"true")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"value = 4"),"时，公式返回 ",(0,i.kt)("inlineCode",{parentName:"li"},"false")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"value = [1, 7, 8]"),"时，公式返回 ",(0,i.kt)("inlineCode",{parentName:"li"},"true")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"value = [8, 9]"),"时，公式返回 ",(0,i.kt)("inlineCode",{parentName:"li"},"false")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},'value = "1"'),"时，公式返回 ",(0,i.kt)("inlineCode",{parentName:"li"},"false")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"value = {selected: 1}"),"时，公式返回",(0,i.kt)("inlineCode",{parentName:"li"},"true")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},'value="1,2,3"'),"时，公式返回",(0,i.kt)("inlineCode",{parentName:"li"},"true"))),(0,i.kt)("h4",{id:"like-字符串匹配"},(0,i.kt)("inlineCode",{parentName:"h4"},"like")," 字符串匹配"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'userName like "张%"\n')),(0,i.kt)("p",null,"规则如下："),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'"张三" like "张%"     ====> TRUE\n"李张三" like "张%"   ====> FALSE\n"李张三" like "%张%"  ====> TRUE\n"张三" like "张_"     ====> TRUE\n"张三2" like "张_"    ====> FALSE\n"张三2" like "张%"    ====> TRUE\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"_")," 表示匹配一个任意字符"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"%")," 表示匹配零个、一个或者多个任意字符")),(0,i.kt)("h3",{id:"逻辑关系运算符"},"逻辑关系运算符"),(0,i.kt)("p",null,"支持以下关系运算符："),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"&&"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"AND")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"||"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"OR")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"!"),"、",(0,i.kt)("inlineCode",{parentName:"li"},"NOT"))),(0,i.kt)("p",null,"例如："),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'姓名 like "张%" && 年龄 >= 18 && 年龄 != 30\n')),(0,i.kt)("h3",{id:"使用小括号定义表达式的优先级"},"使用小括号",(0,i.kt)("inlineCode",{parentName:"h3"},"("),"、",(0,i.kt)("inlineCode",{parentName:"h3"},")"),"定义表达式的优先级"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'姓名 like "张%" && (年龄 <18 || 年龄 > 60)\n')),(0,i.kt)("p",null,"此控制公式语义为：年龄小于 18 岁 或者大于 60 岁，并且姓张。"),(0,i.kt)("p",null,"除此之外，我们可以使用 ! 和关键字 not 表示逻辑非运算。以下两个控制公式表达语义相同："),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'填报人 not in ["张三","李四"]\n\n!(填报人 in ["张三","李四"])\n')),(0,i.kt)("h3",{id:"字面量"},"字面量"),(0,i.kt)("p",null,"支持三种字面量。"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"字符串"),"："),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'"字符串值"\n')),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"注意：必须使用双引号",(0,i.kt)("inlineCode",{parentName:"p"},'"'),"表达字符串字面量。",(0,i.kt)("strong",{parentName:"p"},"字符串不支持单引号"),"。")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"数字"),"："),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"10\n20.1\n-10.5\n.5\n+0.15\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"数组"),"："),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'[1, "2", [3, "4"]]\n')),(0,i.kt)("h3",{id:"设置表单项作为控制项"},"设置表单项作为控制项"),(0,i.kt)("p",null,"我们在使用表单项作为控制项时，可以在公式中使用字段标题或者字段名称作为控制项，在计算公式时会自动从表单中获取字段值。"),(0,i.kt)("p",null,"如："),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-JavaScript"},'用户名 like "张%"\n\nuserName like "张%"\n')),(0,i.kt)("h3",{id:"设置子表单项作为控制项"},"设置子表单项作为控制项"),(0,i.kt)("p",null,"由于子表单数据结构比较复杂，所以我们在设置子表单项作为控制条件时，需要特别注意以下场景："),(0,i.kt)("p",null,"场景一： 子表单中任意一条数据的某一项设置控制公式"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"子表单.年龄 >= 18\n")),(0,i.kt)("p",null,"此控制公式语义为： 子表单中任意一条数据中的年龄",(0,i.kt)("inlineCode",{parentName:"p"},"大于等于"),"18 时，此控制公式就会满足条件。"),(0,i.kt)("p",null,"场景二： 子表单中某一条数据的某一项设置控制公式"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"子表单[2].年龄 >= 18\n")),(0,i.kt)("p",null,"此控制公式语义为： 子表单中第三条数据中的年龄",(0,i.kt)("inlineCode",{parentName:"p"},"大于等于"),"18 时，此控制公式才会满足条件。"))}c.isMDXComponent=!0}}]);