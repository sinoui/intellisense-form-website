"use strict";(self.webpackChunkintellisense_form_docs=self.webpackChunkintellisense_form_docs||[]).push([[4644],{61743:function(e,n,t){t.r(n),t.d(n,{contentTitle:function(){return O},default:function(){return q},frontMatter:function(){return R},metadata:function(){return j},toc:function(){return z}});var a=t(87462),l=t(63366),r=t(67294),i=t(3905),o=t(97225),p=t(98448),s=t(77446),c=t(74165),m=t(15861),u=t(66919),d=t(83572),g=!!t.g.Worker?new Worker(new URL(t.p+t.u(5502),t.b)):null,k=1;function y(){return v.apply(this,arguments)}function v(){return(v=(0,m.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b("gen-key-pair"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return N.apply(this,arguments)}function N(){return(N=(0,m.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b("get-public-key"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return E.apply(this,arguments)}function E(){return(E=(0,m.Z)((0,c.Z)().mark((function e(n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b("encrypto",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,n){return w.apply(this,arguments)}function w(){return(w=(0,m.Z)((0,c.Z)().mark((function e(n,t){var a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=k++,g.postMessage({type:n,id:a,request:t}),e.abrupt("return",new Promise((function(e,n){g.addEventListener("message",(function t(l){var r=l.data;(null==r?void 0:r.id)===a&&(g.removeEventListener("messasge",t),r.error?n(r.exception):e(r.response))}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){var e=(0,r.useState)(),n=e[0],t=e[1],a=(0,r.useCallback)((0,m.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:n=e.sent,t(n);case 4:case"end":return e.stop()}}),e)}))),[]);return(0,r.useEffect)((function(){a()}),[]),r.createElement("p",null,r.createElement("p",null,r.createElement(u.Z,{raised:!0,onClick:a},"生成 RSA 密钥对")),r.createElement("blockquote",null,r.createElement("p",null,"注意，大概需要 3 ~ 5 秒生成密钥对，请耐心等待...")),n?r.createElement(d.ZP,null,r.createElement(d.OK,{title:"公钥"},r.createElement(s.Z,{className:"language-javascript"},n.publicKey)),r.createElement(d.OK,{title:"私钥"},r.createElement(s.Z,{className:"language-javascript"},n.privateKey))):r.createElement("div",{style:{height:260}},"正在生成密钥对，请稍等..."))}var C=t(17346),T=t(72752),M=t(4256),B="input_1hbe",L="publicKeyInput_231I input_1hbe",I="columnLeft_3if_",S="columnRight_3mee",K="-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAzgdvW9uvYoqzlAXpM7gs\nBxCaRGrt1h9fIwWYfZUDO9qEI+S5h9jmPhfglnX0O8s05p1pWU1YbDqCR4kIiAyv\n5RKe1HJd3BxJ1kp+Y/soBjNYqXvigkn90TgQE9Ip1t+LR5kRMgRbwSvvFqXm0aId\n7468g8LxyavjHRfJy7uuiVVCw8qCh7HBdsIn/p3oS7yi64qbooRc+VQv+/NLFLeL\n0izENXgpzCJEK/4Yy2ttrP6LODqP3fGmbjy2eNcOV2JkWGio/Akcr0K1+JsvW4wO\nGDn9Atr1hzMgo9lpjjiBkRfzxrYNYMiKLO+AKW6WApzQmWuoSAEEPs9yq4yua5UY\n9wIDAQAB\n-----END PUBLIC KEY-----",D=function(){var e=(0,r.useState)(""),n=e[0],t=e[1],a=(0,r.useState)(K),l=a[0],i=a[1],o=(0,r.useState)(""),p=o[0],d=o[1],g=function(){var e=(0,m.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:n=e.sent,i(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,m.Z)((0,c.Z)().mark((function e(){var n,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p&&0!==p.trim().length){e.next=3;break}return M.Z.warning("请先填写需要加密的密码"),e.abrupt("return");case 3:if(l&&0!==l.trim().length){e.next=6;break}return M.Z.warning("请先填写公钥"),e.abrupt("return");case 6:return n={publicKeyString:l,text:p},e.prev=7,e.next=10,h(n);case 10:a=e.sent,t(a),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(7),console.error(e.t0),M.Z.error("加密失败，请检查是否设置了正确的公钥。");case 18:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(){return e.apply(this,arguments)}}();return r.createElement(r.Fragment,null,r.createElement(T.X2,null,r.createElement(T.sg,{className:I,lg:10,xs:24},r.createElement(C.default,{className:B,variant:"outlined",label:"需要加密的密码",value:p,onChange:function(e){return d(e.target.value)},shrink:!0,required:!0}),r.createElement(C.default,{className:B,variant:"outlined",label:"加密结果",value:n,readOnly:!0,shrink:!0,multiline:!0,minRows:3,placeholder:"点击加密按钮，生成加密结果"}),r.createElement("p",null,r.createElement(u.Z,{raised:!0,onClick:k},"加密"))),r.createElement(T.sg,{className:S,lg:14,xs:24},r.createElement("p",null,r.createElement(u.Z,{onClick:function(){i(K)}},"使用默认的公钥"),r.createElement(u.Z,{onClick:g},"使用生成的RSA公钥")),r.createElement(C.default,{className:L,variant:"outlined",label:"公钥",multiline:!0,minRows:9,value:l,onChange:function(e){return i(e.target.value)},required:!0}),r.createElement("p",null),r.createElement("blockquote",null,r.createElement("p",null,"* 表示必填")),r.createElement("blockquote",null,r.createElement("ul",null,r.createElement("li",null,"默认的公钥是指智能表单项目中内置的公钥。"),r.createElement("li",null,"生成的RSA公钥是指上个章节介绍的“生成RSA密钥对”工具生成的公钥。"),r.createElement("li",null,"您也可以填入自己的RSA公钥。"))))),n&&r.createElement("div",{class:"admonition admonition-tip alert alert--success"},r.createElement("div",{class:"admonition-heading"},r.createElement("h5",null,r.createElement("span",{class:"admonition-icon"},r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},r.createElement("path",{"fill-rule":"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"加密成功")),r.createElement("div",{class:"admonition-content"},r.createElement("p",null,"已加密成功，请在 application.yml 中按照下面的方式使用：",r.createElement(s.Z,{className:"language-javascript"},"ENC(",n,")")))))},Z=["components"],R={id:"config-custom",title:"项目组自定义配置"},O=void 0,j={unversionedId:"config-custom",id:"config-custom",title:"项目组自定义配置",description:"项目组可以在启动智能表单后端应用时自行指定自定义的配置文件（即 application.yml 文件）。",source:"@site/docs/config-custom.mdx",sourceDirName:".",slug:"/config-custom",permalink:"/intellisense-form-website/docs/config-custom",tags:[],version:"current",frontMatter:{id:"config-custom",title:"项目组自定义配置"},sidebar:"someSidebar",previous:{title:"与 spring-cloud-gateway 集成",permalink:"/intellisense-form-website/docs/dep-k8s/dep-spring-cloud-gateway"},next:{title:"禁用功能模块",permalink:"/intellisense-form-website/docs/config-disable-modules"}},z=[{value:"项目组使用自定义配置",id:"项目组使用自定义配置",children:[{value:"<code>config/application.yml</code>",id:"configapplicationyml",children:[],level:3},{value:"其他配置文件",id:"其他配置文件",children:[],level:3},{value:"修改日志级别",id:"修改日志级别",children:[],level:3}],level:2},{value:"数据库配置",id:"数据库配置",children:[],level:2},{value:"mongodb 配置密码",id:"mongodb-配置密码",children:[],level:2},{value:"加密配置中的密码",id:"加密配置中的密码",children:[{value:"加密使用的私钥和公钥",id:"加密使用的私钥和公钥",children:[],level:3},{value:"生成公私钥",id:"生成公私钥",children:[],level:3},{value:"加密密码",id:"加密密码",children:[],level:3}],level:2}],Q={toc:z};function q(e){var n=e.components,t=(0,l.Z)(e,Z);return(0,i.kt)("wrapper",(0,a.Z)({},Q,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"项目组可以在启动智能表单后端应用时自行指定自定义的配置文件（即 ",(0,i.kt)("inlineCode",{parentName:"p"},"application.yml")," 文件）。"),(0,i.kt)("h2",{id:"项目组使用自定义配置"},"项目组使用自定义配置"),(0,i.kt)("p",null,"项目组需要使用自定义配置，来指定智能表单如何运行。智能表单推荐采用外置 ",(0,i.kt)("inlineCode",{parentName:"p"},"application.yml")," 文件的方式来自定义应用程序配置。例如将智能表单 jar 包放在 ",(0,i.kt)("inlineCode",{parentName:"p"},"/apps/intellisense-form/intellisense-form-1.11.0.jar")," 中，那么可以在同级目录中按照下面的方式添加配置："),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"/apps/intellisense-form\n|__ intellisense-form-1.11.0.jar\n|__ config                            // 项目组添加自定义配置的文件夹\n  |__ application.yml                 // 通用配置\n  |__ application-dev.yml             // 开发环境配置\n  |__ application-test.yml            // 测试环境配置\n  |__ application-prod.yml            // 生产环境配置\n")),(0,i.kt)("p",null,"需要在 ",(0,i.kt)("inlineCode",{parentName:"p"},"/apps/intellisense-form")," 目录下启动项目，并通过 ",(0,i.kt)("inlineCode",{parentName:"p"},"-Dspring.profile.active=dev")," 这样的方式指定采用哪个环境的配置文件。如下所示的命令行，是在测试环境启动智能表单项目："),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"# 进入到 /apps/intellisense-form 目录中\n$ cd /apps/intellisense-form\n# 在测试环境以后台的方式启动项目\n$ nohup java -Dspring.profile.active=test -jar intellisense-form-1.11.0.jar > intellisense-form.log &\n")),(0,i.kt)("h3",{id:"configapplicationyml"},(0,i.kt)("inlineCode",{parentName:"h3"},"config/application.yml")),(0,i.kt)("p",null,"可以在 ",(0,i.kt)("inlineCode",{parentName:"p"},"config/application.yml")," 文件中添加通用配置，如："),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"特性启用、禁用"),(0,i.kt)("li",{parentName:"ul"},"功能启用、禁用"),(0,i.kt)("li",{parentName:"ul"},"数据库类型"),(0,i.kt)("li",{parentName:"ul"},"扩展接口配置"),(0,i.kt)("li",{parentName:"ul"},"加密秘钥配置"),(0,i.kt)("li",{parentName:"ul"},"项目使用的端口号")),(0,i.kt)("p",null,"推荐的配置如下："),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="config/application.yml"',title:'"config/application.yml"'},"# 自定义项目使用的端口号\nserver:\n  port: 8080\n\n# 指定数据库类型\ndatabase:\n  type: mysql\n\n# 禁用功能模块\nsinoform:\n  # 禁用移动端功能（屏蔽掉移动端预览功能）\n  disable-mobile: true\n  # 禁用仪表盘功能\n  disable-dashboard: true\n  # 禁用表单应用\n  disable-application: false\n  # 禁用流程表单\n  disable-flow-form: false\n  # 禁用登录拦截功能\n  enable-auth-interceptor: false\n\n# 关闭审计日志\naudit:\n  log: false\n\n# 启用特性：\n\n# 设置密码加密秘钥\njasypt:\n  encryptor:\n    private-key-format: PEM\n    private-key-string: |-\n      -----BEGIN PRIVATE KEY-----\n      MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDOB29b269iirOU\n      BekzuCwHEJpEau3WH18jBZh9lQM72oQj5LmH2OY+F+CWdfQ7yzTmnWlZTVhsOoJH\n      iQiIDK/lEp7Ucl3cHEnWSn5j+ygGM1ipe+KCSf3ROBAT0inW34tHmREyBFvBK+8W\n      pebRoh3vjryDwvHJq+MdF8nLu66JVULDyoKHscF2wif+nehLvKLripuihFz5VC/7\n      80sUt4vSLMQ1eCnMIkQr/hjLa22s/os4Oo/d8aZuPLZ41w5XYmRYaKj8CRyvQrX4\n      my9bjA4YOf0C2vWHMyCj2WmOOIGRF/PGtg1gyIos74ApbpYCnNCZa6hIAQQ+z3Kr\n      jK5rlRj3AgMBAAECggEAKIqN/yVbfaiNbbM8EFFNWJaLxKrF4jyKG/od55hK6pw1\n      JFr9px2nMNDCANl1Fc8Gudp/wHLX03Qv7qOoah0U/56KYoOetJFcdi5ycHobhhzU\n      dYVLLRgiOekuQLg6Q235mj0khRMWewyKH4rFwLqF6X3M2qChs21/Y1oq+0wTLDKg\n      Yf9cPnmutDbi+qsiRv7IqNsw8DjkQtpSyaSBZ1L0JHa4DjR1CDgkSaCG+OJ0PUxo\n      2tOd142dIRnN3KJG6WSwDSB1+6oZEky1Ucm3ORjtDRqGlOT0Wf2N9TLdSizpz7yu\n      fOsDVOdeggz2qPCX72gHErT9bFdSyZMLFuw95W7KAQKBgQDtUvUKAHZIHgKadowe\n      FxWQmMFgvdEVG8ztDrMsrgNal8xAME/UFqXqYhF+ekGr+Swcpshy+/iPl7zp4AOC\n      hfE+lOddl8mfSPLXVxiKRp6Uen1nN6P3E60qyXFH+zS/S5i8WP0Z5atL0OrA4zNj\n      oPDThHIZRWzOYti3zFdw0dNQvwKBgQDePgUl/ZYNFKrD0DTJ2IW6glov3icfS3PG\n      V4H2yCBFudgCVZWH9WIOy7v+0KiLE7rOWFg2tKTT2JW8RUpDzgkZVy/sLuL4Elic\n      mKLc7TjyMPYANRH3fA+mE4/IszWLtStmkCd6Jwz6M8VeSKDRMMJpLTEjoPndiyxQ\n      lvaTAa8NyQKBgGGaUY6oe/zS4s013hBt+/9442bvCfM9eL0x43yHoHd8oJLxi5M1\n      MU1AweMbUrDwjDTIXv3zJNmhVR92ctsWTQ4o3TJ/v3sT3FO1zTDpNETqT3LIzlVK\n      MVi8eitZY+scoxcrHgStkRJgPHvRtQvPX9wNx4MfK02CF5EXqAqNMPQvAoGBAMbh\n      iYnt3RHnpMmG0TawZTv62uprS2deBkVAmjVV8ktzfDLak+4PUakb+SiXYbzT8yAl\n      Pwv1rGtILvdEqqjzAIGE3IXnj4WgJVw928EJKSTTW9HjrChlBTwB1XItrYVQo34t\n      Eqblu19MZRtyszeBAvlMT+UqcXAo04drEU2M/DLBAoGBAIgCMkp9INWWLbeVYHpk\n      I0G2IkBg+tiBARZ966Jnp1X4tJcdFQoJdP1n1POn+xz/AfP990TTy4KO4yRi43RU\n      umVBylS8e+EDHGCEzh+xkk70zryNi13Tm+LZeEnwSTbozcmu55/5aDB/dBbQwl/J\n      FMrbdBB4KdCPelKWpdpQrFCz\n      -----END PRIVATE KEY-----\n")),(0,i.kt)("h3",{id:"其他配置文件"},"其他配置文件"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"config")," 目录下的其他配置文件是不同环境的自定义配置文件。在这些配置文件中指定与环境相关的配置，如："),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"数据库"),(0,i.kt)("li",{parentName:"ul"},"数据库连接池"),(0,i.kt)("li",{parentName:"ul"},"MongoDB 连接"),(0,i.kt)("li",{parentName:"ul"},"扩展接口的地址")),(0,i.kt)("p",null,"推荐的测试环境配置："),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="config/application-test.yml"',title:'"config/application-test.yml"'},"spring:\n  data:\n    mongodb:\n      uri: mongodb://192.168.80.142/form\n  datasource:\n    url: jdbc:mysql://192.168.80.114:3306/form?serverTimezone=UTC&useUnicode=true&characterEncoding=UTF-8&allowMultiQueries=true&useSSL=false\n    username: form\n    password: form\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    druid:\n      # 指定测试数据库连接的连通性 SQL 语句\n      # MySQL：select 1\n      # Oracle：select 1 from dual\n      validation-query: select 1\n\n# 指定单点登录服务链接\nsso:\n  ssoService: http://121.30.232.162:18880/sso\n\nsinoform:\n  # 指定工作流设计器服务链接\n  workflow-design-server-uri: 192.168.80.142:8080\n  # 指定工作流引擎链接\n  workflow-server-uri: 192.168.80.142:18003\n  # 指定统一授权服务链接\n  uias-server-uri: 192.168.80.142:18001\n")),(0,i.kt)("h3",{id:"修改日志级别"},"修改日志级别"),(0,i.kt)("p",null,"可在配置文件中添加如下配置："),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yml",metastring:'title="config/application.yml"',title:'"config/application.yml"'},"logging:\n  level:\n    com.sinosoft: debug\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"com.sinosoft"),"为代码包路径")),(0,i.kt)("h2",{id:"数据库配置"},"数据库配置"),(0,i.kt)("p",null,"智能表单需要添加使用关系型数据库存储填报的表单数据。需要在 ",(0,i.kt)("inlineCode",{parentName:"p"},"application.yml")," 中添加数据库配置。"),(0,i.kt)("p",null,"已经内置以下数据库："),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"MySQL (8.0)"),(0,i.kt)("li",{parentName:"ul"},"Oracle"),(0,i.kt)("li",{parentName:"ul"},"达梦"),(0,i.kt)("li",{parentName:"ul"},"人大金仓")),(0,i.kt)("p",null,"有需要支持其他数据库的，请联系智能表单小组成员。"),(0,i.kt)("p",null,"示例配置如下："),(0,i.kt)(o.Z,{defaultValue:"mysql",values:[{label:"MySQL",value:"mysql"},{label:"Oracle",value:"oracle"},{label:"达梦",value:"DM"},{label:"人大金仓",value:"kingbase"}],mdxType:"Tabs"},(0,i.kt)(p.Z,{value:"mysql",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="config/application-test.yml"',title:'"config/application-test.yml"'},"## 指定数据库类型\ndatabase:\n  type: mysql\n\n## 指定数据库连接信息\nspring:\n  datasource:\n    url: jdbc:mysql://192.168.80.114:3306/form?serverTimezone=UTC&useUnicode=true&characterEncoding=UTF-8&allowMultiQueries=true&useSSL=false\n    username: form\n    password: 123456\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    druid:\n      validation-query: select 1\n"))),(0,i.kt)(p.Z,{value:"oracle",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="config/application-test.yml"',title:'"config/application-test.yml"'},"## 指定数据库类型\ndatabase:\n  type: oracle\n\n## 指定数据库连接信息\nspring:\n  datasource:\n    url: jdbc:oracle:thin:@192.168.80.142/sinoepuias\n    username: demo\n    password: demo\n    driver-class-name: oracle.jdbc.driver.OracleDriver\n    druid:\n      validation-query: select 1 from dual\n"))),(0,i.kt)(p.Z,{value:"DM",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="config/application-test.yml"',title:'"config/application-test.yml"'},"## 指定数据库类型（达梦数据库的SQL语法基本兼容 Oracle，所以在这里配制成 Oracle 即可）\ndatabase:\n  type: oracle\n\n## 指定数据库连接信息\nspring:\n  datasource:\n    username: FORM\n    password: 1234567890\n    url: jdbc:dm://127.0.0.1:5236\n    driver-class-name: dm.jdbc.driver.DmDriver\n    druid:\n      validation-query: select 1 from dual\n"))),(0,i.kt)(p.Z,{value:"kingbase",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="config/application-test.yml"',title:'"config/application-test.yml"'},"## 指定数据库类型（人大金仓数据库的SQL语法基本兼容 Oracle，所以在这里配制成 Oracle 即可）\ndatabase:\n  type: oracle\n\n## 指定数据库连接信息\nspring:\n  datasource:\n    username: FORM\n    password: 1234567890\n    url: jdbc:kingbase://127.0.0.1:54323/form\n    driver-class-name: com.kingbase.Driver\n    druid:\n      validation-query: select 1 from dual\n")))),(0,i.kt)("p",null,"目前智能表单内置的数据库 JDBC 驱动如下："),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"数据库"),(0,i.kt)("th",{parentName:"tr",align:null},"数据库 JDBC 驱动版本"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"MySQL"),(0,i.kt)("td",{parentName:"tr",align:null},"8.0.17")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Oracle"),(0,i.kt)("td",{parentName:"tr",align:null},"11.2.0.1.0")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"达梦"),(0,i.kt)("td",{parentName:"tr",align:null},"7.6.0.77 - Production")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"人大金仓"),(0,i.kt)("td",{parentName:"tr",align:null},"8.2.0")))),(0,i.kt)("h2",{id:"mongodb-配置密码"},"mongodb 配置密码"),(0,i.kt)("p",null,"有两种形式配置 mongodb 密码。在 ",(0,i.kt)("inlineCode",{parentName:"p"},"application.yml")," 或者扩展的 ",(0,i.kt)("inlineCode",{parentName:"p"},"application.yml")," 文件中，采用下面两种方式中的一种就可以："),(0,i.kt)(o.Z,{defaultValue:"1",values:[{label:"方式一",value:"1"},{label:"方式二",value:"2"}],mdxType:"Tabs"},(0,i.kt)(p.Z,{value:"1",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'{8,10} title="config/application-test.yml"',"{8,10}":!0,title:'"config/application-test.yml"'},"spring:\n  data:\n    mongodb:\n      host: 192.168.90.142\n      port: 27017\n      database: form\n      # 用户名\n      username: admin\n      # 密码\n      password: 123456\n"))),(0,i.kt)(p.Z,{value:"2",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'{4} title="config/application-test.yml"',"{4}":!0,title:'"config/application-test.yml"'},"spring:\n  data:\n    mongodb:\n      uri: mongodb://admin:123456@192.168.90.142:27017/form\n")))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"特别注意"),"，方式一中不能出现 ",(0,i.kt)("inlineCode",{parentName:"p"},"uri")," 配置，否则会按照 ",(0,i.kt)("inlineCode",{parentName:"p"},"uri")," 连接 mongodb 数据库。"),(0,i.kt)("h2",{id:"加密配置中的密码"},"加密配置中的密码"),(0,i.kt)("p",null,"为了安全起见，建议生产部署时，在配置文件中采用加密的密码。智能表单采用了 ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/ulisesbocchio/jasypt-spring-boot"},"jasypt-spring-boot")," 来支持加密的密码（在这里感谢天津局项目组的李利广同学提供的方案），下面的示例演示使用加密的 mongodb 密码："),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'{10} title="config/application-test.yml"',"{10}":!0,title:'"config/application-test.yml"'},"spring:\n  data:\n    mongodb:\n      host: 192.168.90.142\n      port: 27017\n      database: form\n      # 用户名\n      username: admin\n      # 密码\n      password: ENC(Jx99cRIksSSFoT4c20hZ2YSsJMzr2meaJLgtrmfDIBKt9SZIrfLuI0mYBANeh/pXBDweiG91IqXRbZ9OMXswZEqDy0t+vqoENakogT1jUGjxo/VAaJvHIjzWOQZOGrmkBZTSXV3Ez2O/GbeF5WHD2OsdsZ3RrJGD9TFBSm9c//L/w5GmSgOQr0xmx+5+B6arN4n2xNHrrktcG36BtlPHNHoYttNg1fALZh2EyxPdERWU1yTXG+Udq26/IVpeICY0H5lQFDlQCqEel2KMQ5Xk+5lU0l8gX6eMTOOOZG6UHC6zspN8oJd79khQyhGOcoaB7V9vSlFZBregBL5SudysrA==)\n")),(0,i.kt)("p",null,"在配置文件中采用 ",(0,i.kt)("inlineCode",{parentName:"p"},"ENC(加密密文)")," 的形式包装加密后的密码文本，并代替之前的密码文本。"),(0,i.kt)("p",null,"下面的章节会介绍加密使用的密钥对、生成随机的安全的密钥对的工具以及用来加密密码的工具。"),(0,i.kt)("h3",{id:"加密使用的私钥和公钥"},"加密使用的私钥和公钥"),(0,i.kt)("p",null,"智能表单采用 ",(0,i.kt)("inlineCode",{parentName:"p"},"RSA_PKCS1_PADDING")," 非对称加密算法加密密码。加密算法是 ",(0,i.kt)("inlineCode",{parentName:"p"},"RSA"),"，填充方式是 ",(0,i.kt)("inlineCode",{parentName:"p"},"PKCS1_PADDING"),"，填充位数是 ",(0,i.kt)("inlineCode",{parentName:"p"},"256"),"。"),(0,i.kt)("p",null,"对于非对称算法，需要使用公钥加密、私钥解密。智能表单中内置了可用于验证的私钥和公钥，但强烈建议各项目组重新生成公私钥（",(0,i.kt)("inlineCode",{parentName:"p"},"pem_pkcs8"),"格式，见",(0,i.kt)("a",{parentName:"p",href:"#%E7%94%9F%E6%88%90%E5%85%AC%E7%A7%81%E9%92%A5"},"后面章节介绍的生成密钥对工具"),"）。生成公私钥之后，将私钥配置在 ",(0,i.kt)("inlineCode",{parentName:"p"},"application.yml")," 中，如下所示："),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yml",metastring:'title="config/application.yml"',title:'"config/application.yml"'},"jasypt:\n  encryptor:\n    private-key-format: PEM\n    private-key-string: |-\n      -----BEGIN PRIVATE KEY-----\n      MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDOB29b269iirOU\n      BekzuCwHEJpEau3WH18jBZh9lQM72oQj5LmH2OY+F+CWdfQ7yzTmnWlZTVhsOoJH\n      iQiIDK/lEp7Ucl3cHEnWSn5j+ygGM1ipe+KCSf3ROBAT0inW34tHmREyBFvBK+8W\n      pebRoh3vjryDwvHJq+MdF8nLu66JVULDyoKHscF2wif+nehLvKLripuihFz5VC/7\n      80sUt4vSLMQ1eCnMIkQr/hjLa22s/os4Oo/d8aZuPLZ41w5XYmRYaKj8CRyvQrX4\n      my9bjA4YOf0C2vWHMyCj2WmOOIGRF/PGtg1gyIos74ApbpYCnNCZa6hIAQQ+z3Kr\n      jK5rlRj3AgMBAAECggEAKIqN/yVbfaiNbbM8EFFNWJaLxKrF4jyKG/od55hK6pw1\n      JFr9px2nMNDCANl1Fc8Gudp/wHLX03Qv7qOoah0U/56KYoOetJFcdi5ycHobhhzU\n      dYVLLRgiOekuQLg6Q235mj0khRMWewyKH4rFwLqF6X3M2qChs21/Y1oq+0wTLDKg\n      Yf9cPnmutDbi+qsiRv7IqNsw8DjkQtpSyaSBZ1L0JHa4DjR1CDgkSaCG+OJ0PUxo\n      2tOd142dIRnN3KJG6WSwDSB1+6oZEky1Ucm3ORjtDRqGlOT0Wf2N9TLdSizpz7yu\n      fOsDVOdeggz2qPCX72gHErT9bFdSyZMLFuw95W7KAQKBgQDtUvUKAHZIHgKadowe\n      FxWQmMFgvdEVG8ztDrMsrgNal8xAME/UFqXqYhF+ekGr+Swcpshy+/iPl7zp4AOC\n      hfE+lOddl8mfSPLXVxiKRp6Uen1nN6P3E60qyXFH+zS/S5i8WP0Z5atL0OrA4zNj\n      oPDThHIZRWzOYti3zFdw0dNQvwKBgQDePgUl/ZYNFKrD0DTJ2IW6glov3icfS3PG\n      V4H2yCBFudgCVZWH9WIOy7v+0KiLE7rOWFg2tKTT2JW8RUpDzgkZVy/sLuL4Elic\n      mKLc7TjyMPYANRH3fA+mE4/IszWLtStmkCd6Jwz6M8VeSKDRMMJpLTEjoPndiyxQ\n      lvaTAa8NyQKBgGGaUY6oe/zS4s013hBt+/9442bvCfM9eL0x43yHoHd8oJLxi5M1\n      MU1AweMbUrDwjDTIXv3zJNmhVR92ctsWTQ4o3TJ/v3sT3FO1zTDpNETqT3LIzlVK\n      MVi8eitZY+scoxcrHgStkRJgPHvRtQvPX9wNx4MfK02CF5EXqAqNMPQvAoGBAMbh\n      iYnt3RHnpMmG0TawZTv62uprS2deBkVAmjVV8ktzfDLak+4PUakb+SiXYbzT8yAl\n      Pwv1rGtILvdEqqjzAIGE3IXnj4WgJVw928EJKSTTW9HjrChlBTwB1XItrYVQo34t\n      Eqblu19MZRtyszeBAvlMT+UqcXAo04drEU2M/DLBAoGBAIgCMkp9INWWLbeVYHpk\n      I0G2IkBg+tiBARZ966Jnp1X4tJcdFQoJdP1n1POn+xz/AfP990TTy4KO4yRi43RU\n      umVBylS8e+EDHGCEzh+xkk70zryNi13Tm+LZeEnwSTbozcmu55/5aDB/dBbQwl/J\n      FMrbdBB4KdCPelKWpdpQrFCz\n      -----END PRIVATE KEY-----\n")),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"v1.11.0 版本之前")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"v1.11.0 版本之前，智能表单没有内置任何密钥对，需要项目组在 ",(0,i.kt)("inlineCode",{parentName:"p"},"application.yml")," 中按照上面的形式指定密钥对才能启用加密配置。"))),(0,i.kt)("h3",{id:"生成公私钥"},"生成公私钥"),(0,i.kt)("p",null,"通过下面的工具即可生成公私钥："),(0,i.kt)(A,{mdxType:"GenRSAKeyPair"}),(0,i.kt)("p",null,"请将私钥拷贝到 ",(0,i.kt)("inlineCode",{parentName:"p"},"application.yml")," 配置文件中。"),(0,i.kt)("h3",{id:"加密密码"},"加密密码"),(0,i.kt)("p",null,"需要使用公钥加密密码，可以使用下面的工具加密密码："),(0,i.kt)(D,{mdxType:"RSAEncryptor"}))}q.isMDXComponent=!0}}]);